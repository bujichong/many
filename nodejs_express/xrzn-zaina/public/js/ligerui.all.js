!function($){Function.prototype.ligerExtend=function(a,b){if("function"!=typeof a)return this;this.base=a.prototype,this.base.constructor=a;var c=function(){};c.prototype=a.prototype,this.prototype=new c,this.prototype.constructor=this,b&&$.extend(this.prototype,b)},Function.prototype.ligerDefer=function(a,b,c){var d=this;return setTimeout(function(){d.apply(a,c||[])},b)},window.liger=$.ligerui={version:"V1.1.9",managerCount:0,managers:{},managerIdPrev:"ligerui",error:{managerIsExist:"管理器id已经存在"},getId:function(a){a=a||this.managerIdPrev;var b=a+(1e3+this.managerCount);return this.managerCount++,b},add:function(a){if(2==arguments.length){var b=arguments[1];return b.id=b.id||b.options.id||arguments[0].id,this.addManager(b),void 0}if(a.id||(a.id=this.getId(a.__idPrev())),this.managers[a.id])throw new Error(this.error.managerIsExist);this.managers[a.id]=a},remove:function(a){"string"==typeof a||"number"==typeof a?delete $.ligerui.managers[a]:"object"==typeof a&&a instanceof $.ligerui.core.Component&&delete $.ligerui.managers[a.id]},get:function(a,b){return b=b||"ligeruiid","string"==typeof a||"number"==typeof a?$.ligerui.managers[a]:"object"==typeof a&&a.length?a[0][b]||$(a[0]).attr(b)?$.ligerui.managers[a[0][b]||$(a[0]).attr(b)]:null:null},find:function(a){var c,d,b=[];for(c in this.managers)d=this.managers[c],a instanceof Function?d instanceof a&&b.push(d):a instanceof Array?-1!=$.inArray(d.__getType(),a)&&b.push(d):d.__getType()==a&&b.push(d);return b},run:function(a,b,c){var d,e,f;if(a){if(c=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},c||{}),a=a.replace(/^ligerGet/,""),a=a.replace(/^liger/,""),null==this||this==window||c.isStatic)return $.ligerui.plugins[a]||($.ligerui.plugins[a]={fn:$["liger"+a],isStatic:!0}),new $.ligerui[c.controlNamespace][a]($.extend({},$[c.defaultsNamespace][a]||{},$[c.defaultsNamespace][a+"String"]||{},b.length>0?b[0]:{}));if($.ligerui.plugins[a]||($.ligerui.plugins[a]={fn:$.fn["liger"+a],isStatic:!1}),/Manager$/.test(a))return $.ligerui.get(this,c.idAttrName);if(this.each(function(){var d,e,f;return this[c.idAttrName]||$(this).attr(c.idAttrName)?(d=$.ligerui.get(this[c.idAttrName]||$(this).attr(c.idAttrName)),d&&b.length>0&&d.set(b[0]),void 0):(b.length>=1&&"string"==typeof b[0]||(e=b.length>0?b[0]:null,f=$.extend({},$[c.defaultsNamespace][a]||{},$[c.defaultsNamespace][a+"String"]||{},e||{}),c.propertyToElemnt&&(f[c.propertyToElemnt]=this),c.hasElement?new $.ligerui[c.controlNamespace][a](this,f):new $.ligerui[c.controlNamespace][a](f)),void 0)}),0==this.length)return null;if(0==b.length)return $.ligerui.get(this,c.idAttrName);if("object"==typeof b[0])return $.ligerui.get(this,c.idAttrName);if("string"==typeof b[0]){if(d=$.ligerui.get(this,c.idAttrName),null==d)return;if("option"!=b[0]){if(e=b[0],!d[e])return;return f=Array.apply(null,b),f.shift(),d[e].apply(d,f)}if(2==b.length)return d.get(b[1]);if(b.length>=3)return d.set(b[1],b[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},$.ligerui.defaults=$.ligerDefaults,$.ligerui.methods=$.ligerMethos,$.fn.liger=function(a){return a?$.ligerui.run.call(this,a,arguments):$.ligerui.get(this)},$.ligerui.core.Component=function(a){this.events=this.events||{},this.options=a||{},this.children={}},$.extend($.ligerui.core.Component.prototype,{__getType:function(){return"$.ligerui.core.Component"},__idPrev:function(){return"ligerui"},set:function(a,b){var c,d,e,f;if(a)if("object"!=typeof a){if(e=a,0==e.indexOf("on"))return"function"==typeof b&&this.bind(e.substr(2),b),void 0;this.trigger("propertychange",a,b),this.options||(this.options={}),this.options[e]=b,f="_set"+e.substr(0,1).toUpperCase()+e.substr(1),this[f]&&this[f].call(this,b),this.trigger("propertychanged",a,b)}else{if(this.options!=a?($.extend(this.options,a),c=a):c=$.extend({},a),void 0==b||1==b)for(d in c)0==d.indexOf("on")&&this.set(d,c[d]);if(void 0==b||0==b)for(d in c)0!=d.indexOf("on")&&this.set(d,c[d])}},get:function(a){var b="_get"+a.substr(0,1).toUpperCase()+a.substr(1);return this[b]?this[b].call(this,a):this.options[a]},hasBind:function(a){var b=a.toLowerCase(),c=this.events[b];return c&&c.length?!0:!1},trigger:function(a,b){var e,f,c=a.toLowerCase(),d=this.events[c];if(d)for(b=b||[],0==b instanceof Array&&(b=[b]),e=0;e<d.length;e++)if(f=d[e],0==f.handler.apply(f.context,b))return!1},bind:function(a,b,c){var d,e,f;if("object"!=typeof a){if("function"!=typeof b)return!1;e=a.toLowerCase(),f=this.events[e]||[],c=c||this,f.push({handler:b,context:c}),this.events[e]=f}else for(d in a)this.bind(d,a[d])},unbind:function(a,b){var c,d,e,f;if(!a)return this.events={},void 0;if(c=a.toLowerCase(),d=this.events[c],d&&d.length)if(b){for(e=0,f=d.length;f>e;e++)if(d[e].handler==b){d.splice(e,1);break}}else delete this.events[c]},destroy:function(){$.ligerui.remove(this)}}),$.ligerui.core.UIComponent=function(a,b){$.ligerui.core.UIComponent.base.constructor.call(this,b);var c=this._extendMethods();c&&$.extend(this,c),this.element=a,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},$.ligerui.core.UIComponent.ligerExtend($.ligerui.core.Component,{__getType:function(){return"$.ligerui.core.UIComponent"},_extendMethods:function(){},_init:function(){var attributes,i,name,p,attroptions;if(this.type=this.__getType(),this.id=this.element?this.options.id||this.element.id||$.ligerui.getId(this.__idPrev()):this.options.id||$.ligerui.getId(this.__idPrev()),$.ligerui.add(this),this.element){if(attributes=this.attr(),attributes&&attributes instanceof Array)for(i=0;i<attributes.length;i++)name=attributes[i],this.options[name]=$(this.element).attr(name);if(p=this.options,$(this.element).attr("ligerui"))try{attroptions=$(this.element).attr("ligerui"),0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,$.ligerui.remove(this)}}),$.ligerui.controls.Input=function(a,b){$.ligerui.controls.Input.base.constructor.call(this,a,b)},$.ligerui.controls.Input.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Input"},attr:function(){return["nullText"]},setValue:function(a){return this.set("value",a)},getValue:function(){return this.get("value")},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){}}),$.ligerui.win={top:!1,mask:function(){function b(){if($.ligerui.win.windowMask){var a=$(window).height()+$(window).scrollTop();$.ligerui.win.windowMask.height(a)}}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",b),$(window).bind("scroll",b)),this.windowMask.show(),b(),this.masking=!0},unmask:function(a){var c,d,e,f,g,b=$("body > .l-dialog:visible,body > .l-window:visible");for(c=0,d=b.length;d>c;c++)if(e=b.eq(c).attr("ligeruiid"),(!a||a.id!=e)&&(f=$.ligerui.get(e),f&&(g=f.get("modal"))))return;this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var a=this;a.taskbar.animate({bottom:-32},function(){a.taskbar.remove(),a.taskbar=null})},activeTask:function(a){var b,c;for(b in this.tasks)c=this.tasks[b],b==a.id?c.addClass("l-taskbar-task-active"):c.removeClass("l-taskbar-task-active")},getTask:function(a){var b=this;if(b.taskbar)return b.tasks[a.id]?b.tasks[a.id]:null},addTask:function(a){var c,d,b=this;return b.taskbar||b.createTaskbar(),b.tasks[a.id]?b.tasks[a.id]:(c=a.get("title"),d=b.tasks[a.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+c+"</div></div>"),b.taskbar.tasks.append(d),b.activeTask(a),d.bind("click",function(){b.activeTask(a),a.actived?a.min():a.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),d)},hasTask:function(){for(var a in this.tasks)if(this.tasks[a])return!0;return!1},removeTask:function(a){var b=this;b.taskbar&&(b.tasks[a.id]&&(b.tasks[a.id].unbind(),b.tasks[a.id].remove(),delete b.tasks[a.id]),b.hasTask()||b.removeTaskbar())},setFront:function(a){var c,d,b=$.ligerui.find($.ligerui.core.Win);for(c in b)d=b[c],d==a?($(d.element).css("z-index","9200"),this.activeTask(d)):$(d.element).css("z-index","9100")}},$.ligerui.core.Win=function(a,b){$.ligerui.core.Win.base.constructor.call(this,a,b)},$.ligerui.core.Win.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Win"},mask:function(){this.options.modal&&$.ligerui.win.mask(this)},unmask:function(){this.options.modal&&$.ligerui.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),$.ligerui.draggable={dragging:!1},$.ligerui.resizable={reszing:!1},$.ligerui.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(a){var e,f,g,h,i,j,k,b=function(a){return 10>a?"0"+a:a},c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d=function(a){return c.lastIndex=0,c.test(a)?'"'+a.replace(c,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'};if(null===a)return"null";if(e=typeof a,"undefined"===e)return void 0;if("string"===e)return d(a);if("number"===e||"boolean"===e)return""+a;if("object"===e){if("function"==typeof a.toJSON)return $.ligerui.toJSON(a.toJSON());if(a.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null;if(f=[],a.constructor===Array){for(g=0,h=a.length;h>g;g++)f.push($.ligerui.toJSON(a[g])||"null");return"["+f.join(",")+"]"}for(k in a){if(e=typeof k,"number"===e)i='"'+k+'"';else{if("string"!==e)continue;i=d(k)}e=typeof a[k],"function"!==e&&"undefined"!==e&&(j=$.ligerui.toJSON(a[k]),f.push(i+":"+j))}return"{"+f.join(",")+"}"}}}(jQuery),function(a){a.fn.ligerAccordion=function(){return a.ligerui.run.call(this,"ligerAccordion",arguments)},a.fn.ligerGetAccordionManager=function(){return a.ligerui.get(this)},a.ligerDefaults.Accordion={height:null,speed:"normal",changeHeightOnResize:!1,heightDiff:0},a.ligerMethos.Accordion={},a.ligerui.controls.Accordion=function(b,c){a.ligerui.controls.Accordion.base.constructor.call(this,b,c)},a.ligerui.controls.Accordion.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Accordion"},__idPrev:function(){return"Accordion"},_extendMethods:function(){return a.ligerMethos.Accordion},_render:function(){var d,b=this,c=this.options;b.accordion=a(b.element),b.accordion.hasClass("l-accordion-panel")||b.accordion.addClass("l-accordion-panel"),d=0,a("> div[lselected=true]",b.accordion).length>0&&(d=a("> div",b.accordion).index(a("> div[lselected=true]",b.accordion))),a("> div",b.accordion).each(function(b,c){var e=a('<div class="l-accordion-header"><div class="l-accordion-toggle"></div><div class="l-accordion-header-inner"></div></div>');b==d&&a(".l-accordion-toggle",e).addClass("l-accordion-toggle-open"),a(c).attr("title")&&(a(".l-accordion-header-inner",e).html(a(c).attr("title")),a(c).attr("title","")),a(c).before(e),a(c).hasClass("l-accordion-content")||a(c).addClass("l-accordion-content")}),a(".l-accordion-toggle",b.accordion).each(function(){a(this).hasClass("l-accordion-toggle-open")||a(this).hasClass("l-accordion-toggle-close")||a(this).addClass("l-accordion-toggle-close"),a(this).hasClass("l-accordion-toggle-close")&&a(this).parent().next(".l-accordion-content:visible").hide()}),a(".l-accordion-header",b.accordion).hover(function(){a(this).addClass("l-accordion-header-over")},function(){a(this).removeClass("l-accordion-header-over")}),a(".l-accordion-toggle",b.accordion).hover(function(){a(this).hasClass("l-accordion-toggle-open")?a(this).addClass("l-accordion-toggle-open-over"):a(this).hasClass("l-accordion-toggle-close")&&a(this).addClass("l-accordion-toggle-close-over")},function(){a(this).hasClass("l-accordion-toggle-open")?a(this).removeClass("l-accordion-toggle-open-over"):a(this).hasClass("l-accordion-toggle-close")&&a(this).removeClass("l-accordion-toggle-close-over")}),a(">.l-accordion-header",b.accordion).click(function(){var b=a(".l-accordion-toggle:first",this);b.hasClass("l-accordion-toggle-close")?(b.removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over"),b.addClass("l-accordion-toggle-open"),a(this).next(".l-accordion-content").show(c.speed).siblings(".l-accordion-content:visible").hide(c.speed),a(this).siblings(".l-accordion-header").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close")):(b.removeClass("l-accordion-toggle-open").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over").addClass("l-accordion-toggle-close"),a(this).next(".l-accordion-content").hide(c.speed))}),b.headerHoldHeight=0,a("> .l-accordion-header",b.accordion).each(function(){b.headerHoldHeight+=a(this).height()}),c.height&&"string"==typeof c.height&&c.height.indexOf("%")>0?(b.onResize(),c.changeHeightOnResize&&a(window).resize(function(){b.onResize()})):c.height?(b.height=c.heightDiff+c.height,b.accordion.height(b.height),b.setHeight(c.height)):b.header=b.accordion.height(),b.set(c)},onResize:function(){var d,b=this,c=this.options;return c.height&&"string"==typeof c.height&&-1!=c.height.indexOf("%")?("body"==b.accordion.parent()[0].tagName.toLowerCase()?(d=a(window).height(),d-=parseInt(b.layout.parent().css("paddingTop")),d-=parseInt(b.layout.parent().css("paddingBottom")),b.height=c.heightDiff+.01*d*parseFloat(b.height)):b.height=c.heightDiff+.01*b.accordion.parent().height()*parseFloat(c.height),b.accordion.height(b.height),b.setContentHeight(b.height-b.headerHoldHeight),void 0):!1},setHeight:function(b){var c=this;this.options,c.accordion.height(b),b-=c.headerHoldHeight,a("> .l-accordion-content",c.accordion).height(b)}})}(jQuery),function(a){a.fn.ligerButton=function(){return a.ligerui.run.call(this,"ligerButton",arguments)},a.fn.ligerGetButtonManager=function(){return a.ligerui.run.call(this,"ligerGetButtonManager",arguments)},a.ligerDefaults.Button={width:100,text:"Button",disabled:!1},a.ligerMethos.Button={},a.ligerui.controls.Button=function(b,c){a.ligerui.controls.Button.base.constructor.call(this,b,c)},a.ligerui.controls.Button.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"Button"},__idPrev:function(){return"Button"},_extendMethods:function(){return a.ligerMethos.Button},_render:function(){var b=this,c=this.options;b.button=a(b.element),b.button.addClass("l-btn"),b.button.append('<div class="l-btn-l"></div><div class="l-btn-r"></div><span></span>'),c.click&&b.button.click(function(){c.disabled||c.click()}),b.set(c)},_setEnabled:function(a){a&&this.button.removeClass("l-btn-disabled")},_setDisabled:function(a){a&&(this.button.addClass("l-btn-disabled"),this.options.disabled=!0)},_setWidth:function(a){this.button.width(a)},_setText:function(b){a("span",this.button).html(b)},setValue:function(a){this.set("text",a)},getValue:function(){return this.options.text},setEnabled:function(){this.set("disabled",!1)},setDisabled:function(){this.set("disabled",!0)}})}(jQuery),function(a){a.fn.ligerCheckBox=function(){return a.ligerui.run.call(this,"ligerCheckBox",arguments)},a.fn.ligerGetCheckBoxManager=function(){return a.ligerui.run.call(this,"ligerGetCheckBoxManager",arguments)},a.ligerDefaults.CheckBox={disabled:!1},a.ligerMethos.CheckBox={},a.ligerui.controls.CheckBox=function(b,c){a.ligerui.controls.CheckBox.base.constructor.call(this,b,c)},a.ligerui.controls.CheckBox.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){return a.ligerMethos.CheckBox},_render:function(){var b=this,c=this.options;b.input=a(b.element),b.link=a('<a class="l-checkbox"></a>'),b.wrapper=b.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent(),b.wrapper.prepend(b.link),b.link.click(function(){return b.input.attr("disabled")?!1:c.disabled?!1:0==b.trigger("beforeClick",[b.element])?!1:(a(this).hasClass("l-checkbox-checked")?b._setValue(!1):b._setValue(!0),b.input.trigger("change"),void 0)}),b.wrapper.hover(function(){c.disabled||a(this).addClass("l-over")},function(){a(this).removeClass("l-over")}),this.set(c),this.updateStyle()},_setCss:function(a){this.wrapper.css(a)},_setValue:function(a){var b=this;this.options,a?(b.input[0].checked=!0,b.link.addClass("l-checkbox-checked")):(b.input[0].checked=!1,b.link.removeClass("l-checkbox-checked"))},_setDisabled:function(a){a?(this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"))},_getValue:function(){return this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")}})}(jQuery),function(a){a.fn.ligerComboBox=function(){return a.ligerui.run.call(this,"ligerComboBox",arguments)},a.fn.ligerGetComboBoxManager=function(){return a.ligerui.run.call(this,"ligerGetComboBoxManager",arguments)},a.ligerDefaults.ComboBox={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,columns:!1,selectBoxWidth:!1,selectBoxHeight:!1,onBeforeSelect:!1,onSelected:null,initValue:null,initText:null,valueField:"id",textField:"text",valueFieldID:null,slide:!0,split:";",data:null,tree:null,treeLeafOnly:!0,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!0,url:null,onSuccess:null,onError:null,onBeforeOpen:null,render:null,absolute:!0},a.ligerMethos.ComboBox=a.ligerMethos.ComboBox||{},a.ligerui.controls.ComboBox=function(b,c){a.ligerui.controls.ComboBox.base.constructor.call(this,b,c)},a.ligerui.controls.ComboBox.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"ComboBox"},_extendMethods:function(){return a.ligerMethos.ComboBox},_init:function(){a.ligerui.controls.ComboBox.base._init.call(this);var b=this.options;b.columns&&(b.isShowCheckBox=!0),b.isMultiSelect&&(b.isShowCheckBox=!0)},_render:function(){var d,b=this,c=this.options;if(b.data=c.data,b.inputText=null,b.select=null,b.textFieldID="",b.valueFieldID="",b.valueField=null,"input"==this.element.tagName.toLowerCase())this.element.readOnly=!0,b.inputText=a(this.element),b.textFieldID=this.element.id;else{if("select"!=this.element.tagName.toLowerCase())return;a(this.element).hide(),b.select=a(this.element),c.isMultiSelect=!1,c.isShowCheckBox=!1,b.textFieldID=this.element.id+"_txt",b.inputText=a('<input type="text" readonly="true"/>'),b.inputText.attr("id",b.textFieldID).insertAfter(a(this.element))}void 0==b.inputText[0].name&&(b.inputText[0].name=b.textFieldID),b.valueField=null,c.valueFieldID?(b.valueField=a("#"+c.valueFieldID+":input"),0==b.valueField.length&&(b.valueField=a('<input type="hidden"/>')),b.valueField[0].id=b.valueField[0].name=c.valueFieldID):(b.valueField=a('<input type="hidden"/>'),b.valueField[0].id=b.valueField[0].name=b.textFieldID+"_val"),void 0==b.valueField[0].name&&(b.valueField[0].name=b.valueField[0].id),b.link=a('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),b.selectBox=a('<div class="l-box-select"><div class="l-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-box-select-table"></table></div></div>'),b.selectBox.table=a("table:first",b.selectBox),b.wrapper=b.inputText.wrap('<div class="l-text l-text-combobox"></div>').parent(),b.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),b.wrapper.append(b.link),b.textwrapper=b.wrapper.wrap('<div class="l-text-wrapper"></div>').parent(),c.absolute?b.selectBox.appendTo("body").addClass("l-box-select-absolute"):b.textwrapper.append(b.selectBox),b.textwrapper.append(b.valueField),b.inputText.addClass("l-text-field"),c.isShowCheckBox&&!b.select?a("table",b.selectBox).addClass("l-table-checkbox"):(c.isShowCheckBox=!1,a("table",b.selectBox).addClass("l-table-nocheckbox")),b.link.hover(function(){c.disabled||(this.className="l-trigger-hover")},function(){c.disabled||(this.className="l-trigger")}).mousedown(function(){c.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){c.disabled||(this.className="l-trigger-hover")}).click(function(){return c.disabled?void 0:0==b.trigger("beforeOpen")?!1:(b._toggleSelectBox(b.selectBox.is(":visible")),void 0)}),b.inputText.click(function(){return c.disabled?void 0:0==b.trigger("beforeOpen")?!1:(b._toggleSelectBox(b.selectBox.is(":visible")),void 0)}).blur(function(){c.disabled||b.wrapper.removeClass("l-text-focus")}).focus(function(){c.disabled||b.wrapper.addClass("l-text-focus")}),b.wrapper.hover(function(){c.disabled||b.wrapper.addClass("l-text-over")},function(){c.disabled||b.wrapper.removeClass("l-text-over")}),b.resizing=!1,b.selectBox.hover(null,function(){c.hideOnLoseFocus&&b.selectBox.is(":visible")&&!b.boxToggling&&!b.resizing&&b._toggleSelectBox(!0)}),d=a("tr",b.selectBox.table).length,!c.selectBoxHeight&&8>d&&(c.selectBoxHeight=30*d),c.selectBoxHeight&&b.selectBox.height(c.selectBoxHeight),b.bulidContent(),b.set(c),c.selectBoxWidth?b.selectBox.width(c.selectBoxWidth):b.selectBox.css("width",b.wrapper.css("width"))},destroy:function(){this.wrapper&&this.wrapper.remove(),this.selectBox&&this.selectBox.remove(),this.options=null,a.ligerui.remove(this)},_setDisabled:function(a){a?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setLable:function(b){var c=this,d=this.options;b&&(c.labelwrapper?c.labelwrapper.find(".l-text-label:first").html(b+":&nbsp"):(c.labelwrapper=c.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),c.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+b+":&nbsp</div>"),c.textwrapper.css("float","left")),d.labelWidth?a(".l-text-label",c.labelwrapper).outerWidth(d.labelWidth):d.labelWidth=a(".l-text-label",c.labelwrapper).outerWidth(),a(".l-text-label",c.labelwrapper).width(d.labelWidth),a(".l-text-label",c.labelwrapper).height(c.wrapper.height()),c.labelwrapper.append('<br style="clear:both;" />'),d.labelAlign&&a(".l-text-label",c.labelwrapper).css("text-align",d.labelAlign),c.textwrapper.css({display:"inline"}),c.labelwrapper.width(c.wrapper.outerWidth()+d.labelWidth+2))},_setWidth:function(a){var b=this;a>20&&(b.wrapper.css({width:a}),b.inputText.css({width:a-20}),b.textwrapper.css({width:a}))},_setHeight:function(a){var b=this;a>10&&(b.wrapper.height(a),b.inputText.height(a-2),b.link.height(a-4),b.textwrapper.css({width:a}))},_setResize:function(b){if(b&&a.fn.ligerResizable){var c=this;c.selectBox.ligerResizable({handles:"se,s,e",onStartResize:function(){c.resizing=!0,c.trigger("startResize")},onEndResize:function(){return c.resizing=!1,0==c.trigger("endResize")?!1:void 0}}),c.selectBox.append("<div class='l-btn-nw-drop'></div>")}},findTextByValue:function(b){var e,f,c=this,d=this.options;return void 0==b?"":(e="",f=function(a){var e,c=b.toString().split(d.split);for(e=0;e<c.length;e++)if(c[e]==a)return!0;return!1},a(c.data).each(function(a,b){var c=b[d.valueField],g=b[d.textField];f(c)&&(e+=g+d.split)}),e.length>0&&(e=e.substr(0,e.length-1)),e)},findValueByText:function(b){var e,f,c=this,d=this.options;return b||""!=b?(e=function(a){var e,c=b.toString().split(d.split);for(e=0;e<c.length;e++)if(c[e]==a)return!0;return!1},f="",a(c.data).each(function(a,b){var c=b[d.valueField],g=b[d.textField];e(g)&&(f+=c+d.split)}),f.length>0&&(f=f.substr(0,f.length-1)),f):""},removeItem:function(){},insertItem:function(){},addItem:function(){},_setValue:function(b){var f,g,c=this,d=this.options,e=c.findTextByValue(b);if(d.tree)c.selectValueByTree(b);else if(d.isMultiSelect)for(c._changeValue(b,e),f=b.toString().split(d.split),a("table.l-table-checkbox :checkbox",c.selectBox).each(function(){this.checked=!1}),g=0;g<f.length;g++)a("table.l-table-checkbox tr[value="+f[g]+"] :checkbox",c.selectBox).each(function(){this.checked=!0});else c._changeValue(b,e),a("tr[value="+b+"] td",c.selectBox).addClass("l-selected"),a("tr[value!="+b+"] td",c.selectBox).removeClass("l-selected")},selectValue:function(a){this._setValue(a)},bulidContent:function(){var b=this,c=this.options;this.clearContent(),b.select?b.setSelect():b.data?b.setData(b.data):c.tree?b.setTree(c.tree):c.grid?b.setGrid(c.grid):c.url&&a.ajax({type:"post",url:c.url,cache:!1,dataType:"json",success:function(a){b.data=a,b.setData(b.data),b.trigger("success",[b.data])},error:function(a,c){b.trigger("error",[a,c])}})},clearContent:function(){var b=this;this.options,a("table",b.selectBox).html("")},setSelect:function(){var b=this,c=this.options;this.clearContent(),a("option",b.select).each(function(c){var d=a(this).val(),e=a(this).html(),f=a("<tr><td index='"+c+"' value='"+d+"'>"+e+"</td>");a("table.l-table-nocheckbox",b.selectBox).append(f),a("td",f).hover(function(){a(this).addClass("l-over")},function(){a(this).removeClass("l-over")})}),a("td:eq("+b.select[0].selectedIndex+")",b.selectBox).each(function(){var d,e,f;return a(this).hasClass("l-selected")?(b.selectBox.hide(),void 0):(a(".l-selected",b.selectBox).removeClass("l-selected"),a(this).addClass("l-selected"),b.select[0].selectedIndex!=a(this).attr("index")&&b.select[0].onchange&&(b.select[0].selectedIndex=a(this).attr("index"),b.select[0].onchange()),d=parseInt(a(this).attr("index")),b.select[0].selectedIndex=d,b.select.trigger("change"),b.selectBox.hide(),e=a(this).attr("value"),f=a(this).html(),c.render?b.inputText.val(c.render(e,f)):b.inputText.val(f),void 0)}),b._addClickEven()},setData:function(b){var e,f,g,h,i,j,c=this,d=this.options;if(this.clearContent(),b&&b.length){if(c.data!=b&&(c.data=b),d.columns)for(c.selectBox.table.headrow=a("<tr class='l-table-headerow'><td width='18px'></td></tr>"),c.selectBox.table.append(c.selectBox.table.headrow),c.selectBox.table.addClass("l-box-select-grid"),e=0;e<d.columns.length;e++)f=a("<td columnindex='"+e+"' columnname='"+d.columns[e].name+"'>"+d.columns[e].header+"</td>"),d.columns[e].width&&f.width(d.columns[e].width),c.selectBox.table.headrow.append(f);for(g=0;g<b.length;g++)h=b[g][d.valueField],i=b[g][d.textField],d.columns?(j=a("<tr value='"+h+"'><td style='width:18px;'  index='"+g+"' value='"+h+"' text='"+i+"' ><input type='checkbox' /></td></tr>"),a("td",c.selectBox.table.headrow).each(function(){var d,c=a(this).attr("columnname");c&&(d=a("<td>"+b[g][c]+"</td>"),j.append(d))}),c.selectBox.table.append(j)):(a("table.l-table-checkbox",c.selectBox).append("<tr value='"+h+"'><td style='width:18px;'  index='"+g+"' value='"+h+"' text='"+i+"' ><input type='checkbox' /></td><td index='"+g+"' value='"+h+"' align='left'>"+i+"</td>"),a("table.l-table-nocheckbox",c.selectBox).append("<tr value='"+h+"'><td index='"+g+"' value='"+h+"' align='left'>"+i+"</td>"));d.isShowCheckBox&&a.fn.ligerCheckBox&&a("table input:checkbox",c.selectBox).ligerCheckBox(),a(".l-table-checkbox input:checkbox",c.selectBox).change(function(){if(this.checked&&c.hasBind("beforeSelect")){var b=null;if(b="div"==a(this).parent().get(0).tagName.toLowerCase()?a(this).parent().parent():a(this).parent(),null!=b&&0==c.trigger("beforeSelect",[b.attr("value"),b.attr("text")]))return c.selectBox.slideToggle("fast"),!1}d.isMultiSelect||this.checked&&(a("input:checked",c.selectBox).not(this).each(function(){this.checked=!1,a(".l-checkbox-checked",a(this).parent()).removeClass("l-checkbox-checked")}),c.selectBox.slideToggle("fast")),c._checkboxUpdateValue()}),a("table.l-table-nocheckbox td",c.selectBox).hover(function(){a(this).addClass("l-over")},function(){a(this).removeClass("l-over")}),c._addClickEven(),c._dataInit()}},setTree:function(b){var c=this,d=this.options;this.clearContent(),c.selectBox.table.remove(),0!=b.checkbox?b.onCheck=function(){var b=c.treeManager.getChecked(),e=[],f=[];a(b).each(function(a,b){d.treeLeafOnly&&b.data.children||(e.push(b.data[d.valueField]),f.push(b.data[d.textField]))}),c._changeValue(e.join(d.split),f.join(d.split))}:(b.onSelect=function(a){var b,e;d.treeLeafOnly&&a.data.children||(b=a.data[d.valueField],e=a.data[d.textField],c._changeValue(b,e))},b.onCancelSelect=function(){c._changeValue("","")}),b.onAfterAppend=function(){if(c.treeManager){var e=null;d.initValue?e=d.initValue:""!=c.valueField.val()&&(e=c.valueField.val()),c.selectValueByTree(e)}},c.tree=a("<ul></ul>"),a("div:first",c.selectBox).append(c.tree),c.tree.ligerTree(b),c.treeManager=c.tree.ligerGetTreeManager()},selectValueByTree:function(b){var e,f,c=this,d=this.options;null!=b&&(e="",f=b.toString().split(d.split),a(f).each(function(a,b){c.treeManager.selectNode(b.toString()),e+=c.treeManager.getTextByID(b),a<f.length-1&&(e+=d.split)}),c._changeValue(b,e))},setGrid:function(b){var e,c=this,d=this.options;this.clearContent(),c.selectBox.table.remove(),c.grid=a("div:first",c.selectBox),b.columnWidth=b.columnWidth||120,b.width="100%",b.height="100%",b.heightDiff=-2,b.InWindow=!1,c.gridManager=c.grid.ligerGrid(b),d.hideOnLoseFocus=!1,0!=b.checkbox?(e=function(){var b=c.gridManager.getCheckedRows(),e=[],f=[];a(b).each(function(a,b){e.push(b[d.valueField]),f.push(b[d.textField])}),c._changeValue(e.join(d.split),f.join(d.split))},c.gridManager.bind("CheckAllRow",e),c.gridManager.bind("CheckRow",e)):(c.gridManager.bind("SelectRow",function(a){var f=a[d.valueField],g=a[d.textField];c._changeValue(f,g)}),c.gridManager.bind("UnSelectRow",function(){c._changeValue("","")})),c.bind("show",function(){c.gridManager&&c.gridManager._updateFrozenWidth()}),c.bind("endResize",function(){c.gridManager&&(c.gridManager._updateFrozenWidth(),c.gridManager.setHeight(c.selectBox.height()-2))})},_getValue:function(){return a(this.valueField).val()},getValue:function(){return this._getValue()},updateStyle:function(){var a=this;this.options,a._dataInit()},_dataInit:function(){var e,b=this,c=this.options,d=null;null!=c.initValue&&null!=c.initText&&b._changeValue(c.initValue,c.initText),null!=c.initValue?(d=c.initValue,c.tree?d&&b.selectValueByTree(d):(e=b.findTextByValue(d),b._changeValue(d,e))):null!=c.initText?(d=b.findValueByText(c.initText),b._changeValue(d,c.initText)):""!=b.valueField.val()&&(d=b.valueField.val(),c.tree?d&&b.selectValueByTree(d):(e=b.findTextByValue(d),b._changeValue(d,e))),c.isShowCheckBox||null==d||a("table tr",b.selectBox).find("td:first").each(function(){d==a(this).attr("value")&&a(this).addClass("l-selected")}),c.isShowCheckBox&&null!=d&&a(":checkbox",b.selectBox).each(function(){var f,b=null,e=a(this);b="div"==e.parent().get(0).tagName.toLowerCase()?e.parent().parent():e.parent(),null!=b&&(f=d.toString().split(c.split),a(f).each(function(c,d){d==b.attr("value")&&(a(".l-checkbox",b).addClass("l-checkbox-checked"),e[0].checked=!0)}))})},_changeValue:function(a,b){var c=this,d=this.options;c.valueField.val(a),d.render?c.inputText.val(d.render(a,b)):c.inputText.val(b),c.selectedValue=a,c.selectedText=b,c.inputText.trigger("change").focus(),c.trigger("selected",[a,b])},_checkboxUpdateValue:function(){var b=this,c=this.options,d="",e="";a("input:checked",b.selectBox).each(function(){var b=null;
b="div"==a(this).parent().get(0).tagName.toLowerCase()?a(this).parent().parent():a(this).parent(),b&&(d+=b.attr("value")+c.split,e+=b.attr("text")+c.split)}),d.length>0&&(d=d.substr(0,d.length-1)),e.length>0&&(e=e.substr(0,e.length-1)),b._changeValue(d,e)},_addClickEven:function(){var b=this,c=this.options;a(".l-table-nocheckbox td",b.selectBox).click(function(){var d=a(this).attr("value"),e=parseInt(a(this).attr("index")),f=a(this).html();return b.hasBind("beforeSelect")&&0==b.trigger("beforeSelect",[d,f])?(c.slide?b.selectBox.slideToggle("fast"):b.selectBox.hide(),!1):a(this).hasClass("l-selected")?(c.slide?b.selectBox.slideToggle("fast"):b.selectBox.hide(),void 0):(a(".l-selected",b.selectBox).removeClass("l-selected"),a(this).addClass("l-selected"),b.select&&b.select[0].selectedIndex!=e&&(b.select[0].selectedIndex=e,b.select.trigger("change")),c.slide?(b.boxToggling=!0,b.selectBox.hide("fast",function(){b.boxToggling=!1})):b.selectBox.hide(),b._changeValue(d,f),void 0)})},updateSelectBoxPosition:function(){var d,e,b=this,c=this.options;c.absolute?b.selectBox.css({left:b.wrapper.offset().left,top:b.wrapper.offset().top+1+b.wrapper.outerHeight()}):(d=b.wrapper.offset().top-a(window).scrollTop(),e=b.selectBox.height()+textHeight+4,d+e>a(window).height()&&d>e&&b.selectBox.css("marginTop",-1*(b.selectBox.height()+textHeight+5)))},_toggleSelectBox:function(b){var f,c=this,d=this.options;c.wrapper.height(),c.boxToggling=!0,b?d.slide?c.selectBox.slideToggle("fast",function(){c.boxToggling=!1}):(c.selectBox.hide(),c.boxToggling=!1):(c.updateSelectBoxPosition(),d.slide?c.selectBox.slideToggle("fast",function(){if(c.boxToggling=!1,!d.isShowCheckBox&&a("td.l-selected",c.selectBox).length>0){var b=a("td.l-selected",c.selectBox).offset().top-c.selectBox.offset().top;a(".l-box-select-inner",c.selectBox).animate({scrollTop:b})}}):(c.selectBox.show(),c.boxToggling=!1,!c.tree&&!c.grid&&!d.isShowCheckBox&&a("td.l-selected",c.selectBox).length>0&&(f=a("td.l-selected",c.selectBox).offset().top-c.selectBox.offset().top,a(".l-box-select-inner",c.selectBox).animate({scrollTop:f})))),c.isShowed=c.selectBox.is(":visible"),c.trigger("toggle",[b]),c.trigger(b?"hide":"show")}}),a.ligerui.controls.ComboBox.prototype.setValue=a.ligerui.controls.ComboBox.prototype.selectValue,a.ligerui.controls.ComboBox.prototype.setInputValue=a.ligerui.controls.ComboBox.prototype._changeValue}(jQuery),function(a){a.fn.ligerDateEditor=function(){return a.ligerui.run.call(this,"ligerDateEditor",arguments)},a.fn.ligerGetDateEditorManager=function(){return a.ligerui.run.call(this,"ligerGetDateEditorManager",arguments)},a.ligerDefaults.DateEditor={format:"yyyy-MM-dd hh:mm",showTime:!1,onChangeDate:!1,absolute:!0},a.ligerDefaults.DateEditorString={dayMessage:["日","一","二","三","四","五","六"],monthMessage:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],todayMessage:"今天",closeMessage:"关闭"},a.ligerMethos.DateEditor={},a.ligerui.controls.DateEditor=function(b,c){a.ligerui.controls.DateEditor.base.constructor.call(this,b,c)},a.ligerui.controls.DateEditor.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"DateEditor"},__idPrev:function(){return"DateEditor"},_extendMethods:function(){return a.ligerMethos.DateEditor},_render:function(){var d,e,b=this,c=this.options;!c.showTime&&c.format.indexOf(" hh:mm")>-1&&(c.format=c.format.replace(" hh:mm","")),"input"==this.element.tagName.toLowerCase()&&"text"==this.element.type&&(b.inputText=a(this.element),b.inputText.hasClass("l-text-field")||b.inputText.addClass("l-text-field"),b.link=a('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),b.text=b.inputText.wrap('<div class="l-text l-text-date"></div>').parent(),b.text.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),b.text.append(b.link),b.textwrapper=b.text.wrap('<div class="l-text-wrapper"></div>').parent(),d="",d+="<div class='l-box-dateeditor' style='display:none'>",d+="    <div class='l-box-dateeditor-header'>",d+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'><span></span></div>",d+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'><span></span></div>",d+="        <div class='l-box-dateeditor-header-text'><a class='l-box-dateeditor-header-month'></a> , <a  class='l-box-dateeditor-header-year'></a></div>",d+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'><span></span></div>",d+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'><span></span></div>",d+="    </div>",d+="    <div class='l-box-dateeditor-body'>",d+="        <table cellpadding='0' cellspacing='0' border='0' class='l-box-dateeditor-calendar'>",d+="            <thead>",d+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",d+="            </thead>",d+="            <tbody>",d+="                <tr class='l-first'><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",d+="            </tbody>",d+="        </table>",d+="        <ul class='l-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",d+="        <ul class='l-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",d+="        <ul class='l-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",d+="        <ul class='l-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",d+="    </div>",d+="    <div class='l-box-dateeditor-toolbar'>",d+="        <div class='l-box-dateeditor-time'></div>",d+="        <div class='l-button l-button-today'></div>",d+="        <div class='l-button l-button-close'></div>",d+="        <div class='l-clear'></div>",d+="    </div>",d+="</div>",b.dateeditor=a(d),c.absolute?b.dateeditor.appendTo("body").addClass("l-box-dateeditor-absolute"):b.textwrapper.append(b.dateeditor),b.header=a(".l-box-dateeditor-header",b.dateeditor),b.body=a(".l-box-dateeditor-body",b.dateeditor),b.toolbar=a(".l-box-dateeditor-toolbar",b.dateeditor),b.body.thead=a("thead",b.body),b.body.tbody=a("tbody",b.body),b.body.monthselector=a(".l-box-dateeditor-monthselector",b.body),b.body.yearselector=a(".l-box-dateeditor-yearselector",b.body),b.body.hourselector=a(".l-box-dateeditor-hourselector",b.body),b.body.minuteselector=a(".l-box-dateeditor-minuteselector",b.body),b.toolbar.time=a(".l-box-dateeditor-time",b.toolbar),b.toolbar.time.hour=a("<a></a>"),b.toolbar.time.minute=a("<a></a>"),b.buttons={btnPrevYear:a(".l-box-dateeditor-header-prevyear",b.header),btnNextYear:a(".l-box-dateeditor-header-nextyear",b.header),btnPrevMonth:a(".l-box-dateeditor-header-prevmonth",b.header),btnNextMonth:a(".l-box-dateeditor-header-nextmonth",b.header),btnYear:a(".l-box-dateeditor-header-year",b.header),btnMonth:a(".l-box-dateeditor-header-month",b.header),btnToday:a(".l-button-today",b.toolbar),btnClose:a(".l-button-close",b.toolbar)},e=new Date,b.now={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDay(),date:e.getDate(),hour:e.getHours(),minute:e.getMinutes()},b.currentDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDay(),date:e.getDate(),hour:e.getHours(),minute:e.getMinutes()},b.selectedDate=null,b.usedDate=null,a("td",b.body.thead).each(function(b,d){a(d).html(c.dayMessage[b])}),a("li",b.body.monthselector).each(function(b,d){a(d).html(c.monthMessage[b])}),b.buttons.btnToday.html(c.todayMessage),b.buttons.btnClose.html(c.closeMessage),c.showTime&&(b.toolbar.time.show(),b.toolbar.time.append(b.toolbar.time.hour).append(":").append(b.toolbar.time.minute),a("li",b.body.hourselector).each(function(b){var d=b;10>b&&(d="0"+b.toString()),a(this).html(d)}),a("li",b.body.minuteselector).each(function(b){var d=b;10>b&&(d="0"+b.toString()),a(this).html(d)})),b.bulidContent(),""!=b.inputText.val()&&b.onTextChange(),b.dateeditor.hover(null,function(){b.dateeditor.is(":visible")&&!b.editorToggling&&b.toggleDateEditor(!0)}),b.link.hover(function(){c.disabled||(this.className="l-trigger-hover")},function(){c.disabled||(this.className="l-trigger")}).mousedown(function(){c.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){c.disabled||(this.className="l-trigger-hover")}).click(function(){c.disabled||(b.bulidContent(),b.toggleDateEditor(b.dateeditor.is(":visible")))}),c.disabled&&(b.inputText.attr("readonly","readonly"),b.text.addClass("l-text-disabled")),c.initValue&&b.inputText.val(c.initValue),b.buttons.btnClose.click(function(){b.toggleDateEditor(!0)}),a("td",b.body.tbody).hover(function(){a(this).hasClass("l-box-dateeditor-today")||a(this).addClass("l-box-dateeditor-over")},function(){a(this).removeClass("l-box-dateeditor-over")}).click(function(){a(".l-box-dateeditor-selected",b.body.tbody).removeClass("l-box-dateeditor-selected"),a(this).hasClass("l-box-dateeditor-today")||a(this).addClass("l-box-dateeditor-selected"),b.currentDate.date=parseInt(a(this).html()),b.currentDate.day=new Date(b.currentDate.year,b.currentDate.month-1,1).getDay(),a(this).hasClass("l-box-dateeditor-out")&&(0==a("tr",b.body.tbody).index(a(this).parent())?0==--b.currentDate.month&&(b.currentDate.month=12,b.currentDate.year--):13==++b.currentDate.month&&(b.currentDate.month=1,b.currentDate.year++)),b.selectedDate={year:b.currentDate.year,month:b.currentDate.month,date:b.currentDate.date},b.showDate(),b.editorToggling=!0,b.dateeditor.slideToggle("fast",function(){b.editorToggling=!1})}),a(".l-box-dateeditor-header-btn",b.header).hover(function(){a(this).addClass("l-box-dateeditor-header-btn-over")},function(){a(this).removeClass("l-box-dateeditor-header-btn-over")}),b.buttons.btnYear.click(function(){b.body.yearselector.is(":visible")||a("li",b.body.yearselector).each(function(c){var e=b.currentDate.year+(c-4);e==b.currentDate.year?a(this).addClass("l-selected"):a(this).removeClass("l-selected"),a(this).html(e)}),b.body.yearselector.slideToggle()}),b.body.yearselector.hover(function(){},function(){a(this).slideUp()}),a("li",b.body.yearselector).click(function(){b.currentDate.year=parseInt(a(this).html()),b.body.yearselector.slideToggle(),b.bulidContent()}),b.buttons.btnMonth.click(function(){a("li",b.body.monthselector).each(function(c){b.currentDate.month==c+1?a(this).addClass("l-selected"):a(this).removeClass("l-selected")}),b.body.monthselector.slideToggle()}),b.body.monthselector.hover(function(){},function(){a(this).slideUp("fast")}),a("li",b.body.monthselector).click(function(){var c=a("li",b.body.monthselector).index(this);b.currentDate.month=c+1,b.body.monthselector.slideToggle(),b.bulidContent()}),b.toolbar.time.hour.click(function(){a("li",b.body.hourselector).each(function(c){b.currentDate.hour==c?a(this).addClass("l-selected"):a(this).removeClass("l-selected")}),b.body.hourselector.slideToggle()}),b.body.hourselector.hover(function(){},function(){a(this).slideUp("fast")}),a("li",b.body.hourselector).click(function(){var c=a("li",b.body.hourselector).index(this);b.currentDate.hour=c,b.body.hourselector.slideToggle(),b.bulidContent()}),b.toolbar.time.minute.click(function(){a("li",b.body.minuteselector).each(function(c){b.currentDate.minute==c?a(this).addClass("l-selected"):a(this).removeClass("l-selected")}),b.body.minuteselector.slideToggle("fast",function(){var c,b=a("li",this).index(a("li.l-selected",this));b>29&&(c=a("li.l-selected",this).offset().top-a(this).offset().top,a(this).animate({scrollTop:c}))})}),b.body.minuteselector.hover(function(){},function(){a(this).slideUp("fast")}),a("li",b.body.minuteselector).click(function(){var c=a("li",b.body.minuteselector).index(this);b.currentDate.minute=c,b.body.minuteselector.slideToggle("fast"),b.bulidContent()}),b.buttons.btnPrevMonth.click(function(){0==--b.currentDate.month&&(b.currentDate.month=12,b.currentDate.year--),b.bulidContent()}),b.buttons.btnNextMonth.click(function(){13==++b.currentDate.month&&(b.currentDate.month=1,b.currentDate.year++),b.bulidContent()}),b.buttons.btnPrevYear.click(function(){b.currentDate.year--,b.bulidContent()}),b.buttons.btnNextYear.click(function(){b.currentDate.year++,b.bulidContent()}),b.buttons.btnToday.click(function(){b.currentDate={year:b.now.year,month:b.now.month,day:b.now.day,date:b.now.date},b.selectedDate={year:b.now.year,month:b.now.month,day:b.now.day,date:b.now.date},b.showDate(),b.dateeditor.slideToggle("fast")}),b.inputText.change(function(){b.onTextChange()}).blur(function(){b.text.removeClass("l-text-focus")}).focus(function(){b.text.addClass("l-text-focus")}),b.text.hover(function(){b.text.addClass("l-text-over")},function(){b.text.removeClass("l-text-over")}),c.label&&(b.labelwrapper=b.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),b.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+c.label+":&nbsp</div>"),b.textwrapper.css("float","left"),c.labelWidth?a(".l-text-label",b.labelwrapper).outerWidth(c.labelWidth):c.labelWidth=a(".l-text-label",b.labelwrapper).outerWidth(),a(".l-text-label",b.labelwrapper).width(c.labelWidth),a(".l-text-label",b.labelwrapper).height(b.text.height()),b.labelwrapper.append('<br style="clear:both;" />'),c.labelAlign&&a(".l-text-label",b.labelwrapper).css("text-align",c.labelAlign),b.textwrapper.css({display:"inline"}),b.labelwrapper.width(b.text.outerWidth()+c.labelWidth+2)),b.set(c))},destroy:function(){this.textwrapper&&this.textwrapper.remove(),this.dateeditor&&this.dateeditor.remove(),this.options=null,a.ligerui.remove(this)},bulidContent:function(){var g,h,b=this,c=this.options,d=new Date(b.currentDate.year,b.currentDate.month-1,1).getDay(),e=b.currentDate.month,f=b.currentDate.year;13==++e&&(e=1,f++),g=new Date(f,e-1,0).getDate(),h=new Date(b.currentDate.year,b.currentDate.month-1,0).getDate(),b.buttons.btnMonth.html(c.monthMessage[b.currentDate.month-1]),b.buttons.btnYear.html(b.currentDate.year),b.toolbar.time.hour.html(b.currentDate.hour),b.toolbar.time.minute.html(b.currentDate.minute),1==b.toolbar.time.hour.html().length&&b.toolbar.time.hour.html("0"+b.toolbar.time.hour.html()),1==b.toolbar.time.minute.html().length&&b.toolbar.time.minute.html("0"+b.toolbar.time.minute.html()),a("td",this.body.tbody).each(function(){this.className=""}),a("tr",this.body.tbody).each(function(c,e){a("td",e).each(function(e,f){var i=7*c+(e-d),j=i+1;b.selectedDate&&b.currentDate.year==b.selectedDate.year&&b.currentDate.month==b.selectedDate.month&&i+1==b.selectedDate.date?((0==e||6==e)&&a(f).addClass("l-box-dateeditor-holiday"),a(f).addClass("l-box-dateeditor-selected"),a(f).siblings().removeClass("l-box-dateeditor-selected")):b.currentDate.year==b.now.year&&b.currentDate.month==b.now.month&&i+1==b.now.date?((0==e||6==e)&&a(f).addClass("l-box-dateeditor-holiday"),a(f).addClass("l-box-dateeditor-today")):0>i?(j=h+j,a(f).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):i>g-1?(j-=g,a(f).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):0==e||6==e?a(f).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected"):f.className="",a(f).html(j)})})},updateSelectBoxPosition:function(){var b=this,c=this.options;c.absolute?b.dateeditor.css({left:b.text.offset().left,top:b.text.offset().top+1+b.text.outerHeight()}):b.text.offset().top+4>b.dateeditor.height()&&b.text.offset().top+b.dateeditor.height()+textHeight+4-a(window).scrollTop()>a(window).height()?(b.dateeditor.css("marginTop",-1*(b.dateeditor.height()+textHeight+5)),b.showOnTop=!0):b.showOnTop=!1},toggleDateEditor:function(a){var b=this;this.options,b.text.height(),b.editorToggling=!0,a?b.dateeditor.hide("fast",function(){b.editorToggling=!1}):(b.updateSelectBoxPosition(),b.dateeditor.slideDown("fast",function(){b.editorToggling=!1}))},showDate:function(){var c,a=this,b=this.options;this.selectedDate&&(c=a.selectedDate.year+"/"+a.selectedDate.month+"/"+a.selectedDate.date,this.currentDate.hour=parseInt(a.toolbar.time.hour.html(),10),this.currentDate.minute=parseInt(a.toolbar.time.minute.html(),10),b.showTime&&(c+=" "+this.currentDate.hour+":"+this.currentDate.minute),this.inputText.val(c),this.inputText.trigger("change").focus())},isDateTime:function(a){var d,e;return this.options,d=a.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/),null==d?!1:(e=new Date(d[1],d[3]-1,d[4]),"NaN"==e?!1:e.getFullYear()==d[1]&&e.getMonth()+1==d[3]&&e.getDate()==d[4])},isLongDateTime:function(a){var d,e,f;return this.options,d=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/,e=a.match(d),null==e?!1:(f=new Date(e[1],e[3]-1,e[4],e[5],e[6]),"NaN"==f?!1:f.getFullYear()==e[1]&&f.getMonth()+1==e[3]&&f.getDate()==e[4]&&f.getHours()==e[5]&&f.getMinutes()==e[6])},getFormatDate:function(a){var d,e,f,c=this.options;if("NaN"==a)return null;d=c.format,e={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()},/(y+)/.test(d)&&(d=d.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(f in e)new RegExp("("+f+")").test(d)&&(d=d.replace(RegExp.$1,1==RegExp.$1.length?e[f]:("00"+e[f]).substr((""+e[f]).length)));return d},onTextChange:function(){var e,b=this,c=this.options,d=b.inputText.val();return""==d?(b.selectedDate=null,!0):(c.showTime||b.isDateTime(d)?c.showTime&&!b.isLongDateTime(d)?b.usedDate?b.inputText.val(b.getFormatDate(b.usedDate)):b.inputText.val(""):(d=d.replace(/-/g,"/"),e=b.getFormatDate(new Date(d)),null==e&&(b.usedDate?b.inputText.val(b.getFormatDate(b.usedDate)):b.inputText.val("")),b.usedDate=new Date(d),b.selectedDate={year:b.usedDate.getFullYear(),month:b.usedDate.getMonth()+1,day:b.usedDate.getDay(),date:b.usedDate.getDate(),hour:b.usedDate.getHours(),minute:b.usedDate.getMinutes()},b.currentDate={year:b.usedDate.getFullYear(),month:b.usedDate.getMonth()+1,day:b.usedDate.getDay(),date:b.usedDate.getDate(),hour:b.usedDate.getHours(),minute:b.usedDate.getMinutes()},b.inputText.val(e),b.trigger("changeDate",[e]),a(b.dateeditor).is(":visible")&&b.bulidContent()):b.usedDate?b.inputText.val(b.getFormatDate(b.usedDate)):b.inputText.val(""),void 0)},_setHeight:function(a){var b=this;a>4&&(b.text.css({height:a}),b.inputText.css({height:a}),b.textwrapper.css({height:a}))},_setWidth:function(a){var b=this;a>20&&(b.text.css({width:a}),b.inputText.css({width:a-20}),b.textwrapper.css({width:a}))},_setValue:function(a){var b=this;a||b.inputText.val(""),"string"==typeof a?b.inputText.val(a):"object"==typeof a&&a instanceof Date&&(b.inputText.val(b.getFormatDate(a)),b.onTextChange())},_getValue:function(){return this.usedDate},setEnabled:function(){var b=this.options;this.inputText.removeAttr("readonly"),this.text.removeClass("l-text-disabled"),b.disabled=!1},setDisabled:function(){var b=this.options;this.inputText.attr("readonly","readonly"),this.text.addClass("l-text-disabled"),b.disabled=!0}})}(jQuery),function(a){var b=a.ligerui;a(".l-dialog-btn").live("mouseover",function(){a(this).addClass("l-dialog-btn-over")}).live("mouseout",function(){a(this).removeClass("l-dialog-btn-over")}),a(".l-dialog-tc .l-dialog-close").live("mouseover",function(){a(this).addClass("l-dialog-close-over")}).live("mouseout",function(){a(this).removeClass("l-dialog-close-over")}),a.ligerDialog=function(){return b.run.call(null,"ligerDialog",arguments,{isStatic:!0})},a.ligerui.DialogImagePath="../../lib/ligerUI/skins/Aqua/images/win/",a.ligerDefaults.Dialog={cls:null,id:null,buttons:null,isDrag:!0,width:280,height:null,content:"",target:null,url:null,load:!1,onLoaded:null,type:"none",left:null,top:null,modal:!0,name:null,isResize:!1,allowClose:!0,opener:null,timeParmName:null,closeWhenEnter:null,isHidden:!0,show:!0,title:"提示",showMax:!1,showToggle:!1,showMin:!1,slide:a.browser.msie?!1:!0,fixedType:null,showType:null},a.ligerDefaults.DialogString={titleMessage:"提示",ok:"确定",yes:"是",no:"否",cancel:"取消",waittingMessage:"正在等待中,请稍候..."},a.ligerMethos.Dialog=a.ligerMethos.Dialog||{},b.controls.Dialog=function(a){b.controls.Dialog.base.constructor.call(this,null,a)},b.controls.Dialog.ligerExtend(b.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return a.ligerMethos.Dialog},_render:function(){var e,f,g,h,i,c=this,d=this.options;c.set(d,!0),e=a('<div class="l-dialog"><table class="l-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="l-dialog-tl"></td><td class="l-dialog-tc"><div class="l-dialog-tc-inner"><div class="l-dialog-icon"></div><div class="l-dialog-title"></div><div class="l-dialog-winbtns"><div class="l-dialog-winbtn l-dialog-close"></div></div></div></td><td class="l-dialog-tr"></td></tr><tr><td class="l-dialog-cl"></td><td class="l-dialog-cc"><div class="l-dialog-body"><div class="l-dialog-image"></div> <div class="l-dialog-content"></div><div class="l-dialog-buttons"><div class="l-dialog-buttons-inner"></div></td><td class="l-dialog-cr"></td></tr><tr><td class="l-dialog-bl"></td><td class="l-dialog-bc"></td><td class="l-dialog-br"></td></tr></tbody></table></div>'),a("body").append(e),c.dialog=e,c.element=e[0],c.dialog.body=a(".l-dialog-body:first",c.dialog),c.dialog.header=a(".l-dialog-tc-inner:first",c.dialog),c.dialog.winbtns=a(".l-dialog-winbtns:first",c.dialog.header),c.dialog.buttons=a(".l-dialog-buttons:first",c.dialog),c.dialog.content=a(".l-dialog-content:first",c.dialog),c.set(d,!1),0==d.allowClose&&a(".l-dialog-close",c.dialog).remove(),(d.target||d.url||"none"==d.type)&&(d.type=null,c.dialog.addClass("l-dialog-win")),d.cls&&c.dialog.addClass(d.cls),d.id&&c.dialog.attr("id",d.id),c.mask(),d.isDrag&&c._applyDrag(),d.isResize&&c._applyResize(),d.type?c._setImage():(a(".l-dialog-image",c.dialog).remove(),c.dialog.content.addClass("l-dialog-content-noimage")),d.show||(c.unmask(),c.dialog.hide()),d.target?(c.dialog.content.prepend(d.target),a(d.target).show()):d.url&&(d.timeParmName&&(d.url+=-1==d.url.indexOf("?")?"?":"&",d.url+=d.timeParmName+"="+(new Date).getTime()),d.load?c.dialog.body.load(d.url,function(){c._saveStatus(),c.trigger("loaded")}):(c.jiframe=a("<iframe frameborder='0'></iframe>"),f=d.name?d.name:"ligerwindow"+(new Date).getTime(),c.jiframe.attr("name",f),c.jiframe.attr("id",f),c.dialog.content.prepend(c.jiframe),c.dialog.content.addClass("l-dialog-content-nopadding"),setTimeout(function(){c.jiframe.attr("src",d.url),c.frame=window.frames[c.jiframe.attr("name")]},0))),d.opener&&(c.dialog.opener=d.opener),d.buttons?a(d.buttons).each(function(b,d){var e=a('<div class="l-dialog-btn"><div class="l-dialog-btn-l"></div><div class="l-dialog-btn-r"></div><div class="l-dialog-btn-inner"></div></div>');a(".l-dialog-btn-inner",e).html(d.text),a(".l-dialog-buttons-inner",c.dialog.buttons).prepend(e),d.width&&e.width(d.width),d.onclick&&e.click(function(){d.onclick(d,c,b)})}):c.dialog.buttons.remove(),a(".l-dialog-buttons-inner",c.dialog.buttons).append("<div class='l-clear'></div>"),a(".l-dialog-title",c.dialog).bind("selectstart",function(){return!1}),c.dialog.click(function(){b.win.setFront(c)}),a(".l-dialog-tc .l-dialog-close",c.dialog).click(function(){d.isHidden?c.hide():c.close()}),d.fixedType||(g=0,h=0,i=d.width||c.dialog.width(),1==d.slide&&(d.slide="fast"),null!=d.left?g=d.left:d.left=g=.5*(a(window).width()-i),null!=d.top?h=d.top:d.top=h=.5*(a(window).height()-c.dialog.height())+a(window).scrollTop()-10,0>g&&(d.left=g=0),0>h&&(d.top=h=0),c.dialog.css({left:g,top:h})),c.show(),a("body").bind("keydown.dialog",function(a){var b=a.which;13==b?c.enter():27==b&&c.esc()}),c._updateBtnsWidth(),c._saveStatus(),c._onReisze()},_borderX:12,_borderY:32,doMax:function(c){var d=this,e=this.options,f=a(window).width(),g=a(window).height(),h=0,i=0;b.win.taskbar&&(g-=b.win.taskbar.outerHeight(),b.win.top&&(i+=b.win.taskbar.outerHeight())),c?(d.dialog.body.animate({width:f-d._borderX},e.slide),d.dialog.animate({left:h,top:i},e.slide),d.dialog.content.animate({height:g-d._borderY-d.dialog.buttons.outerHeight()},e.slide,function(){d._onReisze()})):(d.set({width:f,height:g,left:h,top:i}),d._onReisze())},max:function(){var b=this,c=this.options;b.winmax&&(b.winmax.addClass("l-dialog-recover"),b.doMax(c.slide),b.wintoggle&&(b.wintoggle.hasClass("l-dialog-extend")?b.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-extend-disabled"):b.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-collapse-disabled")),b.resizable&&b.resizable.set({disabled:!0}),b.draggable&&b.draggable.set({disabled:!0}),b.maximum=!0,a(window).bind("resize.dialogmax",function(){b.doMax(!1)}))},recover:function(){var b=this,c=this.options;b.winmax&&(b.winmax.removeClass("l-dialog-recover"),c.slide?(b.dialog.body.animate({width:b._width-b._borderX},c.slide),b.dialog.animate({left:b._left,top:b._top},c.slide),b.dialog.content.animate({height:b._height-b._borderY-b.dialog.buttons.outerHeight()},c.slide,function(){b._onReisze()})):(b.set({width:b._width,height:b._height,left:b._left,top:b._top}),b._onReisze()),b.wintoggle&&b.wintoggle.removeClass("l-dialog-toggle-disabled l-dialog-extend-disabled l-dialog-collapse-disabled"),a(window).unbind("resize.dialogmax")),this.resizable&&this.resizable.set({disabled:!1}),b.draggable&&b.draggable.set({disabled:!1}),b.maximum=!1},min:function(){var a=this,c=this.options,d=b.win.getTask(this);c.slide?(a.dialog.body.animate({width:1},c.slide),d.y=d.offset().top+d.height(),d.x=d.offset().left+d.width()/2,a.dialog.animate({left:d.x,top:d.y},c.slide,function(){a.dialog.hide()})):a.dialog.hide(),a.unmask(),a.minimize=!0,a.actived=!1},active:function(){var e,f,g,h,c=this,d=this.options;c.minimize&&(e=c._width,f=c._height,g=c._left,h=c._top,c.maximum&&(e=a(window).width(),f=a(window).height(),g=h=0,b.win.taskbar&&(f-=b.win.taskbar.outerHeight(),b.win.top&&(h+=b.win.taskbar.outerHeight()))),d.slide?(c.dialog.body.animate({width:e-c._borderX},d.slide),c.dialog.animate({left:g,top:h},d.slide)):c.set({width:e,height:f,left:g,top:h})),c.actived=!0,c.minimize=!1,b.win.setFront(c),c.show()},toggle:function(){var a=this;this.options,a.wintoggle&&(a.wintoggle.hasClass("l-dialog-extend")?a.extend():a.collapse())},collapse:function(){var a=this,b=this.options;a.wintoggle&&(b.slide?a.dialog.content.animate({height:1},b.slide):a.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}))},extend:function(){var c,a=this,b=this.options;a.wintoggle&&(c=a._height-a._borderY-a.dialog.buttons.outerHeight(),b.slide?a.dialog.content.animate({height:c},b.slide):a.dialog.content.height(c),this.resizable&&this.resizable.set({disabled:!1}))},_updateBtnsWidth:function(){var b=this,c=a(">div",b.dialog.winbtns).length;b.dialog.winbtns.width(22*c)},_setLeft:function(a){this.dialog&&null!=a&&this.dialog.css({left:a})},_setTop:function(a){this.dialog&&null!=a&&this.dialog.css({top:a})},_setWidth:function(a){this.dialog&&a>=this._borderX&&this.dialog.body.width(a-this._borderX)},_setHeight:function(a){var d,b=this;this.options,this.dialog&&a>=this._borderY&&(d=a-this._borderY-b.dialog.buttons.outerHeight(),b.dialog.content.height(d))},_setShowMax:function(b){var c=this;this.options,b?c.winmax||(c.winmax=a('<div class="l-dialog-winbtn l-dialog-max"></div>').appendTo(c.dialog.winbtns).hover(function(){a(this).hasClass("l-dialog-recover")?a(this).addClass("l-dialog-recover-over"):a(this).addClass("l-dialog-max-over")},function(){a(this).removeClass("l-dialog-max-over l-dialog-recover-over")}).click(function(){a(this).hasClass("l-dialog-recover")?c.recover():c.max()})):c.winmax&&(c.winmax.remove(),c.winmax=null),c._updateBtnsWidth()},_setShowMin:function(c){var d=this;this.options,c?d.winmin||(d.winmin=a('<div class="l-dialog-winbtn l-dialog-min"></div>').appendTo(d.dialog.winbtns).hover(function(){a(this).addClass("l-dialog-min-over")},function(){a(this).removeClass("l-dialog-min-over")}).click(function(){d.min()}),b.win.addTask(d)):d.winmin&&(d.winmin.remove(),d.winmin=null),d._updateBtnsWidth()},_setShowToggle:function(b){var c=this;this.options,b?c.wintoggle||(c.wintoggle=a('<div class="l-dialog-winbtn l-dialog-collapse"></div>').appendTo(c.dialog.winbtns).hover(function(){a(this).hasClass("l-dialog-toggle-disabled")||(a(this).hasClass("l-dialog-extend")?a(this).addClass("l-dialog-extend-over"):a(this).addClass("l-dialog-collapse-over"))},function(){a(this).removeClass("l-dialog-extend-over l-dialog-collapse-over")}).click(function(){if(!a(this).hasClass("l-dialog-toggle-disabled"))if(c.wintoggle.hasClass("l-dialog-extend")){if(0==c.trigger("extend"))return;c.wintoggle.removeClass("l-dialog-extend"),c.extend(),c.trigger("extended")}else{if(0==c.trigger("collapse"))return;c.wintoggle.addClass("l-dialog-extend"),c.collapse(),c.trigger("collapseed")}})):c.wintoggle&&(c.wintoggle.remove(),c.wintoggle=null)},enter:function(){var c,a=this,b=this.options;void 0!=b.closeWhenEnter?c=b.closeWhenEnter:("warn"==b.type||"error"==b.type||"success"==b.type||"question"==b.type)&&(c=!0),c&&a.close()},esc:function(){},_removeDialog:function(){var a=this,b=this.options;b.showType&&b.fixedType?a.dialog.animate({bottom:-1*b.height},function(){a.dialog.remove()}):a.dialog.remove()},close:function(){var c=this;this.options,b.win.removeTask(this),c.unmask(),c._removeDialog(),a("body").unbind("keydown.dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(a){var b=this,c=this.options;c.url=a,c.load?b.dialog.body.html("").load(c.url,function(){b.trigger("loaded")}):b.jiframe&&b.jiframe.attr("src",c.url)},_setContent:function(a){this.dialog.content.html(a)},_setTitle:function(b){var c=this;this.options,b&&a(".l-dialog-title",c.dialog).html(b)},_hideDialog:function(){var a=this,b=this.options;b.showType&&b.fixedType?a.dialog.animate({bottom:-1*b.height},function(){a.dialog.hide()}):a.dialog.hide()},hidden:function(){var a=this;b.win.removeTask(a),a.dialog.hide(),a.unmask()},show:function(){var b=this,c=this.options;b.mask(),c.fixedType?c.showType?(b.dialog.css({bottom:-1*c.height}).addClass("l-dialog-fixed"),b.dialog.show().animate({bottom:0})):b.dialog.show().css({bottom:0}):b.dialog.show(),a.ligerui.win.setFront.ligerDefer(a.ligerui.win,100,[b])},setUrl:function(a){this._setUrl(a)},_saveStatus:function(){var b,c,a=this;
a._width=a.dialog.body.width(),a._height=a.dialog.body.height(),b=0,c=0,isNaN(parseInt(a.dialog.css("top")))||(b=parseInt(a.dialog.css("top"))),isNaN(parseInt(a.dialog.css("left")))||(c=parseInt(a.dialog.css("left"))),a._top=b,a._left=c},_applyDrag:function(){var c=this,d=this.options;a.fn.ligerDrag&&(c.draggable=c.dialog.ligerDrag({handler:".l-dialog-title",animate:!1,onStartDrag:function(){b.win.setFront(c)},onStopDrag:function(){var e,f;d.target&&(e=b.find(a.ligerui.controls.DateEditor),f=b.find(a.ligerui.controls.ComboBox),a(a.merge(e,f)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})),c._saveStatus()}}))},_onReisze:function(){var d,e,f,b=this,c=this.options;if(c.target){if(d=a(c.target).liger(),d||(d=a(c.target).find(":first").liger()),!d)return;e=b.dialog.content.height(),f=b.dialog.content.width(),d.trigger("resize",[{width:f,height:e}])}},_applyResize:function(){var b=this;this.options,a.fn.ligerResizable&&(b.resizable=b.dialog.ligerResizable({onStopResize:function(a){var d=0,e=0;return isNaN(parseInt(b.dialog.css("top")))||(d=parseInt(b.dialog.css("top"))),isNaN(parseInt(b.dialog.css("left")))||(e=parseInt(b.dialog.css("left"))),a.diffLeft&&b.set({left:e+a.diffLeft}),a.diffTop&&b.set({top:d+a.diffTop}),a.newWidth&&(b.set({width:a.newWidth}),b.dialog.body.css({width:a.newWidth-b._borderX})),a.newHeight&&b.set({height:a.newHeight}),b._onReisze(),b._saveStatus(),!1},animate:!1}))},_setImage:function(){var b=this,c=this.options;c.type&&("success"==c.type||"donne"==c.type||"ok"==c.type?(a(".l-dialog-image",b.dialog).addClass("l-dialog-image-donne").show(),b.dialog.content.css({paddingLeft:64,paddingBottom:30})):"error"==c.type?(a(".l-dialog-image",b.dialog).addClass("l-dialog-image-error").show(),b.dialog.content.css({paddingLeft:64,paddingBottom:30})):"warn"==c.type?(a(".l-dialog-image",b.dialog).addClass("l-dialog-image-warn").show(),b.dialog.content.css({paddingLeft:64,paddingBottom:30})):"question"==c.type&&(a(".l-dialog-image",b.dialog).addClass("l-dialog-image-question").show(),b.dialog.content.css({paddingLeft:64,paddingBottom:40})))}}),b.controls.Dialog.prototype.hide=b.controls.Dialog.prototype.hidden,a.ligerDialog.open=function(b){return a.ligerDialog(b)},a.ligerDialog.close=function(){var c,d,a=b.find(b.controls.Dialog.prototype.__getType());for(c in a)d=a[c],d.destroy.ligerDefer(d,5);b.win.unmask()},a.ligerDialog.show=function(c){var e,d=b.find(b.controls.Dialog.prototype.__getType());if(d.length)for(e in d)return d[e].show(),void 0;return a.ligerDialog(c)},a.ligerDialog.hide=function(){var c,d,a=b.find(b.controls.Dialog.prototype.__getType());for(c in a)d=a[c],d.hide()},a.ligerDialog.tip=function(b){return b=a.extend({showType:"slide",width:240,modal:!1,height:100},b||{}),a.extend(b,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),a.ligerDialog.open(b)},a.ligerDialog.alert=function(b,c,d,e){b=b||"","function"==typeof c?(e=c,d=null):"function"==typeof d&&(e=d);var f=function(a,b,c){b.close(),e&&e(a,b,c)};return p={content:b,buttons:[{text:a.ligerDefaults.DialogString.ok,onclick:f}]},"string"==typeof c&&""!=c&&(p.title=c),"string"==typeof d&&""!=d&&(p.type=d),a.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),a.ligerDialog(p)},a.ligerDialog.confirm=function(b,c,d){"function"==typeof c&&(d=c,type=null);var e=function(a,b){b.close(),d&&d("ok"==a.type)};return p={type:"question",content:b,buttons:[{text:a.ligerDefaults.DialogString.yes,onclick:e,type:"ok"},{text:a.ligerDefaults.DialogString.no,onclick:e,type:"no"}]},"string"==typeof c&&""!=c&&(p.title=c),a.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),a.ligerDialog(p)},a.ligerDialog.warning=function(b,c,d){"function"==typeof c&&(d=c,type=null);var e=function(a,b){b.close(),d&&d(a.type)};return p={type:"question",content:b,buttons:[{text:a.ligerDefaults.DialogString.yes,onclick:e,type:"yes"},{text:a.ligerDefaults.DialogString.no,onclick:e,type:"no"},{text:a.ligerDefaults.DialogString.cancel,onclick:e,type:"cancel"}]},"string"==typeof c&&""!=c&&(p.title=c),a.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),a.ligerDialog(p)},a.ligerDialog.waitting=function(b){return b=b||a.ligerDefaults.Dialog.waittingMessage,a.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+b+"</div>",allowClose:!1})},a.ligerDialog.closeWaitting=function(){var c,d,a=b.find(b.controls.Dialog);for(c in a)d=a[c],d.dialog.hasClass("l-dialog-waittingdialog")&&d.close()},a.ligerDialog.success=function(b,c,d){return a.ligerDialog.alert(b,c,"success",d)},a.ligerDialog.error=function(b,c,d){return a.ligerDialog.alert(b,c,"error",d)},a.ligerDialog.warn=function(b,c,d){return a.ligerDialog.alert(b,c,"warn",d)},a.ligerDialog.question=function(b,c){return a.ligerDialog.alert(b,c,"question")},a.ligerDialog.prompt=function(b,c,d,e){var g,f=a('<input type="text" class="l-dialog-inputtext"/>');return"function"==typeof d&&(e=d),"function"==typeof c?e=c:"boolean"==typeof c&&(d=c),"boolean"==typeof d&&d&&(f=a('<textarea class="l-dialog-textarea"></textarea>')),("string"==typeof c||"int"==typeof c)&&f.val(c),g=function(a,b){b.close(),e&&e("yes"==a.type,f.val())},p={title:b,target:f,width:320,buttons:[{text:a.ligerDefaults.DialogString.ok,onclick:g,type:"yes"},{text:a.ligerDefaults.DialogString.cancel,onclick:g,type:"cancel"}]},a.ligerDialog(p)}}(jQuery),function(a){var b=a.ligerui;a.fn.ligerDrag=function(){return b.run.call(this,"ligerDrag",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},a.fn.ligerGetDragManager=function(){return b.run.call(this,"ligerGetDragManager",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},a.ligerDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null},b.controls.Drag=function(a){b.controls.Drag.base.constructor.call(this,null,a)},b.controls.Drag.ligerExtend(b.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var a=this,b=this.options;this.set(b),a.cursor="move",a.handler.css("cursor",a.cursor),a.handler.bind("mousedown.drag",function(c){b.disabled||2!=c.button&&a._start.call(a,c)}).bind("mousemove.drag",function(){b.disabled||a.handler.css("cursor",a.cursor)})},_rendered:function(){this.options.target.ligeruidragid=this.id},_start:function(c){var d=this,e=this.options;if(!d.reverting&&!e.disabled){if(d.current={target:d.target,left:d.target.offset().left,top:d.target.offset().top,startX:c.pageX||c.screenX,startY:c.pageY||c.clientY},0==d.trigger("startDrag",[d.current,c]))return!1;if(d.cursor="move",d._createProxy(e.proxy,c),e.proxy&&!d.proxy)return!1;(d.proxy||d.handler).css("cursor",d.cursor),a(document).bind("selectstart.drag",function(){return!1}),a(document).bind("mousemove.drag",function(){d._drag.apply(d,arguments)}),b.draggable.dragging=!0,a(document).bind("mouseup.drag",function(){b.draggable.dragging=!1,d._stop.apply(d,arguments)})}},_drag:function(b){var e,f,c=this;this.options,c.current&&(e=b.pageX||b.screenX,f=b.pageY||b.screenY,c.current.diffX=e-c.current.startX,c.current.diffY=f-c.current.startY,(c.proxy||c.handler).css("cursor",c.cursor),c.receive&&c.receive.each(function(d,g){var h=a(g),i=h.offset();e>i.left&&e<i.left+h.width()&&f>i.top&&f<i.top+h.height()?c.receiveEntered[d]?c.trigger("dragOver",[g,c.proxy||c.target,b]):(c.receiveEntered[d]=!0,c.trigger("dragEnter",[g,c.proxy||c.target,b])):c.receiveEntered[d]&&(c.receiveEntered[d]=!1,c.trigger("dragLeave",[g,c.proxy||c.target,b]))}),c.hasBind("drag")?0!=c.trigger("drag",[c.current,b])?c._applyDrag():c._removeProxy():c._applyDrag())},_stop:function(b){var c=this,d=this.options;a(document).unbind("mousemove.drag"),a(document).unbind("mouseup.drag"),a(document).unbind("selectstart.drag"),c.receive&&c.receive.each(function(a,d){c.receiveEntered[a]&&c.trigger("drop",[d,c.proxy||c.target,b])}),c.proxy&&(d.revert?c.hasBind("revert")?0!=c.trigger("revert",[c.current,b])?c._revert(b):c._removeProxy():c._revert(b):(c._applyDrag(c.target),c._removeProxy())),c.cursor="move",c.trigger("stopDrag",[c.current,b]),c.current=null,c.handler.css("cursor",c.cursor)},_revert:function(a){var b=this;b.reverting=!0,b.proxy.animate({left:b.current.left,top:b.current.top},function(){b.reverting=!1,b._removeProxy(),b.trigger("endRevert",[b.current,a]),b.current=null})},_applyDrag:function(a){var d,e,f,b=this,c=this.options;a=a||b.proxy||b.target,d={},e=!1,f=a==b.target,b.current.diffX&&(d.left=f||null==c.proxyX?b.current.left+b.current.diffX:b.current.startX+c.proxyX+b.current.diffX,e=!0),b.current.diffY&&(d.top=f||null==c.proxyY?b.current.top+b.current.diffY:b.current.startY+c.proxyY+b.current.diffY,e=!0),a==b.target&&b.proxy&&c.animate?(b.reverting=!0,a.animate(d,function(){b.reverting=!1})):a.css(d)},_setReceive:function(b){this.receiveEntered={},b&&(this.receive="string"==typeof b?a(b):b)},_setHandler:function(b){var c=this,d=this.options;c.handler=b?"string"==typeof b?a(b,d.target):b:a(d.target)},_setTarget:function(b){this.target=a(b)},_setCursor:function(a){this.cursor=a,(this.proxy||this.handler).css("cursor",a)},_createProxy:function(b,c){if(b){var d=this,e=this.options;"function"==typeof b?d.proxy=b.call(this.options.target,d,c):"clone"==b?(d.proxy=d.target.clone().css("position","absolute"),d.proxy.appendTo("body")):(d.proxy=a("<div class='l-draggable'></div>"),d.proxy.width(d.target.width()).height(d.target.height()),d.proxy.attr("dragid",d.id).appendTo("body")),d.proxy.css({left:null==e.proxyX?d.current.left:d.current.startX+e.proxyX,top:null==e.proxyY?d.current.top:d.current.startY+e.proxyY}).show()}},_removeProxy:function(){var a=this;a.proxy&&(a.proxy.remove(),a.proxy=null)}})}(jQuery),function(a){a.fn.ligerEasyTab=function(){return a.ligerui.run.call(this,"ligerEasyTab",arguments)},a.fn.ligerGetEasyTabManager=function(){return a.ligerui.run.call(this,"ligerGetEasyTabManager",arguments)},a.ligerDefaults.EasyTab={},a.ligerMethos.EasyTab={},a.ligerui.controls.EasyTab=function(b,c){a.ligerui.controls.EasyTab.base.constructor.call(this,b,c)},a.ligerui.controls.EasyTab.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"EasyTab"},__idPrev:function(){return"EasyTab"},_extendMethods:function(){return a.ligerMethos.EasyTab},_render:function(){var d,b=this,c=this.options;b.tabs=a(this.element),b.tabs.addClass("l-easytab"),d=0,a("> div[lselected=true]",b.tabs).length>0&&(d=a("> div",b.tabs).index(a("> div[lselected=true]",b.tabs))),b.tabs.ul=a('<ul class="l-easytab-header"></ul>'),a("> div",b.tabs).each(function(c,e){var f=a("<li><span></span></li>");c==d&&a("span",f).addClass("l-selected"),a(e).attr("title")&&a("span",f).html(a(e).attr("title")),b.tabs.ul.append(f),a(e).hasClass("l-easytab-panelbox")||a(e).addClass("l-easytab-panelbox")}),b.tabs.ul.prependTo(b.tabs),a(".l-easytab-panelbox:eq("+d+")",b.tabs).show().siblings(".l-easytab-panelbox").hide(),a("> ul:first span",b.tabs).click(function(){if(!a(this).hasClass("l-selected")){var c=a("> ul:first span",b.tabs).index(this);a(this).addClass("l-selected").parent().siblings().find("span.l-selected").removeClass("l-selected"),a(".l-easytab-panelbox:eq("+c+")",b.tabs).show().siblings(".l-easytab-panelbox").hide()}}).not("l-selected").hover(function(){a(this).addClass("l-over")},function(){a(this).removeClass("l-over")}),b.set(c)}})}(jQuery),function(a){a.fn.ligerFilter=function(){return a.ligerui.run.call(this,"ligerFilter",arguments)},a.fn.ligerGetFilterManager=function(){return a.ligerui.run.call(this,"ligerGetFilterManager",arguments)},a.ligerDefaults.Filter={fields:[],operators:{},editors:{}},a.ligerDefaults.FilterString={strings:{and:"并且",or:"或者",equal:"相等",notequal:"不相等",startwith:"以..开始",endwith:"以..结束",like:"相似",greater:"大于",greaterorequal:"大于或等于",less:"小于",lessorequal:"小于或等于","in":"包括在...",notin:"不包括...",addgroup:"增加分组",addrule:"增加条件",deletegroup:"删除分组"}},a.ligerDefaults.Filter.operators["string"]=a.ligerDefaults.Filter.operators["text"]=["equal","notequal","startwith","endwith","like","greater","greaterorequal","less","lessorequal","in","notin"],a.ligerDefaults.Filter.operators["number"]=a.ligerDefaults.Filter.operators["int"]=a.ligerDefaults.Filter.operators["float"]=a.ligerDefaults.Filter.operators["date"]=["equal","notequal","greater","greaterorequal","less","lessorequal","in","notin"],a.ligerDefaults.Filter.editors["string"]={create:function(b,c){var d=a("<input type='text'/>");return b.append(d),d.ligerTextBox(c.editor.options||{}),d},setValue:function(a,b){a.val(b)},getValue:function(a){return a.liger("option","value")},destroy:function(a){a.liger("destroy")}},a.ligerDefaults.Filter.editors["date"]={create:function(b,c){var d=a("<input type='text'/>");return b.append(d),d.ligerDateEditor(c.editor.options||{}),d},setValue:function(a,b){a.liger("option","value",b)},getValue:function(a){return a.liger("option","value")},destroy:function(a){a.liger("destroy")}},a.ligerDefaults.Filter.editors["number"]={create:function(b,c){var e,d=a("<input type='text'/>");return b.append(d),e={minValue:c.editor.minValue,maxValue:c.editor.maxValue},d.ligerSpinner(a.extend(e,c.editor.options||{})),d},setValue:function(a,b){a.val(b)},getValue:function(a,b){var c="int"==b.editor.type;return c?parseInt(a.val(),10):parseFloat(a.val())},destroy:function(a){a.liger("destroy")}},a.ligerDefaults.Filter.editors["combobox"]={create:function(b,c){var e,d=a("<input type='text'/>");return b.append(d),e={data:c.data,slide:!1,valueField:c.editor.valueField||c.editor.valueColumnName,textField:c.editor.textField||c.editor.displayColumnName},a.extend(e,c.editor.options||{}),d.ligerComboBox(e),d},setValue:function(a,b){a.liger("option","value",b)},getValue:function(a){return a.liger("option","value")},destroy:function(a){a.liger("destroy")}},a.ligerui.controls.Filter=function(b,c){a.ligerui.controls.Filter.base.constructor.call(this,b,c)},a.ligerui.controls.Filter.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Filter"},__idPrev:function(){return"Filter"},_init:function(){a.ligerui.controls.Filter.base._init.call(this)},_render:function(){var b=this,c=this.options;b.set(c),a("#"+b.id+" .addgroup").live("click",function(){var c=a(this).parent().parent().parent().parent();b.addGroup(c)}),a("#"+b.id+" .deletegroup").live("click",function(){var c=a(this).parent().parent().parent().parent();b.deleteGroup(c)}),a("#"+b.id+" .addrule").live("click",function(){var c=a(this).parent().parent().parent().parent();b.addRule(c)}),a("#"+b.id+" .deleterole").live("click",function(){var c=a(this).parent().parent();b.deleteRule(c)})},_setFields:function(){var c=this;this.options,c.group&&c.group.remove(),c.group=a(c._bulidGroupTableHtml()).appendTo(c.element)},editors:{},editorCounter:0,addGroup:function(b){var e,f,g,h,c=this;return this.options,b=a(b||c.group),e=a(">tbody:first > tr:last",b),f=[],f.push('<tr class="l-filter-rowgroup"><td class="l-filter-cellgroup" colSpan="4">'),g=!b.hasClass("l-filter-group-alt"),f.push(c._bulidGroupTableHtml(g,!0)),f.push("</td></tr>"),h=a(f.join("")),e.before(h),h.find("table:first")},deleteGroup:function(b){var c=this;this.options,a("td.l-filter-value",b).each(function(){var b=a(this).parent();a("select.fieldsel",b).unbind(),c.removeEditor(b)}),a(b).parent().parent().remove()},removeEditor:function(b){var c=this,d=this.options,e=a(b).attr("editortype"),f=a(b).attr("editorid"),g=c.editors[f];g&&d.editors[e].destroy(g),a("td.l-filter-value:first",b).html("")},setData:function(b,c){var f,d=this,e=this.options;c=c||d.group,f=a(">tbody:first > tr:last",c),c.find(">tbody:first > tr").not(f).remove(),a("select:first",f).val(b.op),b.rules&&a(b.rules).each(function(){var f,g,b=d.addRule(c);b.attr("fieldtype",this.type||"string"),a("select.opsel",b).val(this.op),a("select.fieldsel",b).val(this.field).trigger("change"),f=b.attr("editorid"),f&&d.editors[f]?(g=d.getField(this.field),e.editors[g.editor.type].setValue(d.editors[f],this.value,g)):a(":text",b).val(this.value)}),b.groups&&a(b.groups).each(function(){var a=d.addGroup(c);d.setData(this,a)})},addRule:function(b){var e,f,c=this,d=this.options;return b=b||c.group,e=a(">tbody:first > tr:last",b),f=a(c._bulidRuleRowHtml()),e.before(f),d.fields.length&&c.appendEditor(f,d.fields[0]),a("select.fieldsel",f).bind("change",function(){var i,j,b=a(this).parent().next().find("select:first"),d=a(this).val(),e=c.getField(d),g=e.type||"string",h=f.attr("fieldtype");g!=h&&(b.html(c._bulidOpSelectOptionsHtml(g)),f.attr("fieldtype",g)),i=null,j=f.attr("editortype"),c.enabledEditor(e)&&(i=e.editor.type),j&&c.removeEditor(f),i?c.appendEditor(f,e):(f.removeAttr("editortype").removeAttr("editorid"),a("td.l-filter-value:first",f).html('<input type="text" class="valtxt" />'))}),f},deleteRule:function(b){a("select.fieldsel",b).unbind(),this.removeEditor(b),a(b).remove()},appendEditor:function(b,c){var f,g,d=this,e=this.options;d.enabledEditor(c)&&(f=a("td.l-filter-value:first",b).html(""),g=e.editors[c.editor.type],d.editors[++d.editorCounter]=g.create(f,c),b.attr("editortype",c.editor.type).attr("editorid",d.editorCounter))},getData:function(b){var e,c=this;return this.options,b=b||c.group,e={},a("> tbody > tr",b).each(function(b,d){var h,i,j,k,l,m,f=a(d).hasClass("l-filter-rowlast"),g=a(d).hasClass("l-filter-rowgroup");g?(h=a("> td:first > table:first",d),h.length&&(e.groups||(e.groups=[]),e.groups.push(c.getData(h)))):f?e.op=a(".groupopsel:first",d).val():(i=a("select.fieldsel:first",d).val(),j=c.getField(i),k=a(".opsel:first",d).val(),l=c._getRuleValue(d,j),m=a(d).attr("fieldtype")||"string",e.rules||(e.rules=[]),e.rules.push({field:i,op:k,value:l,type:m}))}),e},_getRuleValue:function(b,c){var d=this,e=this.options,f=a(b).attr("editorid"),g=a(b).attr("editortype"),h=d.editors[f];return h?e.editors[g].getValue(h,c):a(".valtxt:first",b).val()},enabledEditor:function(a){var c=this.options;return a.editor&&a.editor.type?a.editor.type in c.editors:!1},getField:function(a){var d,e,f,c=this.options;for(d=0,e=c.fields.length;e>d;d++)if(f=c.fields[d],f.name==a)return f;return null},_bulidGroupTableHtml:function(a,b){var d=this.options,e=[];return e.push('<table cellpadding="0" cellspacing="0" border="0" class="l-filter-group'),a&&e.push(" l-filter-group-alt"),e.push('"><tbody>'),e.push('<tr class="l-filter-rowlast"><td class="l-filter-rowlastcell" align="right" colSpan="4">'),e.push('<select class="groupopsel">'),e.push('<option value="and">'+d.strings["and"]+"</option>"),e.push('<option value="or">'+d.strings["or"]+"</option>"),e.push("</select>"),e.push('<input type="button" value="'+d.strings["addgroup"]+'" class="addgroup">'),e.push('<input type="button" value="'+d.strings["addrule"]+'" class="addrule">'),b&&e.push('<input type="button" value="'+d.strings["deletegroup"]+'" class="deletegroup">'),e.push("</td></tr>"),e.push("</tbody></table>"),e.join("")},_bulidRuleRowHtml:function(a){var d,e,f,g,h,b=this,c=this.options;for(a=a||c.fields,d=[],e=a[0].type||"string",d.push('<tr fieldtype="'+e+'"><td class="l-filter-column">'),d.push('<select class="fieldsel">'),f=0,g=a.length;g>f;f++)h=a[f],d.push('<option value="'+h.name+'"'),0==f&&d.push(" selected "),d.push(">"),d.push(h.display),d.push("</option>");return d.push("</select>"),d.push("</td>"),d.push('<td class="l-filter-op">'),d.push('<select class="opsel">'),d.push(b._bulidOpSelectOptionsHtml(e)),d.push("</select>"),d.push("</td>"),d.push('<td class="l-filter-value">'),d.push('<input type="text" class="valtxt" />'),d.push("</td>"),d.push("<td>"),d.push('<div class="l-icon-cross deleterole"></div>'),d.push("</td>"),d.push("</tr>"),d.join("")},_bulidOpSelectOptionsHtml:function(a){var f,g,h,c=this.options,d=c.operators[a],e=[];for(f=0,g=d.length;g>f;f++)h=d[f],e[e.length]='<option value="'+h+'">',e[e.length]=c.strings[h],e[e.length]="</option>";return e.join("")}})}(jQuery),function(a){a.fn.ligerForm=function(){return a.ligerui.run.call(this,"ligerForm",arguments)},a.ligerDefaults=a.ligerDefaults||{},a.ligerDefaults.Form={inputWidth:180,labelWidth:90,space:40,rightToken:"：",labelAlign:"left",align:"left",fields:[],appendID:!0,prefixID:"",toJSON:a.ligerui.toJSON},a.ligerDefaults.Form.editorBulider=function(a){var e,c=this.options,d={};if(c.inputWidth&&(d.width=c.inputWidth),a.is("select"))a.ligerComboBox(d);else if(a.is(":text")||a.is(":password"))switch(e=a.attr("ltype")){case"select":case"combobox":a.ligerComboBox(d);break;case"spinner":a.ligerSpinner(d);break;case"date":a.ligerDateEditor(d);break;case"float":case"number":d.number=!0,a.ligerTextBox(d);break;case"int":case"digits":d.digits=!0;default:a.ligerTextBox(d)}else a.is(":radio")?a.ligerRadio(d):a.is(":checkbox")?a.ligerCheckBox(d):a.is("textarea")&&a.addClass("l-textarea")},a.ligerui.controls.Form=function(b,c){a.ligerui.controls.Form.base.constructor.call(this,b,c)},a.ligerui.controls.Form.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Form"},__idPrev:function(){return"Form"},_init:function(){a.ligerui.controls.Form.base._init.call(this)},_render:function(){var e,f,b=this,c=this.options,d=a(this.element);c.fields&&c.fields.length&&(d.hasClass("l-form")||d.addClass("l-form"),e=[],f=!1,a(c.fields).each(function(a,c){var g,d=c.name||c.id;if(d){if("hidden"==c.type)return e.push('<input type="hidden" id="'+d+'" name="'+d+'" />'),void 0;g=c.renderToNewLine||c.newline,null==g&&(g=!0),c.merge&&(g=!1),c.group&&(g=!0),g&&(f&&(e.push("</ul>"),f=!1),c.group&&(e.push('<div class="l-group'),c.groupicon&&e.push(" l-group-hasicon"),e.push('">'),c.groupicon&&e.push('<img src="'+c.groupicon+'" />'),e.push("<span>"+c.group+"</span></div>")),e.push("<ul>"),f=!0),e.push(b._buliderLabelContainer(c)),e.push(b._buliderControlContainer(c)),e.push(b._buliderSpaceContainer(c))}}),f&&(e.push("</ul>"),f=!1),d.append(e.join(""))),a("input,select,textarea",d).each(function(){c.editorBulider.call(b,a(this))})},_buliderLabelContainer:function(a){var g,c=this.options,d=a.label||a.display,e=a.labelWidth||a.labelwidth||c.labelWidth,f=a.labelAlign||c.labelAlign;return d&&(d+=c.rightToken),g=[],g.push('<li style="'),e&&g.push("width:"+e+"px;"),f&&g.push("text-align:"+f+";"),g.push('">'),d&&g.push(d),g.push("</li>"),g.join("")},_buliderControlContainer:function(a){var b=this,c=this.options,d=a.width||c.inputWidth,e=a.align||a.textAlign||a.textalign||c.align,f=[];return f.push('<li style="'),d&&f.push("width:"+d+"px;"),e&&f.push("text-align:"+e+";"),f.push('">'),f.push(b._buliderControl(a)),f.push("</li>"),f.join("")},_buliderSpaceContainer:function(a){var c=this.options,d=a.space||a.spaceWidth||c.space,e=[];return e.push('<li style="'),d&&e.push("width:"+d+"px;"),e.push('">'),e.push("</li>"),e.join("")},_buliderControl:function(b){var h,i,d=this.options,e=b.width||d.inputWidth,f=b.name||b.id,g=[];if(b.comboboxName&&"select"==b.type&&g.push('<input type="hidden" id="'+d.prefixID+f+'" name="'+f+'" />'),b.textarea||"textarea"==b.type?g.push("<textarea "):"checkbox"==b.type?g.push('<input type="checkbox" '):"radio"==b.type?g.push('<input type="radio" '):"password"==b.type?g.push('<input type="password" '):g.push('<input type="text" '),b.cssClass&&g.push('class="'+b.cssClass+'" '),b.type&&g.push('ltype="'+b.type+'" '),b.attr)for(h in b.attr)g.push(h+'="'+b.attr[h]+'" ');return b.comboboxName&&"select"==b.type?(g.push('name="'+b.comboboxName+'"'),d.appendID&&g.push(' id="'+d.prefixID+b.comboboxName+'" ')):(g.push('name="'+f+'"'),d.appendID&&g.push(' id="'+f+'" ')),i=a.extend({width:e-2},b.options||{}),g.push(" ligerui='"+d.toJSON(i)+"' "),b.validate&&g.push(" validate='"+d.toJSON(b.validate)+"' "),g.push(" />"),g.join("")}})}(jQuery),function($){var l=$.ligerui;$.fn.ligerGrid=function(){return $.ligerui.run.call(this,"ligerGrid",arguments)},$.fn.ligerGetGridManager=function(){return $.ligerui.run.call(this,"ligerGetGridManager",arguments)},$.ligerDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:!0,url:!1,usePager:!0,page:1,pageSize:15,pageSizeOptions:[15,30,50,100],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",excel:!1,autoResh:!1,showTableToggleBtn:!1,switchPageSizeApplyComboBox:!1,allowAdjustColWidth:!0,checkbox:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,dateFormat:"yyyy-MM-dd",InWindow:!0,statusName:"__status",method:"post",async:!1,fixedCellHeight:!0,heightDiff:0,cssClass:null,root:"rows",record:"total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,allowUnSelectRow:!1,alternatingRow:!0,mouseoverRowCssClass:"l-grid-row-over",enabledSort:!0,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"分组",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detailHeight:"auto",rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:30,headerRowHeight:32,toolbar:null,headerImg:null},$.ligerDefaults.GridString={errorMessage:"发生错误",pageStatMessage:"总{total}条 / 每页{pagesize}条 / {from}-{to}",pageTextMessage:"Page",loadingMessage:"加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",cancelMessage:"取消",saveMessage:"保存",applyMessage:"应用",draggingMessage:"{count}行"},$.ligerMethos.Grid=$.ligerMethos.Grid||{},$.ligerDefaults.Grid.sorters=$.ligerDefaults.Grid.sorters||{},$.ligerDefaults.Grid.formatters=$.ligerDefaults.Grid.formatters||{},$.ligerDefaults.Grid.editors=$.ligerDefaults.Grid.editors||{},$.ligerDefaults.Grid.sorters["date"]=function(a,b){return b>a?-1:a>b?1:0},$.ligerDefaults.Grid.sorters["int"]=function(a,b){return parseInt(a)<parseInt(b)?-1:parseInt(a)>parseInt(b)?1:0},$.ligerDefaults.Grid.sorters["float"]=function(a,b){return parseFloat(a)<parseFloat(b)?-1:parseFloat(a)>parseFloat(b)?1:0},$.ligerDefaults.Grid.sorters["string"]=function(a,b){return a.localeCompare(b)},$.ligerDefaults.Grid.formatters["date"]=function(value,column){function getFormatDate(a,b){var e,f,g;if(this.options,isNaN(a))return null;e=b,f={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()},/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(g in f)new RegExp("("+g+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?f[g]:("00"+f[g]).substr((""+f[g]).length)));return e}if(!value)return"";if("string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),"number"==typeof value&&(value=new Date(value)),value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}return value.toString()},$.ligerDefaults.Grid.editors["date"]={create:function(a,b){var e,f,g,c=b.column,d=$("<input type='text'/>");return a.append(d),e={},f=c.editor.p||c.editor.ext,f&&(g="function"==typeof f?f(b.record,b.rowindex,b.value,c):f,$.extend(e,g)),d.ligerDateEditor(e),d},getValue:function(a){return a.liger("option","value")},setValue:function(a,b){a.liger("option","value",b)},resize:function(a,b,c){a.liger("option","width",b),a.liger("option","height",c)},destroy:function(a){a.liger("destroy")}},$.ligerDefaults.Grid.editors["select"]=$.ligerDefaults.Grid.editors["combobox"]={create:function(a,b){var e,f,g,c=b.column,d=$("<input type='text'/>");return a.append(d),e={data:c.editor.data,slide:!1,valueField:c.editor.valueField||c.editor.valueColumnName,textField:c.editor.textField||c.editor.displayColumnName},f=c.editor.p||c.editor.ext,f&&(g="function"==typeof f?f(b.record,b.rowindex,b.value,c):f,$.extend(e,g)),d.ligerComboBox(e),d},getValue:function(a){return a.liger("option","value")},setValue:function(a,b){a.liger("option","value",b)},resize:function(a,b,c){a.liger("option","width",b),a.liger("option","height",c)},destroy:function(a){a.liger("destroy")}},$.ligerDefaults.Grid.editors["int"]=$.ligerDefaults.Grid.editors["float"]={create:function(a){var c=$("<input type='text' class='l-text-editing'/>");return a.append(c),c.ligerTextBox(),c},getValue:function(a,b){var c=b.column,d="int"==c.editor.type,e=null;return e=d?parseInt(a.val(),10):parseFloat(a.val()),isNaN(e)&&(e=null),e},setValue:function(a,b){a.val(b)},resize:function(a,b,c){a.liger("option","width",b),a.liger("option","height",c)},destroy:function(a){a.liger("destroy")}},$.ligerDefaults.Grid.editors["spinner"]={create:function(a,b){var e,c=b.column,d=$("<input type='text'/>");return a.append(d),d.css({border:"#6E90BE"}),e={type:"float"==c.editor.type?"float":"int"},void 0!=c.editor.minValue&&(e.minValue=c.editor.minValue),void 0!=c.editor.maxValue&&(e.maxValue=c.editor.maxValue),d.ligerSpinner(e),d},getValue:function(a,b){var c=b.column,d="int"==c.editor.type,e=null;return e=d?parseInt(a.val(),10):parseFloat(a.val()),isNaN(e)&&(e=null),e},setValue:function(a,b){a.val(b)},resize:function(a,b,c){a.liger("option","width",b),a.liger("option","height",c)},destroy:function(a){a.liger("destroy")}},$.ligerDefaults.Grid.editors["string"]=$.ligerDefaults.Grid.editors["text"]={create:function(a){var c=$("<input type='text' class='l-text-editing'/>");return a.append(c),c.ligerTextBox(),c},getValue:function(a){return a.val()},setValue:function(a,b){a.val(b)},resize:function(a,b,c){a.liger("option","width",b),a.liger("option","height",c)},destroy:function(a){a.liger("destroy")}},$.ligerDefaults.Grid.editors["chk"]=$.ligerDefaults.Grid.editors["checkbox"]={create:function(a){var c=$("<input type='checkbox' />");return a.append(c),c.ligerCheckBox(),c},getValue:function(a){return a[0].checked?1:0},setValue:function(a,b){a.val(b?!0:!1)},resize:function(a,b,c){a.liger("option","width",b),a.liger("option","height",c)},destroy:function(a){a.liger("destroy")}},$.ligerui.controls.Grid=function(a,b){$.ligerui.controls.Grid.base.constructor.call(this,a,b)},$.ligerui.controls.Grid.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return $.ligerMethos.Grid},_init:function(){$.ligerui.controls.Grid.base._init.call(this);var a=this,b=this.options;b.dataType=b.url?"server":"local","local"==b.dataType&&(b.data=b.data||[],b.dataAction="local"),0==b.isScroll&&(b.height="auto"),b.frozen||(b.frozenCheckbox=!1,b.frozenDetail=!1,b.frozenRownumbers=!1),b.detailToEdit&&(b.enabledEdit=!0,b.clickToEdit=!1,b.detail={height:"auto",onShowDetail:function(c,d){function f(){$(d).parent().parent().remove(),a.collapseDetail(c)}$(d).addClass("l-grid-detailpanel-edit"),a.beginEdit(c,function(){var e=$("<div class='l-editbox'></div>");return e.width(120).height(b.rowHeight+1),e.appendTo(d),e}),$("<div class='l-clear'></div>").appendTo(d),$("<div class='l-button'>"+b.saveMessage+"</div>").appendTo(d).click(function(){a.endEdit(c),f()}),$("<div class='l-button'>"+b.applyMessage+"</div>").appendTo(d).click(function(){a.submitEdit(c)}),$("<div class='l-button'>"+b.cancelMessage+"</div>").appendTo(d).click(function(){a.cancelEdit(c),f()})}}),b.tree&&(b.tree.childrenName=b.tree.childrenName||"children",b.tree.isParent=b.tree.isParent||function(a){var c=b.tree.childrenName in a;
return c},b.tree.isExtend=b.tree.isExtend||function(a){return"isextend"in a&&0==a["isextend"]?!1:!0})},_render:function(){var c,d,e,f,g,h,i,a=this,b=this.options;a.grid=$(a.element),a.grid.addClass("l-panel"),c=[],c.push("        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>"),c.push("                    <div class='l-grid-loading'></div>"),c.push("        <div class='l-panel-topbar'></div>"),c.push("        <div class='l-panel-bwarp' style='min-height:30px'>"),c.push("            <div class='l-panel-body'>"),c.push("                <div class='l-grid' style='min-height:30px'>"),c.push("                    <div class='l-grid-dragging-line'></div>"),c.push("                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),c.push("                  <div class='l-grid1'>"),c.push("                      <div class='l-grid-header l-grid-header1'>"),c.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),c.push("                      </div>"),c.push("                      <div class='l-grid-body l-grid-body1'>"),c.push("                      </div>"),c.push("                  </div>"),c.push("                  <div class='l-grid2'>"),c.push("                      <div class='l-grid-header l-grid-header2'>"),c.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),c.push("                      </div>"),c.push("                      <div class='l-grid-body l-grid-body2 l-scroll'>"),c.push("                      </div>"),c.push("                  </div>"),c.push("                 </div>"),c.push("              </div>"),c.push("         </div>"),c.push("         <div class='l-panel-bar'>"),c.push("            <div class='l-panel-bbar-inner'>"),c.push("                <div class='l-bar-group  l-bar-message'><span class='l-bar-text'></span></div>"),c.push("            <div class='l-bar-group l-bar-selectpagesize'></div>"),c.push("                <div class='l-bar-separator'></div>"),c.push("                <div class='l-bar-group'>"),c.push("                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>"),c.push("                    <div class='l-bar-button l-bar-btnprev'><span></span></div>"),c.push("                </div>"),c.push("                <div class='l-bar-separator'></div>"),c.push("                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>"),c.push("                <div class='l-bar-separator'></div>"),c.push("                <div class='l-bar-group'>"),c.push("                     <div class='l-bar-button l-bar-btnnext'><span></span></div>"),c.push("                    <div class='l-bar-button l-bar-btnlast'><span></span></div>"),c.push("                </div>"),c.push("                <div class='l-bar-separator'></div>"),c.push("                <div class='l-bar-group'>"),c.push("                     <div class='l-bar-button l-bar-btnload'><span></span></div>"),c.push("                </div>"),c.push("                <div class='l-bar-separator'></div>"),c.push("                <div class='l-clear'></div>"),c.push("            </div>"),c.push("         </div>"),a.grid.html(c.join("")),a.header=$(".l-panel-header:first",a.grid),a.body=$(".l-panel-body:first",a.grid),a.toolbar=$(".l-panel-bar:first",a.grid),a.popup=$(".l-grid-popup:first",a.grid),a.gridloading=$(".l-grid-loading:first",a.grid),a.draggingline=$(".l-grid-dragging-line",a.grid),a.topbar=$(".l-panel-topbar:first",a.grid),a.gridview=$(".l-grid:first",a.grid),a.gridview.attr("id",a.id+"grid"),a.gridview1=$(".l-grid1:first",a.gridview),a.gridview2=$(".l-grid2:first",a.gridview),a.gridheader=$(".l-grid-header:first",a.gridview2),a.gridbody=$(".l-grid-body:first",a.gridview2),a.f={},a.f.gridheader=$(".l-grid-header:first",a.gridview1),a.f.gridbody=$(".l-grid-body:first",a.gridview1),a.currentData=null,a.changedCells={},a.editors={},a.editor={editing:!1},"auto"==b.height&&a.bind("SysGridHeightChanged",function(){a.enabledFrozen()&&a.gridview.height(Math.max(a.gridview1.height(),a.gridview2.height()))}),d=$.extend({},b),this._bulid(),this._setColumns(b.columns),delete d["columns"],delete d["data"],delete d["url"],a.set(d),b.delayLoad||(b.url?a.set({url:b.url}):b.data&&a.set({data:b.data})),b.autoResh&&(e=$('<a class="a_autoResh a_reshStart" href="#" title="自动刷新">开启自动刷新</a>'),$(".l-bar-group:last",a.toolbar).append(e),f=function(){a.loadData()},g=$.isNumeric(b.autoResh)?1e3*b.autoResh:3e4,h=setInterval(f,g),e.click(function(){return $(this).toggleClass("a_reshStart"),b.onReload&&0==b.onReload(grid)?!1:a.isDataChanged&&!confirm(b.isContinueByDataChanged)?!1:($(this).hasClass("a_reshStart")&&!h?h=setInterval(f,g):(clearInterval(h),h=null),void 0)})),b.excel&&(i=$('<a class="a_exportExcel fnExport" href="#" title="导出为Excel">导出为Excel</a>'),"string"==typeof b.excel&&(b.excel={url:b.excel}),$.applyIf(b.excel,{displays:[],names:[]}),$.each(b.columns,function(a,c){c.display&&c.name&&c.isHide!==!1&&"_rownum"!=c.name?(b.excel.displays.push(c.display),b.excel.names.push(c.name)):c.columns&&$.each(c.columns,function(a,c){c.display&&c.name&&c.isHide!==!1&&"_rownum"!=c.name&&(b.excel.displays.push(c.display),b.excel.names.push(c.name))})}),i.data("excel",b.excel),$(".l-bar-group:last",a.toolbar).append(i))},_setFrozen:function(a){a?this.grid.addClass("l-frozen"):this.grid.removeClass("l-frozen")},_setCssClass:function(a){this.grid.addClass(a)},_setLoadingMessage:function(a){this.gridloading.html(a)},_setHeight:function(a){var d,b=this,c=this.options;return b.unbind("SysGridHeightChanged"),"auto"==a?(b.bind("SysGridHeightChanged",function(){b.enabledFrozen()&&b.gridview.height(Math.max(b.gridview1.height(),b.gridview2.height()))}),void 0):("string"==typeof a&&a.indexOf("%")>0&&(a=c.inWindow?.01*$(window).height()*parseFloat(a):.01*b.grid.parent().height()*parseFloat(a)),c.title&&(a-=24),c.usePager&&(a-=32),c.totalRender&&(a-=25),c.toolbar&&(a-=b.topbar.outerHeight()),d=c.headerRowHeight*(b._columnMaxLevel-1)+c.headerRowHeight-1,a-=d,a>0&&(b.gridbody.height(a),a>18&&b.f.gridbody.height(a-18),b.gridview.height(a+d)),void 0)},_updateFrozenWidth:function(){var c,a=this;this.options,a.enabledFrozen()&&(a.gridview1.width(a.f.gridtablewidth),c=a.gridview.width()-a.f.gridtablewidth,a.gridview2.css({left:a.f.gridtablewidth-1}),100>c&&(c=600),c>0&&a.gridview2.css({width:c}))},_setWidth:function(){var b=this;this.options,b.enabledFrozen()&&b._onResize()},_setUrl:function(a){this.options.url=a,a?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},_setData:function(){this.loadData(this.options.data)},loadData:function(a){var d,e,f,g,b=this,c=this.options;if(b.loading=!0,d=null,e=!0,"function"==typeof a?(d=a,e=!1):"boolean"==typeof a?e=a:"object"==typeof a&&a&&(e=!1,c.dataType="local",c.data=a),c.newPage||(c.newPage=1),"server"==c.dataAction&&(c.sortOrder||(c.sortOrder="asc")),f=[],c.parms)if(c.parms.length)$(c.parms).each(function(){f.push({name:this.name,value:this.value})});else if("object"==typeof c.parms)for(g in c.parms)f.push({name:g,value:c.parms[g]});"server"==c.dataAction&&(c.usePager&&(f.push({name:c.pageParmName,value:c.newPage}),f.push({name:c.pagesizeParmName,value:c.pageSize})),c.sortName&&(f.push({name:c.sortnameParmName,value:c.sortName}),f.push({name:c.sortorderParmName,value:c.sortOrder}))),$(".l-bar-btnload span",b.toolbar).addClass("l-disabled"),"local"==c.dataType?(b.filteredData=b.data=c.data,d&&(b.filteredData[c.root]=b._searchData(b.filteredData[c.root],d)),b.currentData=c.usePager?b._getCurrentPageData(b.filteredData):b.filteredData,b._showData()):"local"!=c.dataAction||e?b.loadServerData(f,d):b.data&&b.data[c.root]&&(b.filteredData=b.data,d&&(b.filteredData[c.root]=b._searchData(b.filteredData[c.root],d)),b.currentData=b._getCurrentPageData(b.filteredData),b._showData()),c.excel&&$(".fnExport",b.toolbar).data("load-param",f),b.loading=!1},loadServerData:function(a,b){var c=this,d=this.options,e={type:d.method,url:d.url,data:a,async:d.async,dataType:"json",beforeSend:function(){c.hasBind("loading")?c.trigger("loading"):c.toggleLoading(!0)},success:function(a){return c.trigger("success",[a,c]),a&&a[d.root]&&a[d.root].length?(c.data=a,"server"==d.dataAction?c.currentData=c.data:(c.filteredData=c.data,b&&(c.filteredData[d.root]=c._searchData(c.filteredData[d.root],b)),c.currentData=d.usePager?c._getCurrentPageData(c.filteredData):c.filteredData),c._showData.ligerDefer(c,10,[c.currentData]),void 0):(c.currentData=c.data={},c.currentData[d.root]=c.data[d.root]=[],c.currentData[d.record]=c.data[d.record]=0,c._showData(),void 0)},complete:function(){c.trigger("complete",[c]),c.hasBind("loaded")?c.trigger("loaded",[c]):c.toggleLoading.ligerDefer(c,10,[!1])},error:function(a,b,e){c.currentData=c.data={},c.currentData[d.root]=c.data[d.root]=[],c.currentData[d.record]=c.data[d.record]=0,c.toggleLoading.ligerDefer(c,10,[!1]),$(".l-bar-btnload span",c.toolbar).removeClass("l-disabled"),c.trigger("error",[a,b,e])}};d.contentType&&(e.contentType=d.contentType),$.ajax(e)},toggleLoading:function(a){this.gridloading[a?"show":"hide"]()},_createEditor:function(a,b,c,d,e){var f=a.create(b,c);return a.setValue&&a.setValue(f,c.value,c),a.resize&&a.resize(f,d,e,c),f},beginEdit:function(a,b){var e,f,g,h,i,j,k,l,m,n,c=this,d=this.options;if(d.enabledEdit&&!d.clickToEdit&&(e=c.getRow(a),!e._editing&&0!=c.trigger("beginEdit",{record:e,rowindex:e["__index"]}))){for(c.editors[e["__id"]]={},e._editing=!0,c.reRender({rowdata:e}),b=b||function(a,b){var d=c.getCellObj(a,b),e=$(d).html("");return c.setCellEditing(a,b,!0),e},f=0,g=c.columns.length;g>f;f++)h=c.columns[f],h.name&&h.editor&&h.editor.type&&d.editors[h.editor.type]&&(i=d.editors[h.editor.type],j={record:e,value:e[h.name],column:h,rowindex:e["__index"],grid:c},k=b(e,h),l=k.width(),m=k.height(),n=c._createEditor(i,k,j,l,m),c.editors[e["__id"]][h["__id"]]={editor:i,input:n,editParm:j,container:k});c.trigger("afterBeginEdit",{record:e,rowindex:e["__index"]})}},cancelEdit:function(a){var c,d,e,f,b=this;if(void 0==a)for(c in b.editors)b.cancelEdit(c);else{if(d=b.getRow(a),!b.editors[d["__id"]])return;if(0==b.trigger("cancelEdit",{record:d,rowindex:d["__index"]}))return;for(e in b.editors[d["__id"]])f=b.editors[d["__id"]][e],f.editor.destroy&&f.editor.destroy(f.input,f.editParm);delete b.editors[d["__id"]],delete d["_editing"],b.reRender({rowdata:d})}},addEditRow:function(a){this.submitEdit(),a=this.add(a),this.beginEdit(a)},submitEdit:function(a){var d,e,f,g,h,i,b=this;if(this.options,void 0==a)for(d in b.editors)b.submitEdit(d);else{if(e=b.getRow(a),f={},!b.editors[e["__id"]])return;for(g in b.editors[e["__id"]])h=b.editors[e["__id"]][g],i=h.editParm.column,i.name&&(f[i.name]=h.editor.getValue(h.input,h.editParm));if(0==b.trigger("beforeSubmitEdit",{record:e,rowindex:e["__index"],newdata:f}))return!1;b.updateRow(e,f),b.trigger("afterSubmitEdit",{record:e,rowindex:e["__index"],newdata:f})}},endEdit:function(a){var d,e,f,g,b=this;if(this.options,b.editor.editing)d=b.editor,b.trigger("sysEndEdit",[b.editor.editParm]),b.trigger("endEdit",[b.editor.editParm]),d.editor.destroy&&d.editor.destroy(d.input,d.editParm),b.editor.container.remove(),b.reRender({rowdata:b.editor.editParm.record,column:b.editor.editParm.column}),b.trigger("afterEdit",[b.editor.editParm]),b.editor={editing:!1};else if(void 0!=a){if(e=b.getRow(a),!b.editors[e["__id"]])return;if(0==b.submitEdit(a))return!1;for(f in b.editors[e["__id"]])d=b.editors[e["__id"]][f],d.editor.destroy&&d.editor.destroy(d.input,d.editParm);delete b.editors[e["__id"]],delete e["_editing"],b.trigger("afterEdit",{record:e,rowindex:e["__index"]})}else for(g in b.editors)b.endEdit(g)},setWidth:function(a){return this._setWidth(a)},setHeight:function(a){return this._setHeight(a)},enabledCheckbox:function(){return this.options.checkbox?!0:!1},enabledFrozen:function(){var c,d,e,a=this,b=this.options;if(!b.frozen)return!1;if(c=a.columns||[],a.enabledDetail()&&b.frozenDetail||a.enabledCheckbox()&&b.frozenCheckbox||b.frozenRownumbers&&b.rownumbers)return!0;for(d=0,e=c.length;e>d;d++)if(c[d].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return this.enabledDetail()?this.options.detailToEdit?!0:!1:!1},enabledDetail:function(){return this.options.detail&&this.options.detail.onShowDetail?!0:!1},enabledGroup:function(){return this.options.groupColumnName?!0:!1},deleteSelectedRow:function(){var a,b;if(this.selected){for(a in this.selected)b=this.selected[a],b["__id"]in this.records&&this._deleteData.ligerDefer(this,10,[b]);this.reRender.ligerDefer(this,20)}},removeRange:function(a){var b=this;this.options,$.each(a,function(){b._removeData(this)}),b.reRender()},remove:function(a){var b=this;this.options,b.getRow(a),b._removeData(a),b.reRender()},deleteRange:function(a){var b=this;this.options,$.each(a,function(){b._deleteData(this)}),b.reRender()},deleteRow:function(a){var d,b=this;this.options,d=b.getRow(a),d&&(b._deleteData(d),b.reRender(),b.isDataChanged=!0)},_deleteData:function(a){var e,f,g,b=this,c=this.options,d=b.getRow(a);if(d[c.statusName]="delete",c.tree&&(e=b.getChildren(d,!0)))for(f=0,g=e.length;g>f;f++)e[f][c.statusName]="delete";b.deletedRows=b.deletedRows||[],b.deletedRows.push(d),b._removeSelected(d)},updateCell:function(a,b,c){var f,g,h,i,j,k,l,m,d=this,e=this.options;if("string"!=typeof a)"number"==typeof a?(f=d.columns[a],h=d.getRow(c),g=d.getCellObj(h,f)):"object"==typeof a&&a["__id"]?(f=a,h=d.getRow(c),g=d.getCellObj(h,f)):(g=a,k=g.id.split("|"),l=k[k.length-1],f=d._columns[l],m=$(g).parent(),h=h||d.getRow(m[0])),null!=b&&f.name&&(h[f.name]=b,"add"!=h[e.statusName]&&(h[e.statusName]="update"),d.isDataChanged=!0),d.reRender({rowdata:h,column:f});else for(i=0,j=d.columns.length;j>i;i++)d.columns[i].name==a&&d.updateCell(i,b,c)},addRows:function(a,b,c,d){var e=this;this.options,$(a).each(function(){e.addRow(this,b,c,d)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(a){return a in this.records},_addNewRecord:function(a,b,c){var f,g,h,d=this,e=this.options;return d.recordNumber++,a["__id"]=d._createRowid(),a["__previd"]=b,b&&-1!=b?(f=d.records[b],f["__nextid"]&&-1!=f["__nextid"]&&(g=d.records[f["__nextid"]],g&&(g["__previd"]=a["__id"])),f["__nextid"]=a["__id"],a["__index"]=f["__index"]+1):a["__index"]=0,e.tree&&(c&&-1!=c?(h=d.records[c],a["__pid"]=c,a["__level"]=h["__level"]+1):(a["__pid"]=-1,a["__level"]=1),a["__hasChildren"]=a[e.tree.childrenName]?!0:!1),"add"!=a[e.statusName]&&(a[e.statusName]="nochanged"),d.rows[a["__index"]]=a,d.records[a["__id"]]=a,a},_getRows:function(a){function e(a){var b,f,g;if(a&&a.length)for(b=0,f=a.length;f>b;b++)g=a[b],d.push(g),g[c.tree.childrenName]&&e(g[c.tree.childrenName])}var c=this.options,d=[];return e(a),d},_updateGridData:function(){function d(e,f){var g,h,i;if(e&&e.length)for(g=0,h=e.length;h>g;g++)i=e[g],a.formatRecord(i),"delete"!=i[b.statusName]&&(a._addNewRecord(i,c,f),c=i["__id"],i["__hasChildren"]&&d(i[b.tree.childrenName],i["__id"]))}var c,a=this,b=this.options;return a.recordNumber=0,a.rows=[],a.records={},c=-1,d(a.currentData[b.root],-1),a.rows},_moveData:function(a,b,c){var f,g,h,i,j,d=this;this.options,f=d.getRow(a),g=d.getRow(b),j=d._getParentChildren(f),h=$.inArray(f,j),j.splice(h,1),j=d._getParentChildren(g),i=$.inArray(g,j),j.splice(i+(c?1:0),0,f)},move:function(a,b,c){this._moveData(a,b,c),this.reRender()},moveRange:function(a,b,c){for(var d in a)this._moveData(a[d],b,c);this.reRender()},up:function(a){var d,e,f,g,b=this;this.options,d=b.getRow(a),e=b._getParentChildren(d),f=$.inArray(d,e),-1!=f&&0!=f&&(g=b.getSelected(),b.move(d,e[f-1],!1),b.select(g))},down:function(a){var d,e,f,g,b=this;this.options,d=b.getRow(a),e=b._getParentChildren(d),f=$.inArray(d,e),-1!=f&&f!=e.length-1&&(g=b.getSelected(),b.move(d,e[f+1],!0),b.select(g))},addRow:function(a,b,c,d){var g,h,i,e=this,f=this.options;if(a=a||{},e._addData(a,d,b,c),e.reRender(),a[f.statusName]="add",f.tree&&(g=e.getChildren(a,!0)))for(h=0,i=g.length;i>h;h++)g[h][f.statusName]="add";return e.isDataChanged=!0,f.total=f.total?f.total+1:1,f.pageCount=Math.ceil(f.total/f.pageSize),e._buildPager(),e.trigger("SysGridHeightChanged"),e.trigger("afterAddRow",[a]),a},updateRow:function(a,b){var c=this,d=this.options,e=c.getRow(a);return c.isDataChanged=!0,$.extend(e,b||{}),"add"!=e[d.statusName]&&(e[d.statusName]="update"),c.reRender.ligerDefer(c,10,[{rowdata:e}]),e},setCellEditing:function(a,b,c){var f,g,h,i,j,d=this;if(this.options,f=d.getCellObj(a,b),g=c?"addClass":"removeClass",$(f)[g]("l-grid-row-cell-editing"),0!=a["__id"]){if(h=$(d.getRowObj(a["__id"])).prev(),!h.length)return;if(i=d.getRow(h[0]),j=d.getCellObj(i,b),!j)return;$(j)[g]("l-grid-row-cell-editing-topcell")}-1!=b["__previd"]&&null!=b["__previd"]&&(j=$(d.getCellObj(a,b)).prev(),$(j)[g]("l-grid-row-cell-editing-leftcell"))},reRender:function(a){var d,e,f,g,h,i,b=this,c=this.options;if(a=a||{},d=a.rowdata,e=a.column,!(e&&(e.isdetail||e.ischeckbox)||d&&"delete"==d[c.statusName]))if(d&&e)for(f=b.getCellObj(d,e),$(f).html(b._getCellHtml(d,e)),e.issystem||b.setCellEditing(d,e,!1),g=0;g<b.totalNumber;g++)h=document.getElementById(b.id+"|total"+g+"|"+e["__id"]),$("div:first",h).html(b._getTotalCellContent(e,b.groups&&b.groups[g]?b.groups[g]:b.currentData[c.root]));else if(d)$(b.columns).each(function(){b.reRender({rowdata:d,column:this})});else if(e){for(i in b.records)b.reRender({rowdata:b.records[i],column:e});for(g=0;g<b.totalNumber;g++)h=document.getElementById(b.id+"|total"+g+"|"+e["__id"]),$("div:first",h).html(b._getTotalCellContent(e,b.groups&&b.groups[g]?b.groups[g]:b.currentData[c.root]))}else b._showData()},getData:function(a,b){var f,g,c=this,d=this.options,e=[];for(f in c.records)g=$.extend(!0,{},c.records[f]),(g[d.statusName]==a||void 0==a)&&e.push(c.formatRecord(g,b));return e},formatRecord:function(a,b){return delete a["__id"],delete a["__previd"],delete a["__nextid"],delete a["__index"],this.options.tree&&(delete a["__pid"],delete a["__level"],delete a["__hasChildren"]),b&&delete a[this.options.statusName],a},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getColumn:function(a){var d,e,b=this;return this.options,"string"==typeof a?b._isColumnId(a)?b._columns[a]:b.columns[parseInt(a)]:"number"==typeof a?b.columns[a]:"object"==typeof a&&1==a.nodeType?(d=a.id.split("|"),e=d[d.length-1],b._columns[e]):a},getColumnType:function(a){var b=this;for(this.options,i=0;i<b.columns.length;i++)if(b.columns[i].name==a)return b.columns[i].type?b.columns[i].type:"string";return null},isTotalSummary:function(){var c,a=this;for(this.options,c=0;c<a.columns.length;c++)if(a.columns[c].totalSummary)return!0;return!1},getColumns:function(a){var d,e,f,b=this;this.options,d=[];for(e in b._columns)f=b._columns[e],void 0!=a?f["__level"]==a&&d.push(f):f["__leaf"]&&d.push(f);return d},changeSort:function(a,b){var e,c=this,d=this.options;return c.loading?!0:("local"==d.dataAction&&(e=c.getColumnType(a),c.sortedData||(c.sortedData=c.filteredData),d.sortName==a?c.sortedData[d.root].reverse():c.sortedData[d.root].sort(function(b,d){return c._compareData(b,d,a,e)}),c.currentData=d.usePager?c._getCurrentPageData(c.sortedData):c.sortedData,c._showData()),d.sortName=a,d.sortOrder=b,"server"==d.dataAction&&c.loadData(d.where),void 0)},changePage:function(a){var d,b=this,c=this.options;if(b.loading)return!0;if("local"!=c.dataAction&&b.isDataChanged&&!confirm(c.isContinueByDataChanged))return!1;switch(c.pageCount=parseInt($(".pcontrol span",b.toolbar).html()),a){case"first":if(1==c.page)return;c.newPage=1;break;case"prev":if(1==c.page)return;c.page>1&&(c.newPage=parseInt(c.page)-1);break;case"next":if(c.page>=c.pageCount)return;c.newPage=parseInt(c.page)+1;break;case"last":if(c.page>=c.pageCount)return;c.newPage=c.pageCount;break;case"input":d=parseInt($(".pcontrol input",b.toolbar).val()),isNaN(d)&&(d=1),1>d?d=1:d>c.pageCount&&(d=c.pageCount),$(".pcontrol input",b.toolbar).val(d),c.newPage=d}return c.newPage==c.page?!1:(1==c.newPage?($(".l-bar-btnfirst span",b.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",b.toolbar).addClass("l-disabled")):($(".l-bar-btnfirst span",b.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",b.toolbar).removeClass("l-disabled")),c.newPage==c.pageCount?($(".l-bar-btnlast span",b.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",b.toolbar).addClass("l-disabled")):($(".l-bar-btnlast span",b.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",b.toolbar).removeClass("l-disabled")),b.trigger("changePage",[c.newPage]),"server"==c.dataAction?b.loadData(c.where):(b.currentData=b._getCurrentPageData(b.filteredData),b._showData()),void 0)},getSelectedRow:function(){var a,b;for(a in this.selected)if(b=this.selected[a],b["__id"]in this.records)return b;return null},getSelectedRows:function(){var b,c,a=[];for(b in this.selected)c=this.selected[b],c["__id"]in this.records&&a.push(c);return a},getSelectedRowObj:function(){var a,b;for(a in this.selected)if(b=this.selected[a],b["__id"]in this.records)return this.getRowObj(b);return null},getSelectedRowObjs:function(){var b,c,a=[];for(b in this.selected)c=this.selected[b],c["__id"]in this.records&&a.push(this.getRowObj(c));return a},getCellObj:function(a,b){var c=this.getRow(a);return b=this.getColumn(b),document.getElementById(this._getCellDomId(c,b))},getRowObj:function(a,b){var c=this;return this.options,null==a?null:"string"==typeof a?c._isRowId(a)?document.getElementById(c.id+(b?"|1|":"|2|")+a):document.getElementById(c.id+(b?"|1|":"|2|")+c.rows[parseInt(a)]["__id"]):"number"==typeof a?document.getElementById(c.id+(b?"|1|":"|2|")+c.rows[a]["__id"]):"object"==typeof a&&a["__id"]?c.getRowObj(a["__id"],b):a},getRow:function(a){var b=this;return this.options,null==a?null:"string"==typeof a?b._isRowId(a)?b.records[a]:b.rows[parseInt(a)]:"number"==typeof a?b.rows[parseInt(a)]:"object"!=typeof a||1!=a.nodeType||a["__id"]?a:b._getRowByDomId(a.id)},_setColumnVisible:function(a,b){var e,f,g,c=this;if(this.options,b){if(a._hide=!0,document.getElementById(a["__domid"]).style.display="none",-1!=a["__pid"]){for(f=!0,e=this._columns[a["__pid"]],g=0;e&&g<e.columns.length;g++)if(!e.columns[g]._hide){f=!1;break}f&&(e._hide=!0,document.getElementById(e["__domid"]).style.display="none",this._setColumnVisible(e,b))}}else a._hide=!1,document.getElementById(a["__domid"]).style.display="",-1!=a["__pid"]&&(e=c._columns[a["__pid"]],e._hide&&(document.getElementById(e["__domid"]).style.display="",this._setColumnVisible(e,b)))},toggleCol:function(a,b,c){var f,g,h,i,j,k,l,m,d=this;if(this.options,"number"==typeof a)f=d.columns[a];else if("object"==typeof a&&a["__id"])f=a;else if("string"==typeof a){if(!d._isColumnId(a))return $(d.columns).each(function(){this.name==a&&d.toggleCol(this,b,c)}),void 0;f=d._columns[a]}if(f&&(g=f["__leafindex"],h=document.getElementById(f["__domid"]))){h=$(h),i=[];for(j in d.rows)k=d.getCellObj(d.rows[j],f),k&&i.push(k);for(j=0;j<d.totalNumber;j++)l=document.getElementById(d.id+"|total"+j+"|"+f["__id"]),l&&i.push(l);m=f._width,b&&f._hide?(f.frozen?d.f.gridtablewidth+=parseInt(m)+1:d.gridtablewidth+=parseInt(m)+1,d._setColumnVisible(f,!1),$(i).show()):b||f._hide||(f.frozen?d.f.gridtablewidth-=parseInt(m)+1:d.gridtablewidth-=parseInt(m)+1,d._setColumnVisible(f,!0),$(i).hide()),f.frozen?($("div:first",d.f.gridheader).width(d.f.gridtablewidth),$("div:first",d.f.gridbody).width(d.f.gridtablewidth)):($("div:first",d.gridheader).width(d.gridtablewidth+40),$("div:first",d.gridbody).width(d.gridtablewidth)),d._updateFrozenWidth(),c||$(":checkbox[columnindex="+g+"]",d.popup).each(function(){if(this.checked=b,$.fn.ligerCheckBox){var a=$(this).ligerGetCheckBoxManager();a&&a.updateStyle()}})}},setColumnWidth:function(a,b){var e,f,g,h,i,j,k,l,m,c=this,d=this.options;if(b){if(b=parseInt(b,10),"number"==typeof a)e=c.columns[a];else if("object"==typeof a&&a["__id"])e=a;else if("string"==typeof a){if(!c._isColumnId(a))return $(c.columns).each(function(){this.name==a&&c.setColumnWidth(this,b)}),void 0;e=c._columns[a]}if(e&&(f=d.minColumnWidth,e.minWidth&&(f=e.minWidth),b=f>b?f:b,g=b-e._width,0!=c.trigger("beforeChangeColumnWidth",[e,b]))){e._width=b,e.frozen?(c.f.gridtablewidth+=g,$("div:first",c.f.gridheader).width(c.f.gridtablewidth),$("div:first",c.f.gridbody).width(c.f.gridtablewidth)):(c.gridtablewidth+=g,$("div:first",c.gridheader).width(c.gridtablewidth+40),$("div:first",c.gridbody).width(c.gridtablewidth)),$(document.getElementById(e["__domid"])).css("width",b),h=[];for(i in c.records)j=c.getCellObj(c.records[i],e),j&&h.push(j),!c.enabledDetailEdit()&&c.editors[i]&&c.editors[i][e["__id"]]&&(k=c.editors[i][e["__id"]],k.editor.resize&&k.editor.resize(k.input,b,k.container.height(),k.editParm));for(l=0;l<c.totalNumber;l++)m=document.getElementById(c.id+"|total"+l+"|"+e["__id"]),m&&h.push(m);$(h).css("width",b).find("> div.l-grid-row-cell-inner:first").css("width",b-8),c._updateFrozenWidth(),c.trigger("afterChangeColumnWidth",[e,b])}}},changeHeaderText:function(a,b){var e,f,g,c=this,d=this.options;if("number"==typeof a)e=c.columns[a];else if("object"==typeof a&&a["__id"])e=a;else if("string"==typeof a){if(!c._isColumnId(a))return $(c.columns).each(function(){this.name==a&&c.changeHeaderText(this,b)}),void 0;e=c._columns[a]}e&&(f=e["__leafindex"],g=document.getElementById(e["__domid"]),$(".l-grid-hd-cell-text",g).html(b),d.allowHideColumn&&$(":checkbox[columnindex="+f+"]",c.popup).parent().next().html(b))},changeCol:function(a,b,c){var f,g,h,i,j,k,l,d=this,e=this.options;a&&b&&(f=d.getColumn(a),g=d.getColumn(b),f.frozen=g.frozen,j=-1==f["__pid"]?e.columns:d._columns[f["__pid"]].columns,k=-1==g["__pid"]?e.columns:d._columns[g["__pid"]].columns,h=$.inArray(f,j),i=$.inArray(g,k),l=j==k,f["__level"]==g["__level"],k.splice(i+(c?1:0),0,f),l?c?j.splice(h,1):j.splice(h+1,1):j.splice(h,1),d._setColumns(e.columns),d.reRender())},collapseDetail:function(a){var d,e,f,g,h,b=this;if(this.options,d=b.getRow(a))for(e=0,f=b.columns.length;f>e;e++)if(b.columns[e].isdetail)return g=b.getRowObj(d),h=b.getCellObj(d,b.columns[e]),$(g).next("tr.l-grid-detailpanel").hide(),$(".l-grid-row-cell-detailbtn:first",h).removeClass("l-open"),b.trigger("SysGridHeightChanged"),void 0},extendDetail:function(a){var d,e,f,g,h,b=this;if(this.options,d=b.getRow(a))for(e=0,f=b.columns;f>e;e++)if(b.columns[e].isdetail)return g=b.getRowObj(d),h=b.getCellObj(d,b.columns[e]),$(g).next("tr.l-grid-detailpanel").show(),$(".l-grid-row-cell-detailbtn:first",h).addClass("l-open"),b.trigger("SysGridHeightChanged"),void 0},getParent:function(a){var d,b=this,c=this.options;return c.tree?(d=b.getRow(a),d?d["__pid"]in b.records?b.records[d["__pid"]]:null:null):null},getChildren:function(a,b){function g(a){var c,e,h;if(a[d.tree.childrenName])for(c=0,e=a[d.tree.childrenName].length;e>c;c++)h=a[d.tree.childrenName][c],"delete"!=h["__status"]&&(f.push(h),b&&g(h))}var e,f,c=this,d=this.options;return d.tree?(e=c.getRow(a))?(f=[],g(e),f):null:null},isLeaf:function(a){var d,b=this;return this.options,(d=b.getRow(a))?d["__hasChildren"]?!1:!0:void 0},hasChildren:function(a){var c=this.options,d=this.getRow(a);if(d)return d[c.tree.childrenName]&&d[c.tree.childrenName].length?!0:!1},existRecord:function(a){for(var b in this.records)if(this.records[b]==a)return!0;return!1},_removeSelected:function(a){var d,e,f,g,h,b=this,c=this.options;if(c.tree&&(d=b.getChildren(a,!0)))for(e=0,f=d.length;f>e;e++)g=$.inArray(d[e],b.selected),-1!=g&&b.selected.splice(g,1);h=$.inArray(a,b.selected),-1!=h&&b.selected.splice(h,1)},_getParentChildren:function(a){var e,b=this,c=this.options,d=b.getRow(a);return e=c.tree&&b.existRecord(d)&&d["__pid"]in b.records?b.records[d["__pid"]][c.tree.childrenName]:b.currentData[c.root]},_removeData:function(a){var d,e,b=this;this.options,d=b._getParentChildren(a),e=$.inArray(a,d),-1!=e&&d.splice(e,1),b._removeSelected(a)},_addData:function(a,b,c,d){var h,e=this,f=this.options,g=e.currentData[f.root];c?(f.tree&&(b?g=b[f.tree.childrenName]:c["__pid"]in e.records&&(g=e.records[c["__pid"]][f.tree.childrenName])),h=$.inArray(c,g),g.splice(-1==h?-1:h+(d?0:1),0,a)):(f.tree&&b&&(g=b[f.tree.childrenName]),g.push(a))},_appendData:function(a,b,c,d){var e=this,f=this.options;a[f.statusName]="update",e._removeData(a),e._addData(a,b,c,d)},appendRange:function(a,b,c,d){var g,e=this;this.options,g=!1,$.each(a,function(a,f){f["__id"]&&e.existRecord(f)?(e.isLeaf(b)&&e.upgrade(b),e._appendData(f,b,c,d),g=!0):e.appendRow(f,b,c,d)}),g&&e.reRender()},appendRow:function(a,b,c,d){var e=this;return this.options,$.isArray(a)?(e.appendRange(a,b,c,d),void 0):a["__id"]&&e.existRecord(a)?(e._appendData(a,b,c,d),e.reRender(),void 0):(b&&e.isLeaf(b)&&e.upgrade(b),e.addRow(a,c,d?!0:!1,b),void 0)},upgrade:function(a){var e,b=this,c=this.options,d=b.getRow(a);d&&c.tree&&(d[c.tree.childrenName]=d[c.tree.childrenName]||[],d["__hasChildren"]=!0,e=[b.getRowObj(d)],b.enabledFrozen()&&e.push(b.getRowObj(d,!0)),$("> td > div > .l-grid-tree-space:last",e).addClass("l-grid-tree-link l-grid-tree-link-open"))},demotion:function(a){var e,f,g,h,b=this,c=this.options,d=b.getRow(a);if(d&&c.tree){if(e=[b.getRowObj(d)],b.enabledFrozen()&&e.push(b.getRowObj(d,!0)),$("> td > div > .l-grid-tree-space:last",e).removeClass("l-grid-tree-link l-grid-tree-link-open l-grid-tree-link-close"),b.hasChildren(d))for(f=b.getChildren(d),g=0,h=f.length;h>g;g++)b.deleteRow(f[g]);d["__hasChildren"]=!1}},collapse:function(a){var d,e,b=this;this.options,d=b.getRowObj(a),e=$(".l-grid-tree-link",d),e.hasClass("l-grid-tree-link-close")||b.toggle(a)},expand:function(a){var d,e,b=this;this.options,d=b.getRowObj(a),e=$(".l-grid-tree-link",d),e.hasClass("l-grid-tree-link-open")||b.toggle(a)},toggle:function(a){var b,d,e,g,h,i,j,k,l,m,n;if(a)for(b=this,this.options,d=b.getRow(a),e=[b.getRowObj(d)],b.enabledFrozen()&&e.push(b.getRowObj(d,!0)),d["__level"],h=$(".l-grid-tree-link:first",e),i=!0,b.collapsedRows=b.collapsedRows||[],h.hasClass("l-grid-tree-link-close")?(h.removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),g=$.inArray(d,b.collapsedRows),-1!=g&&b.collapsedRows.splice(g,1)):(i=!1,h.addClass("l-grid-tree-link-close").removeClass("l-grid-tree-link-open"),g=$.inArray(d,b.collapsedRows),-1==g&&b.collapsedRows.push(d)),j=b.getChildren(d,!0),k=0,l=j.length;l>k;k++)m=j[k],n=$([b.getRowObj(m["__id"])]),b.enabledFrozen()&&(n=n.add(b.getRowObj(m["__id"],!0))),i?($(".l-grid-tree-link",n).removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),n.show()):($(".l-grid-tree-link",n).removeClass("l-grid-tree-link-open").addClass("l-grid-tree-link-close"),n.hide())},_bulid:function(){var a=this;a._clearGrid(),a._initBuildHeader(),a._initHeight(),a._initFootbar(),a._buildPager(),a._setEvent()},_setColumns:function(){var b=this;b._initColumns(),b._initBuildGridHeader(),b._initBuildPopup()},_initBuildHeader:function(){var a=this,b=this.options;b.title?($(".l-panel-header-text",a.header).html(b.title),b.headerImg&&a.header.append("<img src='"+b.headerImg+"' />").addClass("l-panel-header-hasicon")):a.header.hide(),b.toolbar?$.fn.ligerToolBar&&(a.toolbarManager=a.topbar.ligerToolBar(b.toolbar)):a.topbar.remove()},_createColumnId:function(a){return null!=a.id?a.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(a){return a in this._columns},_initColumns:function(){function c(a,b){for(var c in b)b[c]in a&&delete a[b[c]]}function d(b,e,f,g){var h,i,j,k,l;if(c(b,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),e>a._columnMaxLevel&&(a._columnMaxLevel=e),a._columnCount++,b["__id"]=a._createColumnId(b),b["__domid"]=a.id+"|hcell|"+b["__id"],a._columns[b["__id"]]=b,b.columns&&b.columns.length||(b["__leafindex"]=a._columnLeafCount++),b["__level"]=e,b["__pid"]=f,b["__previd"]=g,!b.columns||!b.columns.length)return b["__leaf"]=!0,1;
for(h=0,i=-1,j=0,k=b.columns.length;k>j;j++)l=b.columns[j],h+=d(l,e+1,b["__id"],i),i=l["__id"];return b["__leafcount"]=h,h}var e,f,g,h,i,j,k,l,a=this,b=this.options;if(a._columns={},a._columnCount=0,a._columnLeafCount=0,a._columnMaxLevel=1,b.columns){for(e=-1,b.rownumbers&&(f=a.enabledGroup()?!1:b.frozen&&b.frozenRownumbers,g={isrownumber:!0,issystem:!0,width:b.rownumbersColWidth,frozen:f},d(g,1,-1,e),e=g["__id"]),a.enabledDetail()&&(h=a.enabledGroup()?!1:b.frozen&&b.frozenDetail,g={isdetail:!0,issystem:!0,width:b.detailColWidth,frozen:h},d(g,1,-1,e),e=g["__id"]),a.enabledCheckbox()&&(i=a.enabledGroup()?!1:b.frozen&&b.frozenCheckbox,g={ischeckbox:!0,issystem:!0,width:b.detailColWidth,frozen:i},d(g,1,-1,e),e=g["__id"]),j=0,k=b.columns.length;k>j;j++)g=b.columns[j],d(g,1,-1,e),e=g["__id"];for(l in a._columns)g=a._columns[l],g["__leafcount"]>1&&(g["__colSpan"]=g["__leafcount"]),g["__leaf"]&&g["__level"]!=a._columnMaxLevel&&(g["__rowSpan"]=a._columnMaxLevel-g["__level"]+1);a.columns=a.getColumns(),$(a.columns).each(function(b,c){c.columnname=c.name,c.columnindex=b,c.type=c.type||"string",c.islast=b==a.columns.length-1,c.isSort=0==c.isSort?!1:!0,c.frozen=c.frozen?!0:!1,c._width=a._getColumnWidth(c),c._hide=c.hide?!0:!1})}},_getColumnWidth:function(a){var d,e,b=this,c=this.options;return a._width?a._width:(a.width?d=a.width:c.columnWidth&&(d=c.columnWidth),d||(e=4,b.enabledCheckbox()&&(e+=c.checkboxColWidth),b.enabledDetail()&&(e+=c.detailColWidth),d=parseInt((b.grid.width()-e)/b.columns.length)),"string"==typeof d&&d.indexOf("%")>0&&(a._width=d=parseInt(.01*parseInt(d)*(b.grid.width()-b.columns.length))),a.minWidth&&d<a.minWidth&&(d=a.minWidth),a.maxWidth&&d>a.maxWidth&&(d=a.maxWidth),a._width=d,d)},_createHeaderCell:function(a){var e,b=this,c=this.options,d=$("<td class='l-grid-hd-cell'><div class='l-grid-hd-cell-inner'><span class='l-grid-hd-cell-text'></span></div></td>");return d.attr("id",a["__domid"]),a["__leaf"]||d.addClass("l-grid-hd-cell-mul"),a.columnindex==b.columns.length-1&&d.addClass("l-grid-hd-cell-last"),a.isrownumber&&(d.addClass("l-grid-hd-cell-rownumbers"),d.html("<div class='l-grid-hd-cell-inner'></div>")),a.ischeckbox&&(d.addClass("l-grid-hd-cell-checkbox"),d.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'></div></div>")),a.isdetail&&(d.addClass("l-grid-hd-cell-detail"),d.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-detail'></div></div>")),a.heightAlign&&$(".l-grid-hd-cell-inner:first",d).css("textAlign",a.heightAlign),a["__colSpan"]&&d.attr("colSpan",a["__colSpan"]),a["__rowSpan"]?(d.attr("rowSpan",a["__rowSpan"]),d.height(c.headerRowHeight*a["__rowSpan"])):d.height(c.headerRowHeight),a["__leaf"]&&(d.width(a["_width"]),d.attr("columnindex",a["__leafindex"])),a._hide&&d.hide(),a.name&&d.attr({columnname:a.name}),e="",e=a.display&&""!=a.display?a.display:a.headerRender?a.headerRender(a):"&nbsp;",$(".l-grid-hd-cell-text:first",d).html(e),!a.issystem&&a["__leaf"]&&a.resizable!==!1&&$.fn.ligerResizable&&(b.colResizable[a["__id"]]=d.ligerResizable({handles:"e",onStartResize:function(a,c){this.proxy.hide(),b.draggingline.css({height:b.body.height(),top:0,left:c.pageX-b.grid.offset().left+parseInt(b.body[0].scrollLeft)}).show()},onResize:function(a,c){b.colresizing=!0,b.draggingline.css({left:c.pageX-b.grid.offset().left+parseInt(b.body[0].scrollLeft)}),$("body").add(d).css("cursor","e-resize")},onStopResize:function(c){return b.colresizing=!1,$("body").add(d).css("cursor","default"),b.draggingline.hide(),b.setColumnWidth(a,a._width+c.diffX),!1}})),d},_initBuildGridHeader:function(){var c,d,e,f,g,h,i,a=this,b=this.options;if(a.gridtablewidth=0,a.f.gridtablewidth=0,a.colResizable){for(c in a.colResizable)a.colResizable[c].destroy();a.colResizable=null}for(a.colResizable={},$("tbody:first",a.gridheader).html(""),$("tbody:first",a.f.gridheader).html(""),d=1;d<=a._columnMaxLevel;d++)e=a.getColumns(d),f=d==a._columnMaxLevel,g=$("<tr class='l-grid-hd-row'></tr>"),h=$("<tr class='l-grid-hd-row'></tr>"),f||g.add(h).addClass("l-grid-hd-mul"),$("tbody:first",a.gridheader).append(g),$("tbody:first",a.f.gridheader).append(h),$(e).each(function(b,c){if((c.frozen?h:g).append(a._createHeaderCell(c)),c["__leaf"]){var d=c["_width"];c.frozen?a.f.gridtablewidth+=(parseInt(d)?parseInt(d):0)+1:a.gridtablewidth+=(parseInt(d)?parseInt(d):0)+1}});a._columnMaxLevel>0&&(i=b.headerRowHeight*a._columnMaxLevel,a.gridheader.add(a.f.gridheader).height(i),b.rownumbers&&b.frozenRownumbers&&a.f.gridheader.find("td:first").height(i)),a._updateFrozenWidth(),$("div:first",a.gridheader).width(a.gridtablewidth+40)},_initBuildPopup:function(){var c,a=this,b=this.options;$(":checkbox",a.popup).unbind(),$("tbody tr",a.popup).remove(),$(a.columns).each(function(b,c){var d,e;c.issystem||0!=c.isAllowHide&&(d='checked="checked"',c._hide&&(d=""),e=c.display,$("tbody",a.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+d+' class="l-checkbox" columnindex="'+b+'"/></td><td class="l-column-right">'+e+"</td></tr>"))}),$.fn.ligerCheckBox&&$("input:checkbox",a.popup).ligerCheckBox({onBeforeClick:function(c){return c.checked?$("input:checked",a.popup).length<=b.minColToggle?!1:!0:!0}}),b.allowHideColumn&&($("tr",a.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")}),c=function(){return $("input:checked",a.popup).length+1<=b.minColToggle?!1:(a.toggleCol(parseInt($(this).attr("columnindex")),this.checked,!0),void 0)},$.fn.ligerCheckBox?$(":checkbox",a.popup).bind("change",c):$(":checkbox",a.popup).bind("click",c))},_initHeight:function(){var a=this,b=this.options;"auto"==b.height&&(a.gridbody.height("auto"),a.f.gridbody.height("auto")),b.width&&a.grid.width(b.width),a._onResize.call(a)},_initFootbar:function(){var c,d,a=this,b=this.options;b.usePager?(c="",d=-1,$(b.pageSizeOptions).each(function(a,e){var f="";b.pageSize==e&&(d=a),c+="<option value='"+e+"' "+f+" >"+e+"</option>"}),$(".l-bar-selectpagesize",a.toolbar).append("<select name='rp'>"+c+"</select>"),-1!=d&&($(".l-bar-selectpagesize select",a.toolbar)[0].selectedIndex=d),b.switchPageSizeApplyComboBox&&$.fn.ligerComboBox&&$(".l-bar-selectpagesize select",a.toolbar).ligerComboBox({onBeforeSelect:function(){return b.url&&a.isDataChanged&&!confirm(b.isContinueByDataChanged)?!1:!0},width:45})):a.toolbar.hide()},_searchData:function(a,b){var e,f;for(this.options,e=new Array,f=0;f<a.length;f++)b(a[f],f)&&(e[e.length]=a[f]);return e},_clearGrid:function(){var c,d,a=this;this.options;for(c in a.rows)d=$(a.getRowObj(a.rows[c])),a.enabledFrozen()&&(d=d.add(a.getRowObj(a.rows[c],!0))),d.unbind();a.gridbody.html(""),a.f.gridbody.html(""),a.recordNumber=0,a.records={},a.rows=[],a.changedCells={},a.selected=[],a.totalNumber=0,a.editorcounter=0},_fillGridBody:function(a,b){var f,g,h,i,j,k,c=this,d=this.options,e=['<div class="l-grid-body-inner"><table class="l-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];if(c.enabledGroup()){f=[],g=[],c.groups=g;for(h in a)i=a[h],j=i[d.groupColumnName],k=$.inArray(j,f),-1==k&&(f.push(j),k=f.length-1,g.push([])),g[k].push(i);$(g).each(function(a,h){1==g.length&&e.push('<tr class="l-grid-grouprow l-grid-grouprow-last l-grid-grouprow-first"'),a==g.length-1?e.push('<tr class="l-grid-grouprow l-grid-grouprow-last"'):0==a?e.push('<tr class="l-grid-grouprow l-grid-grouprow-first"'):e.push('<tr class="l-grid-grouprow"'),e.push(' groupindex"='+a+'" >'),e.push('<td colSpan="'+c.columns.length+'" class="l-grid-grouprow-cell">'),e.push('<span class="l-grid-group-togglebtn">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),d.groupRender?e.push(d.groupRender(f[a],h,d.groupColumnDisplay)):e.push(d.groupColumnDisplay+":"+f[a]),e.push("</td>"),e.push("</tr>"),e.push(c._getHtmlFromData(h,b)),c.isTotalSummary()&&e.push(c._getTotalSummaryHtml(h,"l-grid-totalsummary-group",b))})}else e.push(c._getHtmlFromData(a,b));e.push("</tbody></table></div>"),(b?c.f.gridbody:c.gridbody).html(e.join("")),c.enabledGroup()||c._bulidTotalSummary(b),$("> div:first",c.gridbody).width(c.gridtablewidth),c._onResize()},_showData:function(){var d,e,a=this,b=this.options,c=a.currentData[b.root];if(b.usePager&&("server"==b.dataAction&&a.data&&a.data[b.record]?b.total=a.data[b.record]:a.filteredData&&a.filteredData[b.root]?b.total=a.filteredData[b.root].length:a.data&&a.data[b.root]?b.total=a.data[b.root].length:c&&(b.total=c.length),b.page=b.newPage,b.total||(b.total=0),b.page||(b.page=1),b.pageCount=Math.ceil(b.total/b.pageSize),b.pageCount||(b.pageCount=1),a._buildPager()),$(".l-bar-btnloading:first",a.toolbar).removeClass("l-bar-btnloading"),0!=a.trigger("beforeShowData",[a.currentData])&&(a._clearGrid(),a.isDataChanged=!1,c)){if($(".l-bar-btnload:first span",a.toolbar).removeClass("l-disabled"),a._updateGridData(),a.enabledFrozen()&&a._fillGridBody(a.rows,!0),a._fillGridBody(a.rows,!1),a.trigger("SysGridHeightChanged"),b.totalRender&&($(".l-panel-bar-total",a.element).remove(),$(".l-panel-bar",a.element).before('<div class="l-panel-bar-total">'+b.totalRender(a.data,a.filteredData)+"</div>")),b.mouseoverRowCssClass)for(d in a.rows)e=$(a.getRowObj(a.rows[d])),a.enabledFrozen()&&(e=e.add(a.getRowObj(a.rows[d],!0))),e.bind("mouseover.gridrow",function(){a._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){a._onRowOver(this,!1)});a.gridbody.trigger("scroll.grid"),a.trigger("afterShowData",[a.currentData])}},_getRowDomId:function(a,b){return this.id+"|"+(b?"1":"2")+"|"+a["__id"]},_getCellDomId:function(a,b){return this._getRowDomId(a,b.frozen)+"|"+b["__id"]},_getHtmlFromData:function(a,b){var c,d,e,f,g,h,i;if(!a)return"";c=this,d=this.options,e=[];for(f in a)g=a[f],h=g["__id"],g&&(e.push("<tr"),e.push(' id="'+c._getRowDomId(g,b)+'"'),e.push(' class="l-grid-row'),!b&&c.enabledCheckbox()&&d.isChecked&&d.isChecked(g)?(c.select(g),e.push(" l-selected")):c.isSelected(g)&&e.push(" l-selected"),1==g["__index"]%2&&d.alternatingRow&&e.push(" l-grid-row-alt"),e.push('" '),d.rowAttrRender&&e.push(d.rowAttrRender(g,h)),d.tree&&c.collapsedRows&&c.collapsedRows.length&&(i=function(){for(var a=c.getParent(g);a;){if(-1!=$.inArray(a,c.collapsedRows))return!0;a=c.getParent(a)}return!1},i()&&e.push(' style="display:none;" ')),e.push(">"),$(c.columns).each(function(a,f){if(b==f.frozen){if(e.push("<td"),e.push(' id="'+c._getCellDomId(g,this)+'"'),this.isrownumber)return e.push(' class="l-grid-row-cell l-grid-row-cell-rownumbers" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),d.fixedCellHeight&&e.push(' style = "height:'+d.rowHeight+'px;" '),e.push(">"+(parseInt(g["__index"])+1)+"</div></td>"),void 0;if(this.ischeckbox)return e.push(' class="l-grid-row-cell l-grid-row-cell-checkbox" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),d.fixedCellHeight&&e.push(' style = "height:'+d.rowHeight+'px;" '),e.push('><span class="l-grid-row-cell-btn-checkbox"></span></div></td>'),void 0;if(this.isdetail)return e.push(' class="l-grid-row-cell l-grid-row-cell-detail" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),d.fixedCellHeight&&e.push(' style = "height:'+d.rowHeight+'px;" '),e.push('><span class="l-grid-row-cell-detailbtn"></span></div></td>'),void 0;var i=this._width;e.push(' class="l-grid-row-cell '),c.changedCells[h+"_"+this["__id"]]&&e.push("l-grid-row-cell-edited "),this.islast&&e.push("l-grid-row-cell-last "),e.push('"'),e.push(' style = "'),e.push("width:"+i+"px; "),f._hide&&e.push("display:none;"),e.push(' ">'),e.push(c._getCellHtml(g,f)),e.push("</td>")}}),e.push("</tr>"));return e.join("")},_getCellHtml:function(a,b){var e,f,c=this,d=this.options;return b.isrownumber?'<div class="l-grid-row-cell-inner">'+(parseInt(a["__index"])+1)+"</div>":(e=[],b.editor?e.push('<div class="l-grid-row-cell-inner x-editor"'):e.push('<div class="l-grid-row-cell-inner"'),e.push(' style = "width:'+parseInt(b._width-8)+"px;"),d.fixedCellHeight&&e.push("height:"+d.rowHeight+"px;min-height:"+d.rowHeight+"px; "),b.align&&e.push("text-align:"+b.align+";"),f=c._getCellContent(a,b),e.push('">'+f+"</div>"),e.join(""))},_getCellContent:function(a,b){var d,e,f,g,h;return a&&b?b.isrownumber?parseInt(a["__index"])+1:(a["__id"],d=a["__index"],e=b.name?a[b.name]:null,f=this,g=this.options,h="",b.render?h=b.render.call(f,a,d,e,b):g.formatters[b.type]?h=g.formatters[b.type].call(f,e,b):null!=e&&(h=e.toString()),g.tree&&(null!=g.tree.columnName&&g.tree.columnName==b.name||null!=g.tree.columnId&&g.tree.columnId==b.id)&&(h=f._getTreeCellHtml(h,a)),h||""):""},_getTreeCellHtml:function(a,b){var i,c=b["__level"],d=this,e=this.options,f=-1==$.inArray(b,d.collapsedRows||[]),g=e.tree.isParent(b),h="";for(c=parseInt(c)||1,i=1;c>i;i++)h+="<div class='l-grid-tree-space'></div>";return h+=f&&g?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-open'></div>":g?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-close'></div>":"<div class='l-grid-tree-space'></div>",h+="<span class='l-grid-tree-content'>"+a+"</span>"},_applyEditor:function(a){var l,n,o,p,q,r,s,t,u,v,b=this,c=this.options,d=a,e=d.id.split("|"),f=e[e.length-1],g=b._columns[f],h=$(d).parent(),i=b.getRow(h[0]),j=i["__id"],k=i["__index"];if(g&&g.editor&&(l=g.name,g.columnindex,g.editor.type&&c.editors[g.editor.type])){if(n=i[l],o={record:i,value:n,column:g,rowindex:k},0==b.trigger("beforeEdit",[o]))return!1;p=c.editors[g.editor.type],q=$(d),r=$(d).offset(),q.html(""),b.setCellEditing(i,g,!0),s=$(d).width(),t=$(d).height(),u=$("<div class='l-grid-editor'></div>").appendTo("body"),$.browser.mozilla?u.css({left:r.left,top:r.top}).show():u.css({left:r.left+1,top:r.top+1}).show(),v=b._createEditor(p,u,o,s,t),v.blur(function(){b.endEdit()}),b.editor={editing:!0,editor:p,input:v,editParm:o,container:u},b.unbind("sysEndEdit"),b.bind("sysEndEdit",function(){var a=p.getValue(v,o);a!=n&&($(d).addClass("l-grid-row-cell-edited"),b.changedCells[j+"_"+g["__id"]]=!0,g.editor.onChange&&g.editor.onChange(d,a),o.value=a,b._checkEditAndUpdateCell(o)&&g.editor.onChanged&&g.editor.onChanged(d,a,i,b))})}},_checkEditAndUpdateCell:function(a){var b=this;return this.options,0==b.trigger("beforeSubmitEdit",[a])?!1:(b.updateCell(a.column,a.value,a.record),(a.column.render||b.enabledTotal())&&b.reRender({column:a.column}),b.reRender({rowdata:a.record}),!0)},_getCurrentPageData:function(a){var c=this.options,d={};if(d[c.root]=[],!a||!a[c.root]||!a[c.root].length)return d[c.record]=0,d;for(d[c.record]=a[c.root].length,c.newPage||(c.newPage=1),i=(c.newPage-1)*c.pageSize;i<a[c.root].length&&i<c.newPage*c.pageSize;i++)d[c.root].push(a[c.root][i]);return d},_compareData:function(a,b,c,d){var e=this,f=this.options,g=a[c],h=b[c];return null==g&&null!=h?1:null==g&&null==h?0:null!=g&&null==h?-1:f.sorters[d]?f.sorters[d].call(e,g,h):h>g?-1:g>h?1:0},_getTotalCellContent:function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,c=this;if(this.options,e=[],a.totalSummary){for(f=function(a){for(var b=0;b<p.length;b++)if(p[b].toLowerCase()==a.toLowerCase())return!0;return!1},g=0,h=0,i=0,j=parseFloat(b[0][a.name]),k=parseFloat(b[0][a.name]),l=0;l<b.length;l++)if(m=b[l].__status,"delete"!=m){if(h+=1,n=parseFloat(b[l][a.name]),!n)continue;g+=n,n>j&&(j=n),k>n&&(k=n)}i=1*g/b.length,a.totalSummary.render?(o=a.totalSummary.render({sum:g,count:h,avg:i,min:k,max:j},a,c.data),e.push(o)):a.totalSummary.type&&(p=a.totalSummary.type.split(","),f("sum")&&e.push("<div>Sum="+g.toFixed(2)+"</div>"),f("count")&&e.push("<div>Count="+h+"</div>"),f("max")&&e.push("<div>Max="+j.toFixed(2)+"</div>"),f("min")&&e.push("<div>Min="+k.toFixed(2)+"</div>"),f("avg")&&e.push("<div>Avg="+i.toFixed(2)+"</div>"))}return e.join("")},_getTotalSummaryHtml:function(a,b,c){var f,d=this;return this.options,f=[],b?f.push('<tr class="l-grid-totalsummary '+b+'">'):f.push('<tr class="l-grid-totalsummary">'),$(d.columns).each(function(b,e){if(this.frozen==c){if(this.isrownumber)return f.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-rownumbers" style="width:'+this.width+'px"><div>&nbsp;</div></td>'),void 0;if(this.ischeckbox)return f.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-checkbox" style="width:'+this.width+'px"><div>&nbsp;</div></td>'),void 0;if(this.isdetail)return f.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-detail" style="width:'+this.width+'px"><div>&nbsp;</div></td>'),void 0;f.push('<td class="l-grid-totalsummary-cell'),this.islast&&f.push(" l-grid-totalsummary-cell-last"),f.push('" '),f.push('id="'+d.id+"|total"+d.totalNumber+"|"+e.__id+'" '),f.push('width="'+this._width+'" '),columnname=this.columnname,columnname&&f.push('columnname="'+columnname+'" '),f.push('columnindex="'+b+'" '),f.push('><div class="l-grid-totalsummary-cell-inner"'),e.align&&f.push(' style="text-Align:'+e.align+';"'),f.push(">"),f.push(d._getTotalCellContent(e,a)),f.push("</div></td>")}}),f.push("</tr>"),c||d.totalNumber++,f.join("")},_bulidTotalSummary:function(a){var d,b=this,c=this.options;return b.isTotalSummary()?b.currentData&&0!=b.currentData[c.root].length?(d=$(b._getTotalSummaryHtml(b.currentData[c.root],null,a)),$("tbody:first",a?b.f.gridbody:b.gridbody).append(d),void 0):!1:!1},_buildPager:function(){var c,d,e,a=this,b=this.options;$(".pcontrol input",a.toolbar).val(b.page),b.pageCount||(b.pageCount=1),$(".pcontrol span",a.toolbar).html(b.pageCount),c=parseInt((b.page-1)*b.pageSize)+1,d=parseInt(c)+parseInt(b.pageSize)-1,b.total||(b.total=0),b.total<d&&(d=b.total),b.total||(c=d=0),0>c&&(c=0),0>d&&(d=0),e=b.pageStatMessage,e=e.replace(/{from}/,c),e=e.replace(/{to}/,d),e=e.replace(/{total}/,b.total),e=e.replace(/{pagesize}/,b.pageSize),$(".l-bar-text",a.toolbar).html(e),b.total||$(".l-bar-btnfirst span,.l-bar-btnprev span,.l-bar-btnnext span,.l-bar-btnlast span",a.toolbar).addClass("l-disabled"),1==b.page?($(".l-bar-btnfirst span",a.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",a.toolbar).addClass("l-disabled")):b.page>b.pageCount&&b.pageCount>0&&($(".l-bar-btnfirst span",a.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",a.toolbar).removeClass("l-disabled")),b.page==b.pageCount?($(".l-bar-btnlast span",a.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",a.toolbar).addClass("l-disabled")):b.page<b.pageCount&&b.pageCount>0&&($(".l-bar-btnlast span",a.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",a.toolbar).removeClass("l-disabled"))},_getRowIdByDomId:function(a){var b=a.split("|"),c=b[2];return c},_getRowByDomId:function(a){return this.records[this._getRowIdByDomId(a)]},_getSrcElementByEvent:function(a){var f,g,h,i,j,b=this,c=a.target||a.srcElement,d=$(c).parents().add(c),e=function(a){for(var b=0,c=d.length;c>b;b++)if("string"==typeof a){if($(d[b]).hasClass(a))return d[b]}else if("object"==typeof a&&d[b]==a)return d[b];return null};if(e("l-grid-editor"))return{editing:!0,editor:e("l-grid-editor")};if(-1==d.index(this.element))return{out:!0};if(f=!1,d.hasClass("l-grid-detailpanel")&&b.detailrows)for(g=0,h=b.detailrows.length;h>g;g++)if(-1!=d.index(b.detailrows[g])){f=!0;break}return i={grid:e("l-panel"),indetail:f,frozen:e(b.gridview1[0])?!0:!1,header:e("l-panel-header"),gridheader:e("l-grid-header"),gridbody:e("l-grid-body"),total:e("l-panel-bar-total"),popup:e("l-grid-popup"),toolbar:e("l-panel-bar")},i.gridheader&&(i.hrow=e("l-grid-hd-row"),i.hcell=e("l-grid-hd-cell"),i.hcelltext=e("l-grid-hd-cell-text"),i.checkboxall=e("l-grid-hd-cell-checkbox"),i.hcell&&(j=i.hcell.id.split("|")[2],i.column=b._columns[j])),i.gridbody&&(i.row=e("l-grid-row"),i.cell=e("l-grid-row-cell"),i.checkbox=e("l-grid-row-cell-btn-checkbox"),i.groupbtn=e("l-grid-group-togglebtn"),i.grouprow=e("l-grid-grouprow"),i.detailbtn=e("l-grid-row-cell-detailbtn"),i.detailrow=e("l-grid-detailpanel"),i.totalrow=e("l-grid-totalsummary"),i.totalcell=e("l-grid-totalsummary-cell"),i.rownumberscell=$(i.cell).hasClass("l-grid-row-cell-rownumbers")?i.cell:null,i.detailcell=$(i.cell).hasClass("l-grid-row-cell-detail")?i.cell:null,i.checkboxcell=$(i.cell).hasClass("l-grid-row-cell-checkbox")?i.cell:null,i.treelink=e("l-grid-tree-link"),i.editor=e("l-grid-editor"),i.row&&(i.data=this._getRowByDomId(i.row.id)),i.cell&&(i.editing=$(i.cell).hasClass("l-grid-row-cell-editing")),i.editor&&(i.editing=!0),i.editing&&(i.out=!1)),i.toolbar&&(i.first=e("l-bar-btnfirst"),i.last=e("l-bar-btnlast"),i.next=e("l-bar-btnnext"),i.prev=e("l-bar-btnprev"),i.load=e("l-bar-btnload"),i.button=e("l-bar-button")),i},_setEvent:function(){var a=this,b=this.options;a.grid.bind("mousedown.grid",function(b){a._onMouseDown.call(a,b)}),a.grid.bind("dblclick.grid",function(b){a._onDblClick.call(a,b)}),a.grid.bind("contextmenu.grid",function(b){return a._onContextmenu.call(a,b)}),$(document).bind("mouseup.grid",function(b){a._onMouseUp.call(a,b)}),$(document).bind("click.grid",function(b){a._onClick.call(a,b)}),$(window).bind("resize.grid",function(){a._onResize.call(a)}),$(document).bind("keydown.grid",function(b){b.ctrlKey&&(a.ctrlKey=!0)}),$(document).bind("keyup.grid",function(){delete a.ctrlKey}),a.gridbody.bind("scroll.grid",function(){var b=a.gridbody.scrollLeft(),c=a.gridbody.scrollTop();null!=b&&(a.gridheader[0].scrollLeft=b),null!=c&&(a.f.gridbody[0].scrollTop=c),a.endEdit(),a.trigger("SysGridHeightChanged")}),$("select",a.toolbar).change(function(){return a.isDataChanged&&!confirm(b.isContinueByDataChanged)?!1:(b.newPage=1,b.pageSize=this.value,a.loadData(b.where),void 0)}),$("span.pcontrol :text",a.toolbar).blur(function(){a.changePage("input")}),$("div.l-bar-button",a.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}),$.fn.ligerDrag&&b.colDraggable&&(a.colDroptip=$("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),a.gridheader.add(a.f.gridheader).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(b,c){var e,f,d=a._getSrcElementByEvent(c);return d.hcell&&d.column?(e=$(".l-grid-hd-cell-text:first",d.hcell).html(),f=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body"),f.append(e),f):void 0},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),a.children[this.id]=this},onStartDrag:function(b,c){var d,e;return 2==c.button?!1:a.colresizing?!1:(this.set("cursor","default"),d=a._getSrcElementByEvent(c),!d.hcell||!d.column||d.column.issystem||d.hcelltext?!1:-1!=$(d.hcell).css("cursor").indexOf("resize")?!1:(this.draggingColumn=d.column,a.coldragging=!0,e=a.grid.offset(),this.validRange={top:e.top,bottom:e.top+a.gridheader.height(),left:e.left-10,right:e.left+a.grid.width()+10},void 0))},onDrag:function(c,d){var e,f,g,h,j,k,l,m,n,o,p,q,r,s;if(this.set("cursor","default"),e=this.draggingColumn,!e)return!1;if(a.colresizing)return!1;if(null==a.colDropIn&&(a.colDropIn=-1),f=d.pageX,g=d.pageY,h=!1,a.grid.offset(),j=this.validRange,f<j.left||f>j.right||g>j.bottom||g<j.top)return a.colDropIn=-1,a.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"),void 0;for(k in a._columns)if(l=a._columns[k],e!=l){if(!l.issystem&&(m=l["__level"]==e["__level"],n=m?h?!0:!1:!1,e.frozen!=l.frozen&&(n=l.frozen?!1:!0),-1==a.colDropIn||a.colDropIn==k)){if(o=document.getElementById(l["__domid"]),p=$(o).offset(),q={top:p.top,bottom:p.top+$(o).height(),left:p.left-10,right:p.left+10},n&&(r=$(o).width(),q.left+=r,q.right+=r),f>q.left&&f<q.right&&g>q.top&&g<q.bottom){s=b.headerRowHeight,l["__rowSpan"]&&(s*=l["__rowSpan"]),a.colDroptip.css({left:q.left+5,top:q.top-9,height:s+18}).show(),a.colDropIn=k,a.colDropDir=n?"right":"left",this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}-1!=a.colDropIn&&(a.colDropIn=-1,a.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}else h=!0},onStopDrag:function(){var d=this.draggingColumn;a.coldragging=!1,-1!=a.colDropIn&&(a.changeCol.ligerDefer(a,0,[d,a.colDropIn,"right"==a.colDropDir]),a.colDropIn=-1),a.colDroptip.hide(),this.set("cursor","default")}})),$.fn.ligerDrag&&b.rowDraggable&&(a.rowDroptip=$("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body"),a.gridbody.add(a.f.gridbody).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(c,d){var f,g,e=a._getSrcElementByEvent(d);return e.row?(f=b.draggingMessage.replace(/{count}/,c.draggingRows?c.draggingRows.length:1),b.rowDraggingRender&&(f=b.rowDraggingRender(c.draggingRows,c,a)),g=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+f+"</div>").appendTo("body")):void 0},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),a.children[this.id]=this},onStartDrag:function(b,c){var d,e,f;if(2==c.button)return!1;if(a.colresizing)return!1;if(!a.columns.length)return!1;if(this.set("cursor","default"),d=a._getSrcElementByEvent(c),!d.cell||!d.data||d.checkbox)return!1;if(e=d.cell.id.split("|"),f=a._columns[e[e.length-1]],!(d.rownumberscell||d.detailcell||d.checkboxcell||f==a.columns[0]))return!1;if(a.enabledCheckbox()){if(this.draggingRows=a.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[d.data];this.draggingRow=d.data,this.set("cursor","move"),a.rowdragging=!0,this.validRange={top:a.gridbody.offset().top,bottom:a.gridbody.offset().top+a.gridbody.height(),left:a.grid.offset().left-10,right:a.grid.offset().left+a.grid.width()+10}},onDrag:function(c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,e=this.draggingRow;if(!e)return!1;if(f=this.draggingRows?this.draggingRows:[e],a.colresizing)return!1;if(null==a.rowDropIn&&(a.rowDropIn=-1),g=d.pageX,h=d.pageY,i=!1,j=this.validRange,g<j.left||g>j.right||h>j.bottom||h<j.top)return a.rowDropIn=-1,a.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no"),void 0;for(k in a.rows)if(l=a.rows[k],m=l["__id"],e==l&&(i=!0),-1==$.inArray(l,f)&&(n=i?!0:!1,-1==a.rowDropIn||a.rowDropIn==m)){if(o=a.getRowObj(m),p=$(o).offset(),q={top:p.top-4,bottom:p.top+$(o).height()+4,left:a.grid.offset().left,right:a.grid.offset().left+a.grid.width()},g>q.left&&g<q.right&&h>q.top&&h<q.bottom){r=p.top,n&&(r+=$(o).height()),a.rowDroptip.css({left:q.left,top:r,width:q.right-q.left}).show(),a.rowDropIn=m,a.rowDropDir=n?"bottom":"top",b.tree&&h>q.top+5&&h<q.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),a.rowDroptip.hide(),a.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),a.rowDroptip.show(),a.rowDropInParent=!1);break}-1!=a.rowDropIn&&(a.rowDropIn=-1,a.rowDropInParent=!1,a.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}},onStopDrag:function(){var f,g,h,i,e=this.draggingRows;for(a.rowdragging=!1,f=0;f<e.length;f++)g=e[f].children,g&&(e=$.grep(e,function(a){var c=-1==$.inArray(a,g);return c}));-1!=a.rowDropIn&&(b.tree?(a.rowDropInParent?i=a.getRow(a.rowDropIn):(h=a.getRow(a.rowDropIn),i=a.getParent(h)),a.appendRange(e,i,h,"bottom"!=a.rowDropDir),a.trigger("rowDragDrop",{rows:e,parent:i,near:h,after:"bottom"==a.rowDropDir})):(a.moveRange(e,a.rowDropIn,"bottom"==a.rowDropDir),a.trigger("rowDragDrop",{rows:e,parent:i,near:a.getRow(a.rowDropIn),after:"bottom"==a.rowDropDir})),a.rowDropIn=-1),a.rowDroptip.hide(),this.set("cursor","default")}}))},_onRowOver:function(a,b){var c,d,e,f;l.draggable.dragging||(c=this,d=this.options,e=c.getRow(a),f=b?"addClass":"removeClass",c.enabledFrozen()&&$(c.getRowObj(e,!0))[f](d.mouseoverRowCssClass),$(c.getRowObj(e,!1))[f](d.mouseoverRowCssClass))},_onMouseUp:function(a){var d,b=this;this.options,l.draggable.dragging&&(d=b._getSrcElementByEvent(a),d.hcell&&d.column?b.trigger("dragdrop",[{type:"header",column:d.column,cell:d.hcell},a]):d.row&&b.trigger("dragdrop",[{type:"row",record:d.data,row:d.row},a]))},_onMouseDown:function(){this.options},_onContextmenu:function(a){var e,f,b=this,c=this.options,d=b._getSrcElementByEvent(a);if(d.row){if(c.whenRClickToSelect&&b.select(d.data),b.hasBind("contextmenu"))return b.trigger("contextmenu",[{data:d.data,rowindex:d.data["__index"],row:d.row},a])}else if(d.hcell)return c.allowHideColumn?(e=$(d.hcell).attr("columnindex"),void 0==e?!0:(f=a.pageX-b.body.offset().left+parseInt(b.body[0].scrollLeft),e==b.columns.length-1&&(f-=50),b.popup.css({left:f,top:b.gridheader.height()+1}),b.popup.toggle(),!1)):!0},_onDblClick:function(a){var d,b=this;this.options,d=b._getSrcElementByEvent(a),d.row&&b.trigger("dblClickRow",[d.data,d.data["__id"],d.row])},_onClick:function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if(a.target||a.srcElement,c=this,d=this.options,e=c._getSrcElementByEvent(a),e.out)return c.editor.editing&&!$.ligerui.win.masking&&c.endEdit(),d.allowHideColumn&&c.popup.hide(),void 0;if(!e.indetail&&!e.editing)if(c.editor.editing&&c.endEdit(),d.allowHideColumn&&(e.popup||c.popup.hide()),e.checkboxall){if(f=$(e.hrow),g=f.hasClass("l-checked"),0==c.trigger("beforeCheckAllRow",[!g,c.element]))return!1;g?f.removeClass("l-checked"):f.addClass("l-checked"),c.selected=[];for(h in c.records)g?c.unselect(c.records[h]):c.select(c.records[h]);c.trigger("checkAllRow",[!g,c.element])}else if(e.hcelltext){if(i=$(e.hcelltext).parent().parent(),!d.enabledSort||!e.column)return;if(0==e.column.isSort)return;if(d.url&&c.isDataChanged&&!confirm(d.isContinueByDataChanged))return;if(j=$(".l-grid-hd-cell-sort:first",i),k=e.column.name,!k)return;j.length>0?j.hasClass("l-grid-hd-cell-sort-asc")?(j.removeClass("l-grid-hd-cell-sort-asc").addClass("l-grid-hd-cell-sort-desc"),i.removeClass("l-grid-hd-cell-asc").addClass("l-grid-hd-cell-desc"),c.changeSort(k,"desc")):j.hasClass("l-grid-hd-cell-sort-desc")&&(j.removeClass("l-grid-hd-cell-sort-desc").addClass("l-grid-hd-cell-sort-asc"),i.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),c.changeSort(k,"asc")):(i.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),$(e.hcelltext).after("<span class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'>&nbsp;&nbsp;</span>"),c.changeSort(k,"asc")),$(".l-grid-hd-cell-sort",c.gridheader).add($(".l-grid-hd-cell-sort",c.f.gridheader)).not($(".l-grid-hd-cell-sort:first",i)).remove()}else if(e.detailbtn&&d.detail)if(l=e.data,f=$([c.getRowObj(l,!1)]),c.enabledFrozen()&&(f=f.add(c.getRowObj(l,!0))),h=l["__id"],$(e.detailbtn).hasClass("l-open"))d.detail.onCollapse&&d.detail.onCollapse(l,$(".l-grid-detailpanel-inner:first",m)[0]),f.next("tr.l-grid-detailpanel").hide(),$(e.detailbtn).removeClass("l-open");else{if(m=f.next("tr.l-grid-detailpanel"),m.length>0)return m.show(),d.detail.onExtend&&d.detail.onExtend(l,$(".l-grid-detailpanel-inner:first",m)[0]),$(e.detailbtn).addClass("l-open"),c.trigger("SysGridHeightChanged"),void 0;for($(e.detailbtn).addClass("l-open"),n=0,o=0;o<c.columns.length;o++)c.columns[o].frozen&&n++;p=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>"),q=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>"),p.attr("id",c.id+"|detail|"+h),c.detailrows=c.detailrows||[],c.detailrows.push(p[0]),c.detailrows.push(q[0]),r=$("div:first",p),r.parent().attr("colSpan",c.columns.length-n),f.eq(0).after(p),n>0&&(q.find("td:first").attr("colSpan",n),f.eq(1).after(q)),d.detail.onShowDetail?(d.detail.onShowDetail(l,r[0],function(){c.trigger("SysGridHeightChanged")}),$("div:first",q).add(r).show().height(d.detail.height||d.detailHeight)):d.detail.render&&(r.append(d.detail.render()),r.show()),c.trigger("SysGridHeightChanged")}else if(e.groupbtn){for(s=$(e.grouprow),t=!0,$(e.groupbtn).hasClass("l-grid-group-togglebtn-close")?($(e.groupbtn).removeClass("l-grid-group-togglebtn-close"),s.hasClass("l-grid-grouprow-last")&&$("td:first",s).width("auto")):(t=!1,$(e.groupbtn).addClass("l-grid-group-togglebtn-close"),s.hasClass("l-grid-grouprow-last")&&$("td:first",s).width(c.gridtablewidth)),u=s.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");;){if(0==u.length)break;
t?(u.show(),u.hasClass("l-grid-detailpanel")&&!u.prev().find("td.l-grid-row-cell-detail:first span.l-grid-row-cell-detailbtn:first").hasClass("l-open")&&u.hide()):u.hide(),u=u.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel")}c.trigger("SysGridHeightChanged")}else if(e.treelink)c.toggle(e.data);else if(e.row&&c.enabledCheckbox()){if(v=d.selectRowButtonOnly?!0:!1,d.enabledEdit&&(v=!0),e.checkbox||!v){if(f=$(e.row),g=f.hasClass("l-selected"),0==c.trigger("beforeCheckRow",[!g,e.data,e.data["__id"],e.row]))return!1;if(w=g?"unselect":"select",c[w](e.data),d.tree&&d.autoCheckChildren)for(x=c.getChildren(e.data,!0),o=0,y=x.length;y>o;o++)c[w](x[o]);c.trigger("checkRow",[!g,e.data,e.data["__id"],e.row])}!e.checkbox&&e.cell&&d.enabledEdit&&d.clickToEdit&&c._applyEditor(e.cell)}else if(e.row&&!c.enabledCheckbox())if(e.cell&&d.enabledEdit&&d.clickToEdit&&c._applyEditor(e.cell),$(e.row).hasClass("l-selected")){if(!d.allowUnSelectRow)return $(e.row).addClass("l-selected-again"),void 0;c.unselect(e.data)}else c.select(e.data);else if(e.toolbar)if(e.first){if(0==c.trigger("toFirst",[c.element]))return!1;c.changePage("first")}else if(e.prev){if(0==c.trigger("toPrev",[c.element]))return!1;c.changePage("prev")}else if(e.next){if(0==c.trigger("toNext",[c.element]))return!1;c.changePage("next")}else if(e.last){if(0==c.trigger("toLast",[c.element]))return!1;c.changePage("last")}else if(e.load){if($("span",e.load).hasClass("l-disabled"))return!1;if(0==c.trigger("reload",[c.element]))return!1;if(d.url&&c.isDataChanged&&!confirm(d.isContinueByDataChanged))return!1;c.loadData(d.where)}},select:function(a){var d,e,f,g,h,i,b=this;if(this.options,d=b.getRow(a),e=d["__id"],f=b.getRowObj(e),g=b.getRowObj(e,!0),!b.enabledCheckbox()&&!b.ctrlKey){for(h in b.selected)i=b.selected[h],i["__id"]in b.records&&($(b.getRowObj(i)).removeClass("l-selected l-selected-again"),b.enabledFrozen()&&$(b.getRowObj(i,!0)).removeClass("l-selected l-selected-again"));b.selected=[]}f&&$(f).addClass("l-selected"),g&&$(g).addClass("l-selected"),b.selected[b.selected.length]=d,b.trigger("selectRow",[d,e,f])},unselect:function(a){var d,e,f,g,b=this;this.options,d=b.getRow(a),e=d["__id"],f=b.getRowObj(e),g=b.getRowObj(e,!0),$(f).removeClass("l-selected l-selected-again"),b.enabledFrozen()&&$(g).removeClass("l-selected l-selected-again"),b._removeSelected(d),b.trigger("unSelectRow",[d,e,f])},isSelected:function(a){var d,e,b=this;this.options,d=b.getRow(a);for(e in b.selected)if(b.selected[e]==d)return!0;return!1},_onResize:function(){var c,d,e,f,g,h,i,a=this,b=this.options;b.height&&"auto"!=b.height&&(c=$(window).height(),d=0,e=null,"string"==typeof b.height&&b.height.indexOf("%")>0?(f=a.grid.parent(),b.InWindow?(e=c,e-=parseInt($("body").css("paddingTop")),e-=parseInt($("body").css("paddingBottom"))):e=f.height(),d=.01*e*parseFloat(b.height),(b.InWindow||"body"==f[0].tagName.toLowerCase())&&(d-=a.grid.offset().top-parseInt($("body").css("paddingTop")))):d=parseInt(b.height),d+=b.heightDiff,a.windowHeight=c,a._setHeight(d)),a.enabledFrozen()&&(g=a.gridview1.width(),h=a.gridview.width(),i=h-g,100>i&&(i=600),a.gridview2.css({width:i})),a.trigger("SysGridHeightChanged")}}),$.ligerui.controls.Grid.prototype.enabledTotal=$.ligerui.controls.Grid.prototype.isTotalSummary,$.ligerui.controls.Grid.prototype.add=$.ligerui.controls.Grid.prototype.addRow,$.ligerui.controls.Grid.prototype.update=$.ligerui.controls.Grid.prototype.updateRow,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRow,$.ligerui.controls.Grid.prototype.getSelected=$.ligerui.controls.Grid.prototype.getSelectedRow,$.ligerui.controls.Grid.prototype.getSelecteds=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRows=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRowObjs=$.ligerui.controls.Grid.prototype.getSelectedRowObjs,$.ligerui.controls.Grid.prototype.setOptions=$.ligerui.controls.Grid.prototype.set}(jQuery),function(a){a.fn.ligerLayout=function(){return a.ligerui.run.call(this,"ligerLayout",arguments)},a.fn.ligerGetLayoutManager=function(){return a.ligerui.run.call(this,"ligerGetLayoutManager",arguments)},a.ligerDefaults.Layout={topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,InWindow:!0,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:!1,isRightCollapse:!1,allowLeftCollapse:!0,allowRightCollapse:!0,allowLeftResize:!0,allowRightResize:!0,allowTopResize:!0,allowBottomResize:!0,space:3,onEndResize:null,minLeftWidth:80,minRightWidth:80},a.ligerMethos.Layout={},a.ligerui.controls.Layout=function(b,c){a.ligerui.controls.Layout.base.constructor.call(this,b,c)},a.ligerui.controls.Layout.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return a.ligerMethos.Layout},_render:function(){var d,e,f,g,b=this,c=this.options;b.layout=a(this.element),b.layout.addClass("l-layout"),b.width=b.layout.width(),a("> div[position=top]",b.layout).length>0&&(b.top=a("> div[position=top]",b.layout).wrap('<div class="l-layout-top" style="top:0px;"></div>').parent(),b.top.content=a("> div[position=top]",b.top),b.top.content.hasClass("l-layout-content")||b.top.content.addClass("l-layout-content"),b.topHeight=c.topHeight,b.topHeight&&b.top.height(b.topHeight)),a("> div[position=bottom]",b.layout).length>0&&(b.bottom=a("> div[position=bottom]",b.layout).wrap('<div class="l-layout-bottom"></div>').parent(),b.bottom.content=a("> div[position=bottom]",b.bottom),b.bottom.content.hasClass("l-layout-content")||b.bottom.content.addClass("l-layout-content"),b.bottomHeight=c.bottomHeight,b.bottomHeight&&b.bottom.height(b.bottomHeight),d=b.bottom.content.attr("title"),d&&(b.bottom.header=a('<div class="l-layout-header"></div>'),b.bottom.prepend(b.bottom.header),b.bottom.header.html(d),b.bottom.content.attr("title",""))),a("> div[position=left]",b.layout).length>0&&(b.left=a("> div[position=left]",b.layout).wrap('<div class="l-layout-left" style="left:0px;"></div>').parent(),b.left.header=a('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>'),b.left.prepend(b.left.header),b.left.header.toggle=a(".l-layout-header-toggle",b.left.header),b.left.content=a("> div[position=left]",b.left),b.left.content.hasClass("l-layout-content")||b.left.content.addClass("l-layout-content"),c.allowLeftCollapse||a(".l-layout-header-toggle",b.left.header).remove(),e=b.left.content.attr("title"),e&&(b.left.content.attr("title",""),a(".l-layout-header-inner",b.left.header).html(e)),b.leftWidth=c.leftWidth,b.leftWidth&&b.left.width(b.leftWidth)),a("> div[position=center]",b.layout).length>0&&(b.center=a("> div[position=center]",b.layout).wrap('<div class="l-layout-center" ></div>').parent(),b.center.content=a("> div[position=center]",b.center),b.center.content.addClass("l-layout-content"),f=b.center.content.attr("title"),f&&(b.center.content.attr("title",""),b.center.header=a('<div class="l-layout-header"></div>'),b.center.prepend(b.center.header),b.center.header.html(f)),b.centerWidth=c.centerWidth,b.centerWidth&&b.center.width(b.centerWidth)),a("> div[position=right]",b.layout).length>0&&(b.right=a("> div[position=right]",b.layout).wrap('<div class="l-layout-right"></div>').parent(),b.right.header=a('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>'),b.right.prepend(b.right.header),b.right.header.toggle=a(".l-layout-header-toggle",b.right.header),c.allowRightCollapse||a(".l-layout-header-toggle",b.right.header).remove(),b.right.content=a("> div[position=right]",b.right),b.right.content.hasClass("l-layout-content")||b.right.content.addClass("l-layout-content"),g=b.right.content.attr("title"),g&&(b.right.content.attr("title",""),a(".l-layout-header-inner",b.right.header).html(g)),b.rightWidth=c.rightWidth,b.rightWidth&&b.right.width(b.rightWidth)),b.layout.lock=a("<div class='l-layout-lock'></div>"),b.layout.append(b.layout.lock),b._addDropHandle(),b.isLeftCollapse=c.isLeftCollapse,b.isRightCollapse=c.isRightCollapse,b.leftCollapse=a('<div class="l-layout-collapse-left" style="display: none; "><div class="l-layout-collapse-left-toggle"></div></div>'),b.rightCollapse=a('<div class="l-layout-collapse-right" style="display: none; "><div class="l-layout-collapse-right-toggle"></div></div>'),b.layout.append(b.leftCollapse).append(b.rightCollapse),b.leftCollapse.toggle=a("> .l-layout-collapse-left-toggle",b.leftCollapse),b.rightCollapse.toggle=a("> .l-layout-collapse-right-toggle",b.rightCollapse),b._setCollapse(),b._bulid(),a(window).resize(function(){b._onResize()}),b.set(c)},setLeftCollapse:function(a){var b=this;return this.options,b.left?(b.isLeftCollapse=a,b.isLeftCollapse?(b.leftCollapse.show(),b.leftDropHandle&&b.leftDropHandle.hide(),b.left.hide()):(b.leftCollapse.hide(),b.leftDropHandle&&b.leftDropHandle.show(),b.left.show()),b._onResize(),void 0):!1},setRightCollapse:function(a){var b=this;return this.options,b.right?(b.isRightCollapse=a,b._onResize(),b.isRightCollapse?(b.rightCollapse.show(),b.rightDropHandle&&b.rightDropHandle.hide(),b.right.hide()):(b.rightCollapse.hide(),b.rightDropHandle&&b.rightDropHandle.show(),b.right.show()),b._onResize(),void 0):!1},_bulid:function(){var b=this,c=this.options;a("> .l-layout-left .l-layout-header,> .l-layout-right .l-layout-header",b.layout).hover(function(){a(this).addClass("l-layout-header-over")},function(){a(this).removeClass("l-layout-header-over")}),a(".l-layout-header-toggle",b.layout).hover(function(){a(this).addClass("l-layout-header-toggle-over")},function(){a(this).removeClass("l-layout-header-toggle-over")}),a(".l-layout-header-toggle",b.left).click(function(){b.setLeftCollapse(!0)}),a(".l-layout-header-toggle",b.right).click(function(){b.setRightCollapse(!0)}),b.middleTop=0,b.top&&(b.middleTop+=b.top.height(),b.middleTop+=parseInt(b.top.css("borderTopWidth")),b.middleTop+=parseInt(b.top.css("borderBottomWidth")),b.middleTop+=c.space),b.left&&(b.left.css({top:b.middleTop}),b.leftCollapse.css({top:b.middleTop})),b.center&&b.center.css({top:b.middleTop}),b.right&&(b.right.css({top:b.middleTop}),b.rightCollapse.css({top:b.middleTop})),b.left&&b.left.css({left:0}),b._onResize(),b._onResize()},_setCollapse:function(){var b=this;this.options,b.leftCollapse.hover(function(){a(this).addClass("l-layout-collapse-left-over")},function(){a(this).removeClass("l-layout-collapse-left-over")}),b.leftCollapse.toggle.hover(function(){a(this).addClass("l-layout-collapse-left-toggle-over")},function(){a(this).removeClass("l-layout-collapse-left-toggle-over")}),b.rightCollapse.hover(function(){a(this).addClass("l-layout-collapse-right-over")},function(){a(this).removeClass("l-layout-collapse-right-over")}),b.rightCollapse.toggle.hover(function(){a(this).addClass("l-layout-collapse-right-toggle-over")},function(){a(this).removeClass("l-layout-collapse-right-toggle-over")}),b.leftCollapse.toggle.click(function(){b.setLeftCollapse(!1)}),b.rightCollapse.toggle.click(function(){b.setRightCollapse(!1)}),b.left&&b.isLeftCollapse&&(b.leftCollapse.show(),b.leftDropHandle&&b.leftDropHandle.hide(),b.left.hide()),b.right&&b.isRightCollapse&&(b.rightCollapse.show(),b.rightDropHandle&&b.rightDropHandle.hide(),b.right.hide())},_addDropHandle:function(){var b=this,c=this.options;b.left&&c.allowLeftResize&&(b.leftDropHandle=a("<div class='l-layout-drophandle-left'></div>"),b.layout.append(b.leftDropHandle),b.leftDropHandle&&b.leftDropHandle.show(),b.leftDropHandle.mousedown(function(a){b._start("leftresize",a)})),b.right&&c.allowRightResize&&(b.rightDropHandle=a("<div class='l-layout-drophandle-right'></div>"),b.layout.append(b.rightDropHandle),b.rightDropHandle&&b.rightDropHandle.show(),b.rightDropHandle.mousedown(function(a){b._start("rightresize",a)})),b.top&&c.allowTopResize&&(b.topDropHandle=a("<div class='l-layout-drophandle-top'></div>"),b.layout.append(b.topDropHandle),b.topDropHandle.show(),b.topDropHandle.mousedown(function(a){b._start("topresize",a)})),b.bottom&&c.allowBottomResize&&(b.bottomDropHandle=a("<div class='l-layout-drophandle-bottom'></div>"),b.layout.append(b.bottomDropHandle),b.bottomDropHandle.show(),b.bottomDropHandle.mousedown(function(a){b._start("bottomresize",a)})),b.draggingxline=a("<div class='l-layout-dragging-xline'></div>"),b.draggingyline=a("<div class='l-layout-dragging-yline'></div>"),b.layout.append(b.draggingxline).append(b.draggingyline)},_setDropHandlePosition:function(){var a=this,b=this.options;a.leftDropHandle&&a.leftDropHandle.css({left:a.left.width()+parseInt(a.left.css("left")),height:a.middleHeight,top:a.middleTop}),a.rightDropHandle&&a.rightDropHandle.css({left:parseInt(a.right.css("left"))-b.space,height:a.middleHeight,top:a.middleTop}),a.topDropHandle&&a.topDropHandle.css({top:a.top.height()+parseInt(a.top.css("top")),width:a.top.width()}),a.bottomDropHandle&&a.bottomDropHandle.css({top:parseInt(a.bottom.css("top"))-b.space,width:a.bottom.width()})},_onResize:function(){var h,i,b=this,c=this.options,d=b.layout.height(),e=0,f=a(window).height(),g=null;"string"==typeof c.height&&c.height.indexOf("%")>0?(h=b.layout.parent(),c.InWindow||"body"==h[0].tagName.toLowerCase()?(g=f,g-=parseInt(a("body").css("paddingTop")),g-=parseInt(a("body").css("paddingBottom"))):g=h.height(),e=.01*g*parseFloat(c.height),(c.InWindow||"body"==h[0].tagName.toLowerCase())&&(e-=b.layout.offset().top-parseInt(a("body").css("paddingTop")))):e=parseInt(c.height),e+=c.heightDiff,b.layout.height(e),b.layoutHeight=b.layout.height(),b.middleWidth=b.layout.width(),b.middleHeight=b.layout.height(),b.top&&(b.middleHeight-=b.top.height(),b.middleHeight-=parseInt(b.top.css("borderTopWidth")),b.middleHeight-=parseInt(b.top.css("borderBottomWidth")),b.middleHeight-=c.space),b.bottom&&(b.middleHeight-=b.bottom.height(),b.middleHeight-=parseInt(b.bottom.css("borderTopWidth")),b.middleHeight-=parseInt(b.bottom.css("borderBottomWidth")),b.middleHeight-=c.space),b.middleHeight-=2,b.hasBind("heightChanged")&&b.layoutHeight!=d&&b.trigger("heightChanged",[{layoutHeight:b.layoutHeight,diff:b.layoutHeight-d,middleHeight:b.middleHeight}]),b.center&&(b.centerWidth=b.middleWidth,b.left&&(b.isLeftCollapse?(b.centerWidth-=b.leftCollapse.width(),b.centerWidth-=parseInt(b.leftCollapse.css("borderLeftWidth")),b.centerWidth-=parseInt(b.leftCollapse.css("borderRightWidth")),b.centerWidth-=parseInt(b.leftCollapse.css("left")),b.centerWidth-=c.space):(b.centerWidth-=b.leftWidth,b.centerWidth-=parseInt(b.left.css("borderLeftWidth")),b.centerWidth-=parseInt(b.left.css("borderRightWidth")),b.centerWidth-=parseInt(b.left.css("left")),b.centerWidth-=c.space)),b.right&&(b.isRightCollapse?(b.centerWidth-=b.rightCollapse.width(),b.centerWidth-=parseInt(b.rightCollapse.css("borderLeftWidth")),b.centerWidth-=parseInt(b.rightCollapse.css("borderRightWidth")),b.centerWidth-=parseInt(b.rightCollapse.css("right")),b.centerWidth-=c.space):(b.centerWidth-=b.rightWidth,b.centerWidth-=parseInt(b.right.css("borderLeftWidth")),b.centerWidth-=parseInt(b.right.css("borderRightWidth")),b.centerWidth-=c.space)),b.centerLeft=0,b.left&&(b.isLeftCollapse?(b.centerLeft+=b.leftCollapse.width(),b.centerLeft+=parseInt(b.leftCollapse.css("borderLeftWidth")),b.centerLeft+=parseInt(b.leftCollapse.css("borderRightWidth")),b.centerLeft+=parseInt(b.leftCollapse.css("left")),b.centerLeft+=c.space):(b.centerLeft+=b.left.width(),b.centerLeft+=parseInt(b.left.css("borderLeftWidth")),b.centerLeft+=parseInt(b.left.css("borderRightWidth")),b.centerLeft+=c.space)),b.center.css({left:b.centerLeft}),b.center.width(b.centerWidth),b.center.height(b.middleHeight),i=b.middleHeight,b.center.header&&(i-=b.center.header.height()),b.center.content.height(i)),b.left&&(b.leftCollapse.height(b.middleHeight),b.left.height(b.middleHeight)),b.right&&(b.rightCollapse.height(b.middleHeight),b.right.height(b.middleHeight),b.rightLeft=0,b.left&&(b.isLeftCollapse?(b.rightLeft+=b.leftCollapse.width(),b.rightLeft+=parseInt(b.leftCollapse.css("borderLeftWidth")),b.rightLeft+=parseInt(b.leftCollapse.css("borderRightWidth")),b.rightLeft+=c.space):(b.rightLeft+=b.left.width(),b.rightLeft+=parseInt(b.left.css("borderLeftWidth")),b.rightLeft+=parseInt(b.left.css("borderRightWidth")),b.rightLeft+=parseInt(b.left.css("left")),b.rightLeft+=c.space)),b.center&&(b.rightLeft+=b.center.width(),b.rightLeft+=parseInt(b.center.css("borderLeftWidth")),b.rightLeft+=parseInt(b.center.css("borderRightWidth")),b.rightLeft+=c.space),b.right.css({left:b.rightLeft})),b.bottom&&(b.bottomTop=b.layoutHeight-b.bottom.height()-2,b.bottom.css({top:b.bottomTop})),b._setDropHandlePosition()},_start:function(b,c){var d=this;if(this.options,d.dragtype=b,"leftresize"==b||"rightresize"==b)d.xresize={startX:c.pageX},d.draggingyline.css({left:c.pageX-d.layout.offset().left,height:d.middleHeight,top:d.middleTop}).show(),a("body").css("cursor","col-resize");else{if("topresize"!=b&&"bottomresize"!=b)return;d.yresize={startY:c.pageY},d.draggingxline.css({top:c.pageY-d.layout.offset().top,width:d.layout.width()}).show(),a("body").css("cursor","row-resize")}d.layout.lock.width(d.layout.width()),d.layout.lock.height(d.layout.height()),d.layout.lock.show(),(a.browser.msie||a.browser.safari)&&a("body").bind("selectstart",function(){return!1}),a(document).bind("mouseup",function(){d._stop.apply(d,arguments)}),a(document).bind("mousemove",function(){d._drag.apply(d,arguments)})},_drag:function(b){var c=this;this.options,c.xresize?(c.xresize.diff=b.pageX-c.xresize.startX,c.draggingyline.css({left:b.pageX-c.layout.offset().left}),a("body").css("cursor","col-resize")):c.yresize&&(c.yresize.diff=b.pageY-c.yresize.startY,c.draggingxline.css({top:b.pageY-c.layout.offset().top}),a("body").css("cursor","row-resize"))},_stop:function(b){var e,c=this,d=this.options;if(c.xresize&&void 0!=c.xresize.diff){if(e=c.xresize.diff,"leftresize"==c.dragtype){if(d.minLeftWidth&&c.leftWidth+c.xresize.diff<d.minLeftWidth)return;c.leftWidth+=c.xresize.diff,c.left.width(c.leftWidth),c.center?c.center.width(c.center.width()-c.xresize.diff).css({left:parseInt(c.center.css("left"))+c.xresize.diff}):c.right&&c.right.width(c.left.width()-c.xresize.diff).css({left:parseInt(c.right.css("left"))+c.xresize.diff})}else if("rightresize"==c.dragtype){if(d.minRightWidth&&c.rightWidth-c.xresize.diff<d.minRightWidth)return;c.rightWidth-=c.xresize.diff,c.right.width(c.rightWidth).css({left:parseInt(c.right.css("left"))+c.xresize.diff}),c.center?c.center.width(c.center.width()+c.xresize.diff):c.left&&c.left.width(c.left.width()+c.xresize.diff)}}else c.yresize&&void 0!=c.yresize.diff&&(e=c.yresize.diff,"topresize"==c.dragtype?(c.top.height(c.top.height()+c.yresize.diff),c.middleTop+=c.yresize.diff,c.middleHeight-=c.yresize.diff,c.left&&(c.left.css({top:c.middleTop}).height(c.middleHeight),c.leftCollapse.css({top:c.middleTop}).height(c.middleHeight)),c.center&&c.center.css({top:c.middleTop}).height(c.middleHeight),c.right&&(c.right.css({top:c.middleTop}).height(c.middleHeight),c.rightCollapse.css({top:c.middleTop}).height(c.middleHeight))):"bottomresize"==c.dragtype&&(c.bottom.height(c.bottom.height()-c.yresize.diff),c.middleHeight+=c.yresize.diff,c.bottomTop+=c.yresize.diff,c.bottom.css({top:c.bottomTop}),c.left&&(c.left.height(c.middleHeight),c.leftCollapse.height(c.middleHeight)),c.center&&c.center.height(c.middleHeight),c.right&&(c.right.height(c.middleHeight),c.rightCollapse.height(c.middleHeight))));c.trigger("endResize",[{direction:c.dragtype?c.dragtype.replace(/resize/,""):"",diff:e},b]),c._setDropHandlePosition(),c.draggingxline.hide(),c.draggingyline.hide(),c.xresize=c.yresize=c.dragtype=!1,c.layout.lock.hide(),(a.browser.msie||a.browser.safari)&&a("body").unbind("selectstart"),a(document).unbind("mousemove",c._drag),a(document).unbind("mouseup",c._stop),a("body").css("cursor","")}})}(jQuery),function(a){a.ligerMenu=function(){return a.ligerui.run.call(null,"ligerMenu",arguments)},a.ligerDefaults.Menu={width:120,top:0,left:0,items:null,shadow:!0},a.ligerMethos.Menu={},a.ligerui.controls.Menu=function(b){a.ligerui.controls.Menu.base.constructor.call(this,null,b)},a.ligerui.controls.Menu.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return a.ligerMethos.Menu},_render:function(){var b=this,c=this.options;b.menuItemCount=0,b.menus={},b.menu=b.createMenu(),b.element=b.menu[0],b.menu.css({top:c.top,left:c.left,width:c.width}),c.items&&a(c.items).each(function(a,c){b.addItem(c)}),a(document).bind("click.menu",function(){var a,c;for(a in b.menus){if(c=b.menus[a],!c)return;c.hide(),c.shadow&&c.shadow.hide()}}),b.set(c)},show:function(a,b){var c=this;this.options,void 0==b&&(b=c.menu),a&&void 0!=a.left&&b.css({left:a.left}),a&&void 0!=a.top&&b.css({top:a.top}),b.show(),c.updateShadow(b)},updateShadow:function(a){var c=this.options;c.shadow&&(a.shadow.css({left:a.css("left"),top:a.css("top"),width:a.outerWidth(),height:a.outerHeight()}),a.is(":visible")?a.shadow.show():a.shadow.hide())},hide:function(a){var b=this;this.options,void 0==a&&(a=b.menu),b.hideAllSubMenu(a),a.hide(),b.updateShadow(a)},toggle:function(){var a=this;this.options,a.menu.toggle(),a.updateShadow(a.menu)},removeItem:function(b){var c=this;this.options,a("> .l-menu-item[menuitemid="+b+"]",c.menu.items).remove()},setEnabled:function(b){var c=this;this.options,a("> .l-menu-item[menuitemid="+b+"]",c.menu.items).removeClass("l-menu-item-disable")},setDisabled:function(b){var c=this;this.options,a("> .l-menu-item[menuitemid="+b+"]",c.menu.items).addClass("l-menu-item-disable")},isEnable:function(b){var c=this;return this.options,!a("> .l-menu-item[menuitemid="+b+"]",c.menu.items).hasClass("l-menu-item-disable")},getItemCount:function(){var b=this;return this.options,a("> .l-menu-item",b.menu.items).length},addItem:function(b,c){var f,g,h,i,d=this,e=this.options;if(b){if(void 0==c&&(c=d.menu),b.line)return c.items.append('<div class="l-menu-item-line"></div>'),void 0;f=a('<div class="l-menu-item"><div class="l-menu-item-text"></div> </div>'),g=a("> .l-menu-item",c.items).length,c.items.append(f),f.attr("ligeruimenutemid",++d.menuItemCount),b.id&&f.attr("menuitemid",b.id),b.text&&a(">.l-menu-item-text:first",f).html(b.text),b.icon&&f.prepend('<div class="l-menu-item-icon l-icon-'+b.icon+'"></div>'),(b.disable||b.disabled)&&f.addClass("l-menu-item-disable"),b.children&&(f.append('<div class="l-menu-item-arrow"></div>'),h=d.createMenu(f.attr("ligeruimenutemid")),d.menus[f.attr("ligeruimenutemid")]=h,h.width(e.width),h.hover(null,function(){h.showedSubMenu||d.hide(h)}),a(b.children).each(function(){d.addItem(this,h)})),b.click&&f.click(function(){a(this).hasClass("l-menu-item-disable")||b.click(b,g)}),b.dblclick&&f.dblclick(function(){a(this).hasClass("l-menu-item-disable")||b.dblclick(b,g)}),i=a("> .l-menu-over:first",c),f.hover(function(){var e,f,g;if(!a(this).hasClass("l-menu-item-disable")&&(e=a(this).offset().top,f=e-c.offset().top,i.css({top:f}),d.hideAllSubMenu(c),b.children)){if(g=a(this).attr("ligeruimenutemid"),!g)return;d.menus[g]&&(d.show({top:e,left:a(this).offset().left+a(this).width()-5},d.menus[g]),c.showedSubMenu=!0)}},function(){var c;a(this).hasClass("l-menu-item-disable")||(c=a(this).attr("ligeruimenutemid"),b.children&&(c=a(this).attr("ligeruimenutemid"),!c))})}},hideAllSubMenu:function(b){var c=this;this.options,void 0==b&&(b=c.menu),a("> .l-menu-item",b.items).each(function(){if(a("> .l-menu-item-arrow",this).length>0){var b=a(this).attr("ligeruimenutemid");if(!b)return;c.menus[b]&&c.hide(c.menus[b])}}),b.showedSubMenu=!1},createMenu:function(b){var c=this,d=this.options,e=a('<div class="l-menu" style="display:none"><div class="l-menu-yline"></div><div class="l-menu-over"><div class="l-menu-over-l"></div> <div class="l-menu-over-r"></div></div><div class="l-menu-inner"></div></div>');return b&&e.attr("ligeruiparentmenuitemid",b),e.items=a("> .l-menu-inner:first",e),e.appendTo("body"),d.shadow&&(e.shadow=a('<div class="l-menu-shadow"></div>').insertAfter(e),c.updateShadow(e)),e.hover(null,function(){e.showedSubMenu||a("> .l-menu-over:first",e).css({top:-24})}),b?c.menus[b]=e:c.menus[0]=e,e}}),a.ligerui.controls.Menu.prototype.setEnable=a.ligerui.controls.Menu.prototype.setEnabled,a.ligerui.controls.Menu.prototype.setDisable=a.ligerui.controls.Menu.prototype.setDisabled}(jQuery),function(a){a.fn.ligerMenuBar=function(){return a.ligerui.run.call(this,"ligerMenuBar",arguments)},a.fn.ligerGetMenuBarManager=function(){return a.ligerui.run.call(this,"ligerGetMenuBarManager",arguments)},a.ligerDefaults.MenuBar={},a.ligerMethos.MenuBar={},a.ligerui.controls.MenuBar=function(b,c){a.ligerui.controls.MenuBar.base.constructor.call(this,b,c)},a.ligerui.controls.MenuBar.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"MenuBar"},__idPrev:function(){return"MenuBar"},_extendMethods:function(){return a.ligerMethos.MenuBar},_render:function(){var b=this,c=this.options;b.menubar=a(this.element),b.menubar.hasClass("l-menubar")||b.menubar.addClass("l-menubar"),c&&c.items&&a(c.items).each(function(a,c){b.addItem(c)}),a(document).click(function(){a(".l-panel-btn-selected",b.menubar).removeClass("l-panel-btn-selected")}),b.set(c)},addItem:function(b){var e,f,c=this;this.options,e=a('<div class="l-menubar-item l-panel-btn"><span></span><div class="l-panel-btn-l"></div><div class="l-panel-btn-r"></div><div class="l-menubar-item-down"></div></div>'),c.menubar.append(e),b.id&&e.attr("menubarid",b.id),b.text&&a("span:first",e).html(b.text),b.disable&&e.addClass("l-menubar-item-disable"),b.click&&e.click(function(){b.click(b)}),b.menu?(f=a.ligerMenu(b.menu),e.hover(function(){var b,d;c.actionMenu&&c.actionMenu.hide(),b=a(this).offset().left,d=a(this).offset().top+a(this).height(),f.show({top:d,left:b}),c.actionMenu=f,a(this).addClass("l-panel-btn-over l-panel-btn-selected").siblings(".l-menubar-item").removeClass("l-panel-btn-selected")},function(){a(this).removeClass("l-panel-btn-over")})):(e.hover(function(){a(this).addClass("l-panel-btn-over")},function(){a(this).removeClass("l-panel-btn-over")}),a(".l-menubar-item-down",e).remove())}})}(jQuery),function(a){a.ligerMessageBox=function(){return a.ligerui.run.call(null,"ligerMessageBox",arguments,{isStatic:!0})},a.ligerDefaults.MessageBox={isDrag:!0},a.ligerMethos.MessageBox={},a.ligerui.controls.MessageBox=function(b){a.ligerui.controls.MessageBox.base.constructor.call(this,null,b)},a.ligerui.controls.MessageBox.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"MessageBox"},__idPrev:function(){return"MessageBox"},_extendMethods:function(){return a.ligerMethos.MessageBox},_render:function(){var e,f,g,h,i,b=this,c=this.options,d="";d+='<div class="l-messagebox">',d+='        <div class="l-messagebox-lt"></div><div class="l-messagebox-rt"></div>',d+='        <div class="l-messagebox-l"></div><div class="l-messagebox-r"></div> ',d+='        <div class="l-messagebox-image"></div>',d+='        <div class="l-messagebox-title">',d+='            <div class="l-messagebox-title-inner"></div>',d+='            <div class="l-messagebox-close"></div>',d+="        </div>",d+='        <div class="l-messagebox-content">',d+="        </div>",d+='        <div class="l-messagebox-buttons"><div class="l-messagebox-buttons-inner">',d+="        </div></div>",d+="    </div>",b.messageBox=a(d),a("body").append(b.messageBox),b.messageBox.close=function(){b._removeWindowMask(),b.messageBox.remove()},c.width&&b.messageBox.width(c.width),c.title&&a(".l-messagebox-title-inner",b.messageBox).html(c.title),c.content&&a(".l-messagebox-content",b.messageBox).html(c.content),c.buttons&&(a(c.buttons).each(function(c,d){var e=a('<div class="l-messagebox-btn"><div class="l-messagebox-btn-l"></div><div class="l-messagebox-btn-r"></div><div class="l-messagebox-btn-inner"></div></div>');a(".l-messagebox-btn-inner",e).html(d.text),a(".l-messagebox-buttons-inner",b.messageBox).append(e),d.width&&e.width(d.width),d.onclick&&e.click(function(){d.onclick(d,c,b.messageBox)})}),a(".l-messagebox-buttons-inner",b.messageBox).append("<div class='l-clear'></div>")),e=b.messageBox.width(),f=0,a(".l-messagebox-buttons-inner .l-messagebox-btn",b.messageBox).each(function(){f+=a(this).width()}),a(".l-messagebox-buttons-inner",b.messageBox).css({marginLeft:parseInt(.5*(e-f))}),b._applyWindowMask(),b._applyDrag(),b._setImage(),g=0,h=0,i=c.width||b.messageBox.width(),null!=c.left?g=c.left:c.left=g=.5*(a(window).width()-i),null!=c.top?h=c.top:c.top=h=.5*(a(window).height()-b.messageBox.height())+a(window).scrollTop()-10,0>g&&(c.left=g=0),0>h&&(c.top=h=0),b.messageBox.css({left:g,top:h}),a(".l-messagebox-btn",b.messageBox).hover(function(){a(this).addClass("l-messagebox-btn-over")},function(){a(this).removeClass("l-messagebox-btn-over")}),a(".l-messagebox-close",b.messageBox).hover(function(){a(this).addClass("l-messagebox-close-over")},function(){a(this).removeClass("l-messagebox-close-over")}).click(function(){b.messageBox.close()}),b.set(c)},close:function(){this.options,this.g._removeWindowMask(),this.messageBox.remove()},_applyWindowMask:function(){this.options,a(".l-window-mask").remove(),a("<div class='l-window-mask' style='display: block;'></div>").appendTo(a("body"))},_removeWindowMask:function(){this.options,a(".l-window-mask").remove()},_applyDrag:function(){var b=this,c=this.options;c.isDrag&&a.fn.ligerDrag&&b.messageBox.ligerDrag({handler:".l-messagebox-title-inner",animate:!1})},_setImage:function(){var b=this,c=this.options;c.type&&("success"==c.type||"donne"==c.type?(a(".l-messagebox-image",b.messageBox).addClass("l-messagebox-image-donne").show(),a(".l-messagebox-content",b.messageBox).css({paddingLeft:64,paddingBottom:30})):"error"==c.type?(a(".l-messagebox-image",b.messageBox).addClass("l-messagebox-image-error").show(),a(".l-messagebox-content",b.messageBox).css({paddingLeft:64,paddingBottom:30})):"warn"==c.type?(a(".l-messagebox-image",b.messageBox).addClass("l-messagebox-image-warn").show(),a(".l-messagebox-content",b.messageBox).css({paddingLeft:64,paddingBottom:30})):"question"==c.type&&(a(".l-messagebox-image",b.messageBox).addClass("l-messagebox-image-question").show(),a(".l-messagebox-content",b.messageBox).css({paddingLeft:64,paddingBottom:40})))}}),a.ligerMessageBox.show=function(b){return a.ligerMessageBox(b)},a.ligerMessageBox.alert=function(b,c,d,e){b=b||"",c=c||b;var f=function(a,b,c){c.close(),e&&e(a,b,c)};return p={title:b,content:c,buttons:[{text:"确定",onclick:f}]},d&&(p.type=d),a.ligerMessageBox(p)},a.ligerMessageBox.confirm=function(b,c,d){var e=function(a,b,c){c.close(),d&&d(0==b)};return p={type:"question",title:b,content:c,buttons:[{text:"是",onclick:e},{text:"否",onclick:e}]},a.ligerMessageBox(p)},a.ligerMessageBox.success=function(b,c,d){return a.ligerMessageBox.alert(b,c,"success",d)},a.ligerMessageBox.error=function(b,c,d){return a.ligerMessageBox.alert(b,c,"error",d)},a.ligerMessageBox.warn=function(b,c,d){return a.ligerMessageBox.alert(b,c,"warn",d)},a.ligerMessageBox.question=function(b,c){return a.ligerMessageBox.alert(b,c,"question")}}(jQuery),function(a){a.fn.ligerRadio=function(){return a.ligerui.run.call(this,"ligerRadio",arguments)},a.fn.ligerGetRadioManager=function(){return a.ligerui.run.call(this,"ligerGetRadioManager",arguments)},a.ligerDefaults.Radio={disabled:!1},a.ligerMethos.Radio={},a.ligerui.controls.Radio=function(b,c){a.ligerui.controls.Radio.base.constructor.call(this,b,c)},a.ligerui.controls.Radio.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"Radio"},__idPrev:function(){return"Radio"},_extendMethods:function(){return a.ligerMethos.Radio},_render:function(){var b=this,c=this.options;b.input=a(this.element),b.link=a('<a href="javascript:void(0)" class="l-radio"></a>'),b.wrapper=b.input.addClass("l-hidden").wrap('<div class="l-radio-wrapper"></div>').parent(),b.wrapper.prepend(b.link),b.input.change(function(){return this.checked?b.link.addClass("l-radio-checked"):b.link.removeClass("l-radio-checked"),!0
}),b.link.click(function(){b._doclick()}),b.wrapper.hover(function(){c.disabled||a(this).addClass("l-over")},function(){a(this).removeClass("l-over")}),this.element.checked&&b.link.addClass("l-radio-checked"),this.element.id&&a("label[for="+this.element.id+"]").click(function(){b._doclick()}),b.set(c)},setValue:function(a){var b=this;this.options,a?(b.input[0].checked=!0,b.link.addClass("l-radio-checked")):(b.input[0].checked=!1,b.link.removeClass("l-radio-checked"))},getValue:function(){return this.input[0].checked},setEnabled:function(){this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"),this.options.disabled=!1},setDisabled:function(){this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled"),this.options.disabled=!0},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")},_doclick:function(){var d,b=this;return this.options,b.input.attr("disabled")?!1:(b.input.trigger("click").trigger("change"),d=b.input[0].form?b.input[0].form:document,a("input:radio[name="+b.input[0].name+"]",d).not(b.input).trigger("change"),!1)}})}(jQuery),function(a){a.fn.ligerResizable=function(){return a.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},a.fn.ligerGetResizableManager=function(){return a.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},a.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(){},onResize:function(){},onStopResize:function(){},onEndResize:null},a.ligerui.controls.Resizable=function(b){a.ligerui.controls.Resizable.base.constructor.call(this,null,b)},a.ligerui.controls.Resizable.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var b=this,c=this.options;b.target=a(c.target),b.set(c),b.target.mousemove(function(d){if(!c.disabled&&(b.dir=b._getDir(d),b.dir?b.target.css("cursor",b.dir+"-resize"):b.target.css("cursor").indexOf("-resize")>0&&b.target.css("cursor","default"),c.target.ligeruidragid)){var e=a.ligerui.get(c.target.ligeruidragid);e&&b.dir?e.set("disabled",!0):e&&e.set("disabled",!1)}}).mousedown(function(a){c.disabled||b.dir&&b._start(a)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(b){var c=this,d=this.options,e="",f=c.target.offset(),g=c.target.width(),h=c.target.height(),i=d.scope,j=b.pageX||b.screenX,k=b.pageY||b.screenY;return k>=f.top&&k<f.top+i?e+="n":k<=f.top+h&&k>f.top+h-i&&(e+="s"),j>=f.left&&j<f.left+i?e+="w":j<=f.left+g&&j>f.left+g-i&&(e+="e"),"all"==d.handles||""==e?e:-1!=a.inArray(e,c.handles)?e:""},_setHandles:function(a){a&&(this.handles=a.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var b=this;b.proxy=a('<div class="l-resizable"></div>'),b.proxy.width(b.target.width()).height(b.target.height()),b.proxy.attr("resizableid",b.id).appendTo("body")},_removeProxy:function(){var a=this;a.proxy&&(a.proxy.remove(),a.proxy=null)},_start:function(b){var c=this;this.options,c._createProxy(),c.proxy.css({left:c.target.offset().left,top:c.target.offset().top,position:"absolute"}),c.current={dir:c.dir,left:c.target.offset().left,top:c.target.offset().top,startX:b.pageX||b.screenX,startY:b.pageY||b.clientY,width:c.target.width(),height:c.target.height()},a(document).bind("selectstart.resizable",function(){return!1}),a(document).bind("mouseup.resizable",function(){c._stop.apply(c,arguments)}),a(document).bind("mousemove.resizable",function(){c._drag.apply(c,arguments)}),c.proxy.show(),c.trigger("startResize",[c.current,b])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(a){var d,e,b=this;this.options,b.current&&b.proxy&&(b.proxy.css("cursor",""==b.current.dir?"default":b.current.dir+"-resize"),d=a.pageX||a.screenX,e=a.pageY||a.screenY,b.current.diffX=d-b.current.startX,b.current.diffY=e-b.current.startY,b._applyResize(b.proxy),b.trigger("resize",[b.current,a]))},_stop:function(b){var c=this;this.options,c.hasBind("stopResize")?0!=c.trigger("stopResize",[c.current,b])&&c._applyResize():c._applyResize(),c._removeProxy(),c.trigger("endResize",[c.current,b]),a(document).unbind("selectstart.resizable"),a(document).unbind("mousemove.resizable"),a(document).unbind("mouseup.resizable")},_applyResize:function(b){var c=this,d=this.options,e={left:c.current.left,top:c.current.top,width:c.current.width,height:c.current.height},f=!1;b||(b=c.target,f=!0,e.top=isNaN(parseInt(c.target.css("top")))?0:parseInt(c.target.css("top")),e.left=isNaN(parseInt(c.target.css("left")))?0:parseInt(c.target.css("left"))),a.inArray(c.current.dir,c.changeBy.l)>-1?(e.left+=c.current.diffX,c.current.diffLeft=c.current.diffX):f&&delete e.left,a.inArray(c.current.dir,c.changeBy.t)>-1?(e.top+=c.current.diffY,c.current.diffTop=c.current.diffY):f&&delete e.top,a.inArray(c.current.dir,c.changeBy.w)>-1?(e.width+=(-1==c.current.dir.indexOf("w")?1:-1)*c.current.diffX,c.current.newWidth=e.width):f&&delete e.width,a.inArray(c.current.dir,c.changeBy.h)>-1?(e.height+=(-1==c.current.dir.indexOf("n")?1:-1)*c.current.diffY,c.current.newHeight=e.height):f&&delete e.height,f&&d.animate?b.animate(e):b.css(e)}})}(jQuery),function(a){a.fn.ligerSpinner=function(){return a.ligerui.run.call(this,"ligerSpinner",arguments)},a.fn.ligerGetSpinnerManager=function(){return a.ligerui.run.call(this,"ligerGetSpinnerManager",arguments)},a.ligerDefaults.Spinner={type:"float",isNegative:!0,decimalplace:2,step:1,interval:50,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1},a.ligerMethos.Spinner={},a.ligerui.controls.Spinner=function(b,c){a.ligerui.controls.Spinner.base.constructor.call(this,b,c)},a.ligerui.controls.Spinner.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return a.ligerMethos.Spinner},_init:function(){a.ligerui.controls.Spinner.base._init.call(this);var b=this.options;"float"==b.type?(b.step=1,b.interval=50):"int"==b.type?(b.step=1,b.interval=100):"time"==b.type&&(b.step=1,b.interval=100)},_render:function(){var b=this,c=this.options;b.interval=null,b.inputText=null,b.value=null,b.textFieldID="","input"==this.element.tagName.toLowerCase()&&this.element.type&&"text"==this.element.type?(b.inputText=a(this.element),this.element.id&&(b.textFieldID=this.element.id)):(b.inputText=a('<input type="text"/>'),b.inputText.appendTo(a(this.element))),""==b.textFieldID&&c.textFieldID&&(b.textFieldID=c.textFieldID),b.link=a('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>'),b.wrapper=b.inputText.wrap('<div class="l-text"></div>').parent(),b.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),b.wrapper.append(b.link).after(b.selectBox).after(b.valueField),b.link.up=a(".l-spinner-up",b.link),b.link.down=a(".l-spinner-down",b.link),b.inputText.addClass("l-text-field"),c.disabled&&b.wrapper.addClass("l-text-disabled"),b._isVerify(b.inputText.val())||(b.value=b._getDefaultValue(),b.inputText.val(b.value)),b.link.up.hover(function(){c.disabled||a(this).addClass("l-spinner-up-over")},function(){clearInterval(b.interval),a(document).unbind("selectstart.spinner"),a(this).removeClass("l-spinner-up-over")}).mousedown(function(){c.disabled||(b._uping.call(b),b.interval=setInterval(function(){b._uping.call(b)},c.interval),a(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(b.interval),b.inputText.trigger("change").focus(),a(document).unbind("selectstart.spinner")}),b.link.down.hover(function(){c.disabled||a(this).addClass("l-spinner-down-over")},function(){clearInterval(b.interval),a(document).unbind("selectstart.spinner"),a(this).removeClass("l-spinner-down-over")}).mousedown(function(){c.disabled||(b.interval=setInterval(function(){b._downing.call(b)},c.interval),a(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(b.interval),b.inputText.trigger("change").focus(),a(document).unbind("selectstart.spinner")}),b.inputText.change(function(){var a=b.inputText.val();b.value=b._getVerifyValue(a),b.trigger("changeValue",[b.value]),b.inputText.val(b.value)}).blur(function(){b.wrapper.removeClass("l-text-focus")}).focus(function(){b.wrapper.addClass("l-text-focus")}),b.wrapper.hover(function(){c.disabled||b.wrapper.addClass("l-text-over")},function(){b.wrapper.removeClass("l-text-over")}),b.set(c)},_setWidth:function(a){var b=this;a>20&&(b.wrapper.css({width:a}),b.inputText.css({width:a-20}))},_setHeight:function(a){var b=this;a>10&&(b.wrapper.height(a),b.inputText.height(a-2),b.link.height(a-4))},_setDisabled:function(a){a?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},setValue:function(a){this.inputText.val(a)},getValue:function(){return this.inputText.val()},_round:function(a,b){this.options;for(var e=1;b>0;e*=10,b--);for(;0>b;e/=10,b++);return Math.round(a*e)/e},_isInt:function(a){var c=this.options,d=c.isNegative?/^-?\d+$/:/^\d+$/;return d.test(a)?parseFloat(a)!=a?!1:!0:!1},_isFloat:function(a){var c=this.options,d=c.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;return d.test(a)?parseFloat(a)!=a?!1:!0:!1},_isTime:function(a){this.options;var d=a.match(/^(\d{1,2}):(\d{1,2})$/);return null==d?!1:d[1]>24||d[2]>60?!1:!0},_isVerify:function(a){var d,b=this,c=this.options;return"float"==c.type?b._isFloat(a)?(d=parseFloat(a),void 0!=c.minValue&&c.minValue>d?!1:void 0!=c.maxValue&&c.maxValue<d?!1:!0):!1:"int"==c.type?b._isInt(a)?(d=parseInt(a),void 0!=c.minValue&&c.minValue>d?!1:void 0!=c.maxValue&&c.maxValue<d?!1:!0):!1:"time"==c.type?b._isTime(a):!1},_getVerifyValue:function(a){var b=this,c=this.options,d="";return"float"==c.type?d=b._round(a,c.decimalplace):"int"==c.type?d=parseInt(a):"time"==c.type&&(d=a),b._isVerify(d)?d:b.value},_isOverValue:function(a){var c=this.options;return null!=c.minValue&&c.minValue>a?!0:null!=c.maxValue&&c.maxValue<a?!0:!1},_getDefaultValue:function(){var b=this.options;return"float"==b.type||"int"==b.type?0:"time"==b.type?"00:00":void 0},_addValue:function(a){var d,b=this;this.options,d=b.inputText.val(),d=parseFloat(d)+a,b._isOverValue(d)||(b.inputText.val(d),b.inputText.trigger("change"))},_addTime:function(a){var d,e,b=this;this.options,d=b.inputText.val(),e=d.match(/^(\d{1,2}):(\d{1,2})$/),newminute=parseInt(e[2])+a,10>newminute&&(newminute="0"+newminute),d=e[1]+":"+newminute,b._isOverValue(d)||(b.inputText.val(d),b.inputText.trigger("change"))},_uping:function(){var a=this,b=this.options;"float"==b.type||"int"==b.type?a._addValue(b.step):"time"==b.type&&a._addTime(b.step)},_downing:function(){var a=this,b=this.options;"float"==b.type||"int"==b.type?a._addValue(-1*b.step):"time"==b.type&&a._addTime(-1*b.step)},_isDateTime:function(a){var d,e;return this.options,d=a.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/),null==d?!1:(e=new Date(d[1],d[3]-1,d[4]),"NaN"==e?!1:e.getFullYear()==d[1]&&e.getMonth()+1==d[3]&&e.getDate()==d[4])},_isLongDateTime:function(a){var d,e,f;return this.options,d=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/,e=a.match(d),null==e?!1:(f=new Date(e[1],e[3]-1,e[4],e[5],e[6]),"NaN"==f?!1:f.getFullYear()==e[1]&&f.getMonth()+1==e[3]&&f.getDate()==e[4]&&f.getHours()==e[5]&&f.getMinutes()==e[6])}})}(jQuery),function(a){a.fn.ligerTab=function(){return a.ligerui.run.call(this,"ligerTab",arguments)},a.fn.ligerGetTabManager=function(){return a.ligerui.run.call(this,"ligerGetTabManager",arguments)},a.ligerDefaults.Tab={height:null,heightDiff:0,changeHeightOnResize:!1,contextmenu:!0,dblClickToClose:!1,dragToMove:!1,onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null},a.ligerDefaults.TabString={closeMessage:"关闭当前页",closeOtherMessage:"关闭其他",closeAllMessage:"关闭所有",reloadMessage:"刷新"},a.ligerMethos.Tab={},a.ligerui.controls.Tab=function(b,c){a.ligerui.controls.Tab.base.constructor.call(this,b,c)},a.ligerui.controls.Tab.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Tab"},__idPrev:function(){return"Tab"},_extendMethods:function(){return a.ligerMethos.Tab},_render:function(){var d,e,b=this,c=this.options;c.height&&(b.makeFullHeight=!0),b.tab=a(this.element),b.tab.addClass("l-tab"),c.contextmenu&&a.ligerMenu&&(b.tab.menu=a.ligerMenu({width:100,items:[{text:c.closeMessage,id:"close",click:function(){b._menuItemClick.apply(b,arguments)}},{text:c.closeOtherMessage,id:"closeother",click:function(){b._menuItemClick.apply(b,arguments)}},{text:c.closeAllMessage,id:"closeall",click:function(){b._menuItemClick.apply(b,arguments)}},{text:c.reloadMessage,id:"reload",click:function(){b._menuItemClick.apply(b,arguments)}}]})),b.tab.content=a('<div class="l-tab-content"></div>'),a("> div",b.tab).appendTo(b.tab.content),b.tab.content.appendTo(b.tab),b.tab.links=a('<div class="l-tab-links"><ul style="left: 0px; "></ul></div>'),b.tab.links.prependTo(b.tab),b.tab.links.ul=a("ul",b.tab.links),d=a("> div[lselected=true]",b.tab.content),e=d.length>0,b.selectedTabId=d.attr("tabid"),a("> div",b.tab.content).each(function(c){var h,i,j,k,f=a('<li class=""><a></a><div class="l-tab-links-item-left"></div><div class="l-tab-links-item-right"></div></li>'),g=a(this);g.attr("title")&&(a("> a",f).html(g.attr("title")),g.attr("title","")),h=g.attr("tabid"),void 0==h&&(h=b.getNewTabid(),g.attr("tabid",h),g.attr("lselected")&&(b.selectedTabId=h)),f.attr("tabid",h),e||0!=c||(b.selectedTabId=h),i=g.attr("showClose"),i&&f.append("<div class='l-tab-links-item-close'></div>"),a("> ul",b.tab.links).append(f),g.hasClass("l-tab-content-item")||g.addClass("l-tab-content-item"),g.find("iframe").length>0&&(j=a("iframe:first",g),"complete"!=j[0].readyState&&(0==g.find(".l-tab-loading:first").length&&g.prepend("<div class='l-tab-loading' style='display:block;'></div>"),k=a(".l-tab-loading:first",g),j.bind("load.tab",function(){k.hide()})))}),b.selectTabItem(b.selectedTabId),c.height&&("string"==typeof c.height&&c.height.indexOf("%")>0?(b.onResize(),c.changeHeightOnResize&&a(window).resize(function(){b.onResize.call(b)})):b.setHeight(c.height)),b.makeFullHeight&&b.setContentHeight(),a("li",b.tab.links).each(function(){b._addTabItemEvent(a(this))}),b.tab.bind("dblclick.tab",function(d){var e,f,g,h;c.dblClickToClose&&(b.dblclicking=!0,e=d.target||d.srcElement,f=e.tagName.toLowerCase(),"a"==f&&(g=a(e).parent().attr("tabid"),h=a(e).parent().find("div.l-tab-links-item-close").length?!0:!1,h&&b.removeTabItem(g)),b.dblclicking=!1)}),b.set(c)},_applyDrag:function(b){var e,c=this;return this.options,c.droptip=c.droptip||a("<div class='l-tab-drag-droptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),e=a(b).ligerDrag({revert:!0,animate:!1,proxy:function(){var b=a(this).find("a").html();return c.dragproxy=a("<div class='l-tab-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body"),c.dragproxy.append(b),c.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(c,d){if(!a(b).hasClass("l-selected"))return!1;if(2==d.button)return!1;var e=d.srcElement||d.target;return a(e).hasClass("l-tab-links-item-close")?!1:void 0},onDrag:function(b,d){var e,f;null==c.dropIn&&(c.dropIn=-1),e=c.tab.links.ul.find(">li"),f=e.index(b.target),e.each(function(b){var g,h,i,j,k;f!=b&&(g=b>f,(-1==c.dropIn||c.dropIn==b)&&(h=a(this).offset(),i={top:h.top,bottom:h.top+a(this).height(),left:h.left-10,right:h.left+10},g&&(i.left+=a(this).width(),i.right+=a(this).width()),j=d.pageX||d.screenX,k=d.pageY||d.screenY,j>i.left&&j<i.right&&k>i.top&&k<i.bottom?(c.droptip.css({left:i.left+5,top:i.top-9}).show(),c.dropIn=b,c.dragproxy.find(".l-drop-icon").removeClass("l-drop-no").addClass("l-drop-yes")):(c.dropIn=-1,c.droptip.hide(),c.dragproxy.find(".l-drop-icon").removeClass("l-drop-yes").addClass("l-drop-no"))))})},onStopDrag:function(b){var e,f;c.dropIn>-1&&(e=c.tab.links.ul.find(">li:eq("+c.dropIn+")").attr("tabid"),f=a(b.target).attr("tabid"),setTimeout(function(){c.moveTabItem(f,e)},0),c.dropIn=-1,c.dragproxy.remove()),c.droptip.hide(),this.set("cursor","default")}})},_setDragToMove:function(b){if(a.fn.ligerDrag){var c=this;if(this.options,b){if(c.drags)return;c.drags=c.drags||[],c.tab.links.ul.find(">li").each(function(){c.drags.push(c._applyDrag(this))})}}},moveTabItem:function(a,b){var c=this,d=c.tab.links.ul.find(">li[tabid="+a+"]"),e=c.tab.links.ul.find(">li[tabid="+b+"]"),f=c.tab.links.ul.find(">li").index(d),g=c.tab.links.ul.find(">li").index(e);g>f?e.after(d):e.before(d)},setTabButton:function(){var d,e,b=this;return this.options,d=0,a("li",b.tab.links.ul).each(function(){d+=a(this).width()+2}),e=b.tab.width(),d>e?(b.tab.links.append('<div class="l-tab-links-left"></div><div class="l-tab-links-right"></div>'),b.setTabButtonEven(),!0):(b.tab.links.ul.animate({left:0}),a(".l-tab-links-left,.l-tab-links-right",b.tab.links).remove(),!1)},setTabButtonEven:function(){var b=this;this.options,a(".l-tab-links-left",b.tab.links).hover(function(){a(this).addClass("l-tab-links-left-over")},function(){a(this).removeClass("l-tab-links-left-over")}).click(function(){b.moveToPrevTabItem()}),a(".l-tab-links-right",b.tab.links).hover(function(){a(this).addClass("l-tab-links-right-over")},function(){a(this).removeClass("l-tab-links-right-over")}).click(function(){b.moveToNextTabItem()})},moveToPrevTabItem:function(){var d,e,f,g,b=this;for(this.options,d=a(".l-tab-links-left",b.tab.links).width(),e=new Array,a("li",b.tab.links).each(function(b){var f=-1*d;b>0&&(f=parseInt(e[b-1])+a(this).prev().width()+2),e.push(f)}),f=-1*parseInt(b.tab.links.ul.css("left")),g=0;g<e.length-1;g++)if(e[g]<f&&e[g+1]>=f)return b.tab.links.ul.animate({left:-1*parseInt(e[g])}),void 0},moveToNextTabItem:function(){var d,e,f,g,h,i,j,k,l,b=this;for(this.options,d=a(".l-tab-links-right",b.tab).width(),e=0,f=a("li",b.tab.links.ul),f.each(function(){e+=a(this).width()+2}),g=b.tab.width(),h=new Array,i=f.length-1;i>=0;i--)j=e-g+d+2,i!=f.length-1&&(j=parseInt(h[f.length-2-i])-a(f[i+1]).width()-2),h.push(j);for(k=-1*parseInt(b.tab.links.ul.css("left")),l=1;l<h.length;l++)if(h[l]<=k&&h[l-1]>k)return b.tab.links.ul.animate({left:-1*parseInt(h[l-1])}),void 0},getTabItemCount:function(){var b=this;return this.options,a("li",b.tab.links.ul).length},getSelectedTabItemID:function(){var b=this;return this.options,a("li.l-selected",b.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){var a=this;this.options,a.removeTabItem(a.getSelectedTabItemID())},overrideSelectedTabItem:function(a){var b=this;this.options,b.overrideTabItem(b.getSelectedTabItemID(),a)},overrideTabItem:function(b,c){var f,g,h,j,k,l,m,n,d=this;return this.options,0==d.trigger("beforeOverrideTabItem",[b])?!1:(f=c.tabid,void 0==f&&(f=d.getNewTabid()),g=c.url,h=c.content,c.target,j=c.text,k=c.showClose,l=c.height,d.isTabItemExist(f)||(m=a("li[tabid="+b+"]",d.tab.links.ul),n=a(".l-tab-content-item[tabid="+b+"]",d.tab.content),m&&n&&(m.attr("tabid",f),n.attr("tabid",f),0==a("iframe",n).length&&g?n.html("<iframe frameborder='0'></iframe>"):h&&n.html(h),a("iframe",n).attr("name",f),void 0==k&&(k=!0),0==k?a(".l-tab-links-item-close",m).remove():0==a(".l-tab-links-item-close",m).length&&m.append("<div class='l-tab-links-item-close'></div>"),void 0==j&&(j=f),l&&n.height(l),a("a",m).text(j),a("iframe",n).attr("src",g),d.trigger("afterOverrideTabItem",[b]))),void 0)},selectTabItem:function(b){var c=this;return this.options,0==c.trigger("beforeSelectTabItem",[b])?!1:(c.selectedTabId=b,a("> .l-tab-content-item[tabid="+b+"]",c.tab.content).show().siblings().hide(),a("li[tabid="+b+"]",c.tab.links.ul).addClass("l-selected").siblings().removeClass("l-selected"),c.trigger("afterSelectTabItem",[b]),void 0)},moveToLastTabItem:function(){var d,e,f,b=this;this.options,d=0,a("li",b.tab.links.ul).each(function(){d+=a(this).width()+2}),e=b.tab.width(),d>e&&(f=a(".l-tab-links-right",b.tab.links).width(),b.tab.links.ul.animate({left:-1*(d-e+f+2)}))},isTabItemExist:function(b){var c=this;return this.options,a("li[tabid="+b+"]",c.tab.links.ul).length>0},addTabItem:function(b){var e,f,g,h,i,j,k,l,m,n,o,c=this,d=this.options;return 0==c.trigger("beforeAddTabItem",[e])?!1:(e=b.tabid,void 0==e&&(e=c.getNewTabid()),f=b.url,g=b.content,h=b.text,i=b.showClose,j=b.height,c.isTabItemExist(e)?(c.selectTabItem(e),void 0):(k=a("<li><a></a><div class='l-tab-links-item-left'></div><div class='l-tab-links-item-right'></div><div class='l-tab-links-item-close'></div></li>"),l=a("<div class='l-tab-content-item'><div class='l-tab-loading' style='display:block;'></div><iframe frameborder='0'></iframe></div>"),m=a("div:first",l),n=a("iframe:first",l),c.makeFullHeight&&(o=c.tab.height()-c.tab.links.height(),l.height(o)),k.attr("tabid",e),l.attr("tabid",e),f?n.attr("name",e).attr("id",e).attr("src",f).bind("load.tab",function(){m.hide(),b.callback&&b.callback()}):(n.remove(),m.remove()),g?l.html(g):b.target&&l.append(b.target),void 0==i&&(i=!0),0==i&&a(".l-tab-links-item-close",k).remove(),void 0==h&&(h=e),j&&l.height(j),a("a",k).text(h),c.tab.links.ul.append(k),c.tab.content.append(l),c.selectTabItem(e),c.setTabButton()&&c.moveToLastTabItem(),c._addTabItemEvent(k),d.dragToMove&&a.fn.ligerDrag&&(c.drags=c.drags||[],k.each(function(){c.drags.push(c._applyDrag(this))})),c.trigger("afterAddTabItem",[e]),void 0))},_addTabItemEvent:function(b){var c=this;this.options,b.click(function(){var b=a(this).attr("tabid");c.selectTabItem(b)}),c.tab.menu&&c._addTabItemContextMenuEven(b),a(".l-tab-links-item-close",b).hover(function(){a(this).addClass("l-tab-links-item-close-over")},function(){a(this).removeClass("l-tab-links-item-close-over")}).click(function(){var b=a(this).parent().attr("tabid");c.removeTabItem(b)})},removeTabItem:function(b){var e,c=this;return this.options,0==c.trigger("beforeRemoveTabItem",[b])?!1:(e=a("li[tabid="+b+"]",c.tab.links.ul).hasClass("l-selected"),e&&(a(".l-tab-content-item[tabid="+b+"]",c.tab.content).prev().show(),a("li[tabid="+b+"]",c.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected")),a(".l-tab-content-item[tabid="+b+"]",c.tab.content).remove(),a("li[tabid="+b+"]",c.tab.links.ul).remove(),c.setTabButton(),c.trigger("afterRemoveTabItem",[b]),void 0)},addHeight:function(a){var d,b=this;this.options,d=b.tab.height()+a,b.setHeight(d)},setHeight:function(a){var b=this;this.options,b.tab.height(a),b.setContentHeight()},setContentHeight:function(){var d,b=this;this.options,d=b.tab.height()-b.tab.links.height(),b.tab.content.height(d),a("> .l-tab-content-item",b.tab.content).height(d)},getNewTabid:function(){var a=this;return this.options,a.getnewidcount=a.getnewidcount||0,"tabitem"+ ++a.getnewidcount},getTabidList:function(b,c){var f,d=this;return this.options,f=[],a("> li",d.tab.links.ul).each(function(){a(this).attr("tabid")&&a(this).attr("tabid")!=b&&(!c||a(".l-tab-links-item-close",this).length>0)&&f.push(a(this).attr("tabid"))}),f},removeOther:function(b){var f,d=this;this.options,f=d.getTabidList(b,!0),a(f).each(function(){d.removeTabItem(this)})},reload:function(b){var e,f,g,h;this.options,e=a(".l-tab-content-item[tabid="+b+"]"),f=a(".l-tab-loading:first",e),g=a("iframe:first",e),h=a(g).attr("src"),f.show(),g.attr("src",h).unbind("load.tab").bind("load.tab",function(){f.hide()})},removeAll:function(){var e,c=this;this.options,e=c.getTabidList(null,!0),a(e).each(function(){c.removeTabItem(this)})},onResize:function(){var d,b=this,c=this.options;return c.height&&"string"==typeof c.height&&-1!=c.height.indexOf("%")?("body"==b.tab.parent()[0].tagName.toLowerCase()?(d=a(window).height(),d-=parseInt(b.tab.parent().css("paddingTop")),d-=parseInt(b.tab.parent().css("paddingBottom")),b.height=c.heightDiff+.01*d*parseFloat(b.height)):b.height=c.heightDiff+.01*b.tab.parent().height()*parseFloat(c.height),b.tab.height(b.height),b.setContentHeight(),void 0):!1},_menuItemClick:function(a){var b=this;if(this.options,a.id&&b.actionTabid)switch(a.id){case"close":b.removeTabItem(b.actionTabid),b.actionTabid=null;break;case"closeother":b.removeOther(b.actionTabid);break;case"closeall":b.removeAll(),b.actionTabid=null;break;case"reload":b.selectTabItem(b.actionTabid),b.reload(b.actionTabid)}},_addTabItemContextMenuEven:function(b){var c=this;this.options,b.bind("contextmenu",function(d){return c.tab.menu?(c.actionTabid=b.attr("tabid"),c.tab.menu.show({top:d.pageY,left:d.pageX}),0==a(".l-tab-links-item-close",this).length?c.tab.menu.setDisabled("close"):c.tab.menu.setEnabled("close"),!1):void 0})}})}(jQuery),function(a){a.fn.ligerTextBox=function(){return a.ligerui.run.call(this,"ligerTextBox",arguments)},a.fn.ligerGetTextBoxManager=function(){return a.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)},a.ligerDefaults.TextBox={onChangeValue:null,width:null,disabled:!1,value:null,nullText:null,digits:!1,number:!1},a.ligerui.controls.TextBox=function(b,c){a.ligerui.controls.TextBox.base.constructor.call(this,b,c)},a.ligerui.controls.TextBox.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){a.ligerui.controls.TextBox.base._init.call(this);var b=this,c=this.options;c.width||(c.width=a(b.element).width()),a(this.element).attr("readonly")&&(c.disabled=!0)},_render:function(){var b=this,c=this.options;b.inputText=a(this.element),b.wrapper=b.inputText.wrap('<div class="l-text"></div>').parent(),b.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),b.inputText.hasClass("l-text-field")||b.inputText.addClass("l-text-field"),this._setEvent(),b.set(c),b.checkValue()},_getValue:function(){return this.inputText.val()},_setNullText:function(){this.checkNotNull()},checkValue:function(){var a=this,b=this.options,c=a.inputText.val();return b.number&&!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(c)||b.digits&&!/^\d+$/.test(c)?(a.inputText.val(a.value||0),void 0):(a.value=c,void 0)},checkNotNull:function(){var a=this,b=this.options;b.nullText&&!b.disabled&&(a.inputText.val()||a.inputText.addClass("l-text-field-null").val(b.nullText))},_setEvent:function(){var b=this,c=this.options;b.inputText.bind("blur.textBox",function(){b.trigger("blur"),b.checkNotNull(),b.checkValue(),b.wrapper.removeClass("l-text-focus")}).bind("focus.textBox",function(){b.trigger("focus"),c.nullText&&a(this).hasClass("l-text-field-null")&&a(this).removeClass("l-text-field-null").val(""),b.wrapper.addClass("l-text-focus")}).change(function(){b.trigger("changeValue",[this.value])}),b.wrapper.hover(function(){b.trigger("mouseOver"),b.wrapper.addClass("l-text-over")},function(){b.trigger("mouseOut"),b.wrapper.removeClass("l-text-over")})},_setDisabled:function(a){a?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("l-text-disabled")):(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("l-text-disabled"))},_setWidth:function(a){a>20&&(this.wrapper.css({width:a}),this.inputText.css({width:a-4}))},_setHeight:function(a){a>10&&(this.wrapper.height(a),this.inputText.height(a-2))},_setValue:function(a){null!=a&&this.inputText.val(a)},_setLabel:function(b){var e,c=this,d=this.options;c.labelwrapper?c.labelwrapper.find(".l-text-label").html(b+":&nbsp"):(c.labelwrapper=c.wrapper.wrap('<div class="l-labeltext"></div>').parent(),e=a('<div class="l-text-label" style="float:left;">'+b+":&nbsp</div>"),c.labelwrapper.prepend(e),c.wrapper.css("float","left"),d.labelWidth?c._setLabelWidth(d.labelWidth):d.labelWidth=e.width(),e.height(c.wrapper.height()),d.labelAlign&&c._setLabelAlign(d.labelAlign),c.labelwrapper.append('<br style="clear:both;" />'),c.labelwrapper.width(d.labelWidth+d.width+2))},_setLabelWidth:function(a){var b=this;this.options,b.labelwrapper&&b.labelwrapper.find(".l-text-label").width(a)},_setLabelAlign:function(a){var b=this;this.options,b.labelwrapper&&b.labelwrapper.find(".l-text-label").css("text-align",a)},updateStyle:function(){var a=this,b=this.options;a.inputText.attr("disabled")||a.inputText.attr("readonly")?(a.wrapper.addClass("l-text-disabled"),a.options.disabled=!0):(a.wrapper.removeClass("l-text-disabled"),a.options.disabled=!1),a.inputText.hasClass("l-text-field-null")&&a.inputText.val()!=b.nullText&&a.inputText.removeClass("l-text-field-null"),a.checkValue()}})}(jQuery),function(a){a.ligerTip=function(){return a.ligerui.run.call(null,"ligerTip",arguments)},a.fn.ligerTip=function(b){return this.each(function(){var c=a.extend({},a.ligerDefaults.ElementTip,b||{});if(c.target=c.target||this,c.auto||void 0==b)c.content||(c.content=this.title,c.removeTitle&&a(this).removeAttr("title")),c.content=c.content||this.title,a(this).bind("mouseover.tip",function(){c.x=a(this).offset().left+a(this).width()+(c.distanceX||0),c.y=a(this).offset().top+(c.distanceY||0),a.ligerTip(c)}).bind("mouseout.tip",function(){var b=a.ligerui.managers[this.ligeruitipid];b&&b.remove()});else{if(c.target.ligeruitipid)return;c.x=a(this).offset().left+a(this).width()+(c.distanceX||0),c.y=a(this).offset().top+(c.distanceY||0),c.x=c.x||0,c.y=c.y||0,a.ligerTip(c)}}),a.ligerui.get(this,"ligeruitipid")},a.fn.ligerHideTip=function(b){return this.each(function(){var d,e,f,c=b||{};if(void 0==c.isLabel&&(c.isLabel="label"==this.tagName.toLowerCase()&&null!=a(this).attr("for")),d=this,c.isLabel){if(e=a("#"+a(this).attr("for")),0==e.length)return;d=e[0]}f=a.ligerui.managers[d.ligeruitipid],f&&f.remove()}).unbind("mouseover.tip").unbind("mouseout.tip")},a.fn.ligerGetTipManager=function(){return a.ligerui.get(this)},a.ligerDefaults=a.ligerDefaults||{},a.ligerDefaults.HideTip={},a.ligerDefaults.Tip={content:null,callback:null,width:150,height:null,x:0,y:0,appendIdTo:null,target:null,auto:null,removeTitle:!0},a.ligerDefaults.ElementTip={distanceX:1,distanceY:-3,auto:null,removeTitle:!0},a.ligerMethos.Tip={},a.ligerui.controls.Tip=function(b){a.ligerui.controls.Tip.base.constructor.call(this,null,b)},a.ligerui.controls.Tip.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Tip"},__idPrev:function(){return"Tip"},_extendMethods:function(){return a.ligerMethos.Tip},_render:function(){var b=this,c=this.options,d=a('<div class="l-verify-tip"><div class="l-verify-tip-corner"></div><div class="l-verify-tip-content"></div></div>');b.tip=d,b.tip.attr("id",b.id),c.content&&(a("> .l-verify-tip-content:first",d).html(c.content),d.appendTo("body"),d.css({left:c.x,top:c.y}).show(),c.width&&a("> .l-verify-tip-content:first",d).width(c.width-8),c.height&&a("> .l-verify-tip-content:first",d).width(c.height),eee=c.appendIdTo,c.appendIdTo&&c.appendIdTo.attr("ligerTipId",b.id),c.target&&(a(c.target).attr("ligerTipId",b.id),c.target.ligeruitipid=b.id),c.callback&&c.callback(d),b.set(c))},_setContent:function(b){a("> .l-verify-tip-content:first",this.tip).html(b)},remove:function(){this.options.appendIdTo&&this.options.appendIdTo.removeAttr("ligerTipId"),this.options.target&&(a(this.options.target).removeAttr("ligerTipId"),this.options.target.ligeruitipid=null),this.tip.remove()}})}(jQuery),function(a){a.fn.ligerToolBar=function(){return a.ligerui.run.call(this,"ligerToolBar",arguments)},a.fn.ligerGetToolBarManager=function(){return a.ligerui.run.call(this,"ligerGetToolBarManager",arguments)},a.ligerDefaults.ToolBar={},a.ligerMethos.ToolBar={},a.ligerui.controls.ToolBar=function(b,c){a.ligerui.controls.ToolBar.base.constructor.call(this,b,c)},a.ligerui.controls.ToolBar.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"ToolBar"
},__idPrev:function(){return"ToolBar"},_extendMethods:function(){return a.ligerMethos.ToolBar},_render:function(){var b=this,c=this.options;b.toolBar=a(this.element),b.toolBar.addClass("l-toolbar"),b.set(c)},_setItems:function(b){var c=this;a(b).each(function(a,b){c.addItem(b)})},addItem:function(b){var e,c=this;return this.options,b.line?(c.toolBar.append('<div class="l-bar-separator"></div>'),void 0):(e=a('<div class="l-toolbar-item l-panel-btn"><span></span><div class="l-panel-btn-l"></div><div class="l-panel-btn-r"></div></div>'),c.toolBar.append(e),b.id&&e.attr("toolbarid",b.id),b.img?(e.append("<img src='"+b.img+"' />"),e.addClass("l-toolbar-item-hasicon")):b.icon&&(e.append("<div class='l-icon l-icon-"+b.icon+"'></div>"),e.addClass("l-toolbar-item-hasicon")),b.text&&a("span:first",e).html(b.text),b.disable&&e.addClass("l-toolbar-item-disable"),b.click&&e.click(function(){return b.click(b),!1}),e.hover(function(){a(this).addClass("l-panel-btn-over")},function(){a(this).removeClass("l-panel-btn-over")}),void 0)}})}(jQuery),function(a){a.fn.ligerTree=function(){return a.ligerui.run.call(this,"ligerTree",arguments)},a.fn.ligerGetTreeManager=function(){return a.ligerui.run.call(this,"ligerGetTreeManager",arguments)},a.ligerDefaults.Tree={url:null,data:null,checkbox:!0,autoCheckboxEven:!0,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:!0,nodeWidth:90,statusName:"__status",isLeaf:null,single:!1,onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},idFieldName:"id",parentIDFieldName:"pid",topParentIDValue:-1,onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},slide:!0,iconFieldName:"icon",nodeDraggable:!1,nodeDraggingRender:null,btnClickToToggleOnly:!0},a.ligerui.controls.Tree=function(b,c){a.ligerui.controls.Tree.base.constructor.call(this,b,c)},a.ligerui.controls.Tree.ligerExtend(a.ligerui.core.UIComponent,{_init:function(){a.ligerui.controls.Tree.base._init.call(this);var c=this.options;c.single&&(c.autoCheckboxEven=!1)},_render:function(){var b=this,c=this.options;b.set(c,!0),b.tree=a(b.element),b.tree.addClass("l-tree"),b.sysAttribute=["isexpand","ischecked","href","style"],b.loading=a("<div class='l-tree-loading'></div>"),b.tree.after(b.loading),b.data=[],b.maxOutlineLevel=1,b.treedataindex=0,b._applyTree(),b._setTreeEven(),b.set(c,!1)},_setTreeLine:function(a){a?this.tree.removeClass("l-tree-noline"):this.tree.addClass("l-tree-noline")},_setUrl:function(a){var b,c;a&&(b=this.options,c=b?b.param||{}:{},this.loadData(null,a,c))},_setData:function(a){a&&this.append(null,a)},setData:function(a){this.set("data",a)},getData:function(){return this.data},hasChildren:function(a){return this.options.isLeaf?this.options.isLeaf(a):a.children?!0:!1},getParent:function(b,c){var e,f,d=this;return b=d.getNodeDom(b),(e=d.getParentTreeItem(b,c))?(f=a(e).attr("treedataindex"),d._getDataNodeByTreeDataIndex(f)):null},getParentTreeItem:function(b,c){var e,f,g,h,d=this;if(b=d.getNodeDom(b),e=a(b),e.parent().hasClass("l-tree"))return null;if(void 0==c)return 0==e.parent().parent("li").length?null:e.parent().parent("li")[0];for(f=parseInt(e.attr("outlinelevel")),g=e,h=f-1;h>=c;h--)g=g.parent().parent("li");return g[0]},getChecked:function(){var d,b=this;return this.options,this.options.checkbox?(d=[],a(".l-checkbox-checked",b.tree).parent().parent("li").each(function(){var c=parseInt(a(this).attr("treedataindex"));d.push({target:this,data:b._getDataNodeByTreeDataIndex(b.data,c)})}),d):null},getSelected:function(){var d,e,b=this;return this.options,d={},d.target=a(".l-selected",b.tree).parent("li")[0],d.target?(e=parseInt(a(d.target).attr("treedataindex")),d.data=b._getDataNodeByTreeDataIndex(b.data,e),d):null},upgrade:function(b){var c=this;this.options,a(".l-note",b).each(function(){a(this).removeClass("l-note").addClass("l-expandable-open")}),a(".l-note-last",b).each(function(){a(this).removeClass("l-note-last").addClass("l-expandable-open")}),a("."+c._getChildNodeClassName(),b).each(function(){a(this).removeClass(c._getChildNodeClassName()).addClass(c._getParentNodeClassName(!0))})},demotion:function(b){var e,c=this;this.options,(b||"li"==b[0].tagName.toLowerCase())&&(e=a(b).hasClass("l-last"),a(".l-expandable-open",b).each(function(){a(this).removeClass("l-expandable-open").addClass(e?"l-note-last":"l-note")}),a(".l-expandable-close",b).each(function(){a(this).removeClass("l-expandable-close").addClass(e?"l-note-last":"l-note")}),a("."+c._getParentNodeClassName(!0),b).each(function(){a(this).removeClass(c._getParentNodeClassName(!0)).addClass(c._getChildNodeClassName())}))},collapseAll:function(){var b=this;this.options,a(".l-expandable-open",b.tree).click()},expandAll:function(){var b=this;this.options,a(".l-expandable-close",b.tree).click()},loadData:function(b,c,d){var g,e=this;this.options,e.loading.show(),g=d?"post":"get",d=d||[],a.ajax({type:g,url:c,data:d,dataType:"json",success:function(a){a&&(e.loading.hide(),e.append(b,a),e.trigger("success",[a]))},error:function(a,b,c){try{e.loading.hide(),e.trigger("error",[a,b,c])}catch(d){}}})},clear:function(){var b=this;this.options,a("> li",b.tree).each(function(){b.remove(this)})},getNodeDom:function(b){var c=this;return this.options,null==b?b:"string"==typeof b||"number"==typeof b?a("li[treedataindex="+b+"]",c.tree).get(0):"object"==typeof b&&"treedataindex"in b?c.getNodeDom(b["treedataindex"]):b},remove:function(b){var e,f,g,c=this,d=this.options;b=c.getNodeDom(b),e=parseInt(a(b).attr("treedataindex")),f=c._getDataNodeByTreeDataIndex(c.data,e),f&&c._setTreeDataStatus([f],"delete"),g=c.getParentTreeItem(b),d.checkbox&&c._setParentCheckboxStatus(a(b)),a(b).remove(),c._updateStyle(g?a("ul:first",g):c.tree)},_updateStyle:function(b){var e,f,c=this;this.options,e=a(" > li",b),f=e.length,f&&e.each(function(b){0!=b||a(this).hasClass("l-first")||a(this).addClass("l-first"),b!=f-1||a(this).hasClass("l-last")||a(this).addClass("l-last"),0==b&&b==f-1&&a(this).addClass("l-onlychild"),a("> div .l-note,> div .l-note-last",this).removeClass("l-note l-note-last").addClass(b==f-1?"l-note-last":"l-note"),c._setTreeItem(this,{isLast:b==f-1})})},update:function(b,c){var f,g,d=this,e=this.options;b=d.getNodeDom(b),f=parseInt(a(b).attr("treedataindex")),nodedata=d._getDataNodeByTreeDataIndex(d.data,f);for(g in c)nodedata[g]=c[g],g==e.textFieldName&&a("> .l-body > span",b).text(c[g])},append:function(b,c,d,e){var h,i,j,k,l,m,n,f=this,g=this.options;if(b=f.getNodeDom(b),0==f.trigger("beforeAppend",[b,c]))return!1;if(!c||!c.length)return!1;if(g.idFieldName&&g.parentIDFieldName&&(c=f.arrayToTree(c,g.idFieldName,g.parentIDFieldName)),f._addTreeDataIndexToData(c),f._setTreeDataStatus(c,"add"),null!=d&&(d=f.getNodeDom(d)),f.trigger("append",[b,c]),f._appendData(b,c),null==b)return h=f._getTreeHTMLByData(c,1,[],!0),h[h.length-1]=h[0]="",null!=d?(a(d)[e?"after":"before"](h.join("")),f._updateStyle(b?a("ul:first",b):f.tree)):(a("> li:last",f.tree).length>0&&f._setTreeItem(a("> li:last",f.tree)[0],{isLast:!1}),f.tree.append(h.join(""))),a(".l-body",f.tree).hover(function(){a(this).addClass("l-over")},function(){a(this).removeClass("l-over")}),f._upadteTreeWidth(),f.trigger("afterAppend",[b,c]),void 0;for(i=a(b),j=parseInt(i.attr("outlinelevel")),k=a("> ul",i).length>0,k||(i.append("<ul class='l-children'></ul>"),f.upgrade(b)),l=[],m=1;j-1>=m;m++)n=a(f.getParentTreeItem(b,m)),l.push(n.hasClass("l-last"));l.push(i.hasClass("l-last")),h=f._getTreeHTMLByData(c,j+1,l,!0),h[h.length-1]=h[0]="",null!=d?(a(d)[e?"after":"before"](h.join("")),f._updateStyle(b?a("ul:first",b):f.tree)):(a("> .l-children > li:last",i).length>0&&f._setTreeItem(a("> .l-children > li:last",i)[0],{isLast:!1}),a(">.l-children",b).append(h.join(""))),f._upadteTreeWidth(),a(">.l-children .l-body",b).hover(function(){a(this).addClass("l-over")},function(){a(this).removeClass("l-over")}),f.trigger("afterAppend",[b,c])},cancelSelect:function(b){var c=this,d=this.options,e=c.getNodeDom(b),f=a(e),g=parseInt(f.attr("treedataindex")),h=c._getDataNodeByTreeDataIndex(c.data,g),i=a(">div:first",f);d.checkbox?a(".l-checkbox",i).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"):i.removeClass("l-selected"),c.trigger("cancelSelect",[{data:h,target:f[0]}])},selectNode:function(b){var f,g,h,i,c=this,d=this.options,e=null;if("function"==typeof b)e=b;else{if("object"==typeof b)return f=a(b),g=parseInt(f.attr("treedataindex")),h=c._getDataNodeByTreeDataIndex(c.data,g),i=a(">div:first",f),d.checkbox?a(".l-checkbox",i).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"):i.addClass("l-selected"),c.trigger("select",[{data:h,target:f[0]}]),void 0;e=function(a){return a[d.idFieldName]?a[d.idFieldName].toString()==b.toString():!1}}a("li",c.tree).each(function(){var b=a(this),d=parseInt(b.attr("treedataindex")),f=c._getDataNodeByTreeDataIndex(c.data,d);e(f,d)?c.selectNode(this):c.cancelSelect(this)})},getTextByID:function(a){var b=this,c=this.options,d=b.getDataByID(a);return d?d[c.textFieldName]:""},getDataByID:function(b){var c=this,d=this.options,e=null;return a("li",c.tree).each(function(){var f,g,h;e||(f=a(this),g=parseInt(f.attr("treedataindex")),h=c._getDataNodeByTreeDataIndex(c.data,g),h[d.idFieldName].toString()==b.toString()&&(e=h))}),e},arrayToTree:function(a,b,c){var d,e,f,g,h,i,j;if(!a||!a.length)return[];for(d=[],e={},f=a.length,g=0;f>g;g++)h=a[g],e[h[b]]=h;for(g=0;f>g;g++)i=a[g],j=e[i[c]],j?(j.children=j.children||[],j.children.push(i)):d.push(i);return d},_getDataNodeByTreeDataIndex:function(a,b){var e,f,c=this;for(this.options,e=0;e<a.length;e++){if(a[e].treedataindex==b)return a[e];if(a[e].children&&(f=c._getDataNodeByTreeDataIndex(a[e].children,b)))return f}return null},_setTreeDataStatus:function(b,c){var d=this,e=this.options;a(b).each(function(){this[e.statusName]=c,this.children&&d._setTreeDataStatus(this.children,c)})},_addTreeDataIndexToData:function(b){var c=this;this.options,a(b).each(function(){void 0==this.treedataindex&&(this.treedataindex=c.treedataindex++,this.children&&c._addTreeDataIndexToData(this.children))})},_addToNodes:function(b){var c=this;this.options,c.nodes=c.nodes||[],-1==a.inArray(b,c.nodes)&&c.nodes.push(b),b.children&&a(b.children).each(function(a,b){c._addToNodes(b)})},_appendData:function(b,c){var f,g,d=this;this.options,f=parseInt(a(b).attr("treedataindex")),g=d._getDataNodeByTreeDataIndex(d.data,f),void 0==d.treedataindex&&(d.treedataindex=0),g&&void 0==g.children&&(g.children=[]),a(c).each(function(a,b){g?g.children[g.children.length]=b:d.data[d.data.length]=b,d._addToNodes(b)})},_setTreeItem:function(b,c){var f,g,d=this;this.options,c&&(b=d.getNodeDom(b),f=a(b),g=parseInt(f.attr("outlinelevel")),void 0!=c.isLast&&(1==c.isLast?(f.removeClass("l-last").addClass("l-last"),a("> div .l-note",f).removeClass("l-note").addClass("l-note-last"),a(".l-children li",f).find(".l-box:eq("+(g-1)+")").removeClass("l-line")):0==c.isLast&&(f.removeClass("l-last"),a("> div .l-note-last",f).removeClass("l-note-last").addClass("l-note"),a(".l-children li",f).find(".l-box:eq("+(g-1)+")").removeClass("l-line").addClass("l-line"))))},_upadteTreeWidth:function(){var a=this,b=this.options,c=22*a.maxOutlineLevel;b.checkbox&&(c+=22),(b.parentIcon||b.childIcon)&&(c+=22),c+=b.nodeWidth,a.tree.width(c)},_getChildNodeClassName:function(){var b=this.options;return"l-tree-icon-"+b.childIcon},_getParentNodeClassName:function(a){var c=this.options,d="l-tree-icon-"+c.parentIcon;return a&&(d+="-open"),d},_getTreeHTMLByData:function(b,c,d,e){var h,i,j,k,l,m,n,o,p,f=this,g=this.options;for(f.maxOutlineLevel<c&&(f.maxOutlineLevel=c),d=d||[],c=c||1,h=[],e?h.push("<ul class='l-children'>"):h.push('<ul class="l-children" style="display:none">'),i=0;i<b.length;i++){for(j=0==i,k=i==b.length-1,l=!0,m=b[i],(0==m.isexpand||"false"==m.isexpand)&&(l=!1),h.push("<li "),void 0!=m.treedataindex&&h.push('treedataindex="'+m.treedataindex+'" '),l&&h.push("isexpand="+m.isexpand+" "),h.push("outlinelevel="+c+" "),n=0;n<f.sysAttribute.length;n++)a(this).attr(f.sysAttribute[n])&&(b[dataindex][f.sysAttribute[n]]=a(this).attr(f.sysAttribute[n]));for(n=0;n<g.attribute.length;n++)m[g.attribute[n]]&&h.push(g.attribute[n]+'="'+m[g.attribute[n]]+'" ');for(h.push('class="'),j&&h.push("l-first "),k&&h.push("l-last "),j&&k&&h.push("l-onlychild "),h.push('"'),h.push(">"),h.push('<div class="l-body">'),o=0;c-2>=o;o++)d[o]?h.push('<div class="l-box"></div>'):h.push('<div class="l-box l-line"></div>');if(f.hasChildren(m)?(l?h.push('<div class="l-box l-expandable-open"></div>'):h.push('<div class="l-box l-expandable-close"></div>'),g.checkbox&&(m.ischecked?h.push('<div class="l-box l-checkbox l-checkbox-checked"></div>'):h.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')),g.parentIcon&&(h.push('<div class="l-box l-tree-icon '),h.push(f._getParentNodeClassName(g.parentIcon?!0:!1)+" "),g.iconFieldName&&m[g.iconFieldName]&&h.push("l-tree-icon-none"),h.push('">'),g.iconFieldName&&m[g.iconFieldName]&&h.push('<img src="'+m[g.iconFieldName]+'" />'),h.push("</div>"))):(k?h.push('<div class="l-box l-note-last"></div>'):h.push('<div class="l-box l-note"></div>'),g.checkbox&&(m.ischecked?h.push('<div class="l-box l-checkbox l-checkbox-checked"></div>'):h.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')),g.childIcon&&(h.push('<div class="l-box l-tree-icon '),h.push(f._getChildNodeClassName()+" "),g.iconFieldName&&m[g.iconFieldName]&&h.push("l-tree-icon-none"),h.push('">'),g.iconFieldName&&m[g.iconFieldName]&&h.push('<img src="'+m[g.iconFieldName]+'" />'),h.push("</div>"))),h.push("<span>"+m[g.textFieldName]+"</span></div>"),f.hasChildren(m)){for(p=[],o=0;o<d.length;o++)p.push(d[o]);p.push(k),h.push(f._getTreeHTMLByData(m.children,c+1,p,l).join(""))}h.push("</li>")}return h.push("</ul>"),h},_getDataByTreeHTML:function(b){var c=this,d=this.options,e=[];return a("> li",b).each(function(){var h,g=e.length;for(e[g]={treedataindex:c.treedataindex++},e[g][d.textFieldName]=a("> span,> a",this).html(),h=0;h<c.sysAttribute.length;h++)a(this).attr(c.sysAttribute[h])&&(e[g][c.sysAttribute[h]]=a(this).attr(c.sysAttribute[h]));for(h=0;h<d.attribute.length;h++)a(this).attr(d.attribute[h])&&(e[g][d.attribute[h]]=a(this).attr(d.attribute[h]));a("> ul",this).length>0&&(e[g].children=c._getDataByTreeHTML(a("> ul",this)))}),e},_applyTree:function(){var d,b=this;this.options,b.data=b._getDataByTreeHTML(b.tree),d=b._getTreeHTMLByData(b.data,1,[],!0),d[d.length-1]=d[0]="",b.tree.html(d.join("")),b._upadteTreeWidth(),a(".l-body",b.tree).hover(function(){a(this).addClass("l-over")},function(){a(this).removeClass("l-over")})},_applyTreeEven:function(b){this.options,a("> .l-body",b).hover(function(){a(this).addClass("l-over")},function(){a(this).removeClass("l-over")})},_getSrcElementByEvent:function(b){var h,i,c=this,d=b.target||b.srcElement,e=d.tagName.toLowerCase(),f=a(d).parents().add(d),g=function(b){for(var c=f.length-1;c>=0;c--)if(a(f[c]).hasClass(b))return f[c];return null};return-1==f.index(this.element)?{out:!0}:(h={tree:g("l-tree"),node:g("l-body"),checkbox:g("l-checkbox"),icon:g("l-tree-icon"),text:"span"==e},h.node&&(i=parseInt(a(h.node).parent().attr("treedataindex")),h.data=c._getDataNodeByTreeDataIndex(c.data,i)),h)},_setTreeEven:function(){var b=this,c=this.options;b.hasBind("contextmenu")&&b.tree.bind("contextmenu",function(c){var f,g,d=c.target||c.srcElement,e=null;return"a"==d.tagName.toLowerCase()||"span"==d.tagName.toLowerCase()||a(d).hasClass("l-box")?e=a(d).parent().parent():a(d).hasClass("l-body")?e=a(d).parent():"li"==d.tagName.toLowerCase()&&(e=a(d)),e?(f=parseInt(e.attr("treedataindex")),g=b._getDataNodeByTreeDataIndex(b.data,f),b.trigger("contextmenu",[{data:g,target:e[0]},c])):void 0}),b.tree.click(function(d){var g,h,i,j,k,e=d.target||d.srcElement,f=null;if(f="a"==e.tagName.toLowerCase()||"span"==e.tagName.toLowerCase()||a(e).hasClass("l-box")?a(e).parent().parent():a(e).hasClass("l-body")?a(e).parent():a(e)){if(g=parseInt(f.attr("treedataindex")),h=b._getDataNodeByTreeDataIndex(b.data,g),i=a("div.l-body:first",f).find("div.l-expandable-open:first,div.l-expandable-close:first"),j=a(e).hasClass("l-expandable-open")||a(e).hasClass("l-expandable-close"),!a(e).hasClass("l-checkbox")&&!j)if(a(">div:first",f).hasClass("l-selected")){if(0==b.trigger("beforeCancelSelect",[{data:h,target:f[0]}]))return!1;a(">div:first",f).removeClass("l-selected"),b.trigger("cancelSelect",[{data:h,target:f[0]}])}else{if(0==b.trigger("beforeSelect",[{data:h,target:f[0]}]))return!1;a(".l-body",b.tree).removeClass("l-selected"),a(">div:first",f).addClass("l-selected"),b.trigger("select",[{data:h,target:f[0]}])}if(a(e).hasClass("l-checkbox"))c.autoCheckboxEven?(a(e).hasClass("l-checkbox-unchecked")?(a(e).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),a(".l-children .l-checkbox",f).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),b.trigger("check",[{data:h,target:f[0]},!0])):a(e).hasClass("l-checkbox-checked")?(a(e).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),a(".l-children .l-checkbox",f).removeClass("l-checkbox-incomplete l-checkbox-checked").addClass("l-checkbox-unchecked"),b.trigger("check",[{data:h,target:f[0]},!1])):a(e).hasClass("l-checkbox-incomplete")&&(a(e).removeClass("l-checkbox-incomplete").addClass("l-checkbox-checked"),a(".l-children .l-checkbox",f).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),b.trigger("check",[{data:h,target:f[0]},!0])),b._setParentCheckboxStatus(f)):a(e).hasClass("l-checkbox-unchecked")?(a(e).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),c.single&&a(".l-checkbox",b.tree).not(e).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),b.trigger("check",[{data:h,target:f[0]},!0])):a(e).hasClass("l-checkbox-checked")&&(a(e).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),b.trigger("check",[{data:h,target:f[0]},!1]));else if(!i.hasClass("l-expandable-open")||c.btnClickToToggleOnly&&!j){if(i.hasClass("l-expandable-close")&&(!c.btnClickToToggleOnly||j)){if(0==b.trigger("beforeExpand",[{data:h,target:f[0]}]))return!1;i.removeClass("l-expandable-close").addClass("l-expandable-open"),k=function(){b.trigger("expand",[{data:h,target:f[0]}])},c.slide?a("> .l-children",f).slideToggle("fast",k):(a("> .l-children",f).toggle(),k()),a("> div ."+b._getParentNodeClassName(),f).removeClass(b._getParentNodeClassName()).addClass(b._getParentNodeClassName(!0))}}else{if(0==b.trigger("beforeCollapse",[{data:h,target:f[0]}]))return!1;i.removeClass("l-expandable-open").addClass("l-expandable-close"),c.slide?a("> .l-children",f).slideToggle("fast"):a("> .l-children",f).toggle(),a("> div ."+b._getParentNodeClassName(!0),f).removeClass(b._getParentNodeClassName(!0)).addClass(b._getParentNodeClassName()),b.trigger("collapse",[{data:h,target:f[0]}])}b.trigger("click",[{data:h,target:f[0]}])}}),a.fn.ligerDrag&&c.nodeDraggable&&(b.nodeDroptip=a("<div class='l-drag-nodedroptip' style='display:none'></div>").appendTo("body"),b.tree.ligerDrag({revert:!0,animate:!1,proxyX:20,proxyY:20,proxy:function(d,e){var g,h,i,j,k,f=b._getSrcElementByEvent(e);if(f.node){if(g="dragging",c.nodeDraggingRender)g=c.nodeDraggingRender(d.draggingNodes,d,b);else{g="",h=!1;for(i in d.draggingNodes)j=d.draggingNodes[i],h&&(g+=","),g+=j.text,h=!0}return k=a("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+g+"</div>").appendTo("body")}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),b.children[this.id]=this},onStartDrag:function(a,d){var e,f,g;if(2==d.button)return!1;if(this.set("cursor","default"),e=b._getSrcElementByEvent(d),e.checkbox)return!1;if(c.checkbox){f=b.getChecked(),this.draggingNodes=[];for(g in f)this.draggingNodes.push(f[g].data);if(!this.draggingNodes||!this.draggingNodes.length)return!1}else this.draggingNodes=[e.data];this.draggingNode=e.data,this.set("cursor","move"),b.nodedragging=!0,this.validRange={top:b.tree.offset().top,bottom:b.tree.offset().top+b.tree.height(),left:b.tree.offset().left,right:b.tree.offset().left+b.tree.width()}},onDrag:function(c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,e=this.draggingNode;if(!e)return!1;if(f=this.draggingNodes?this.draggingNodes:[e],null==b.nodeDropIn&&(b.nodeDropIn=-1),g=d.pageX,h=d.pageY,i=!1,j=this.validRange,g<j.left||g>j.right||h>j.bottom||h<j.top)return b.nodeDropIn=-1,b.nodeDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no"),void 0;for(k=0,l=b.nodes.length;l>k;k++)if(m=b.nodes[k],n=m["treedataindex"],e["treedataindex"]==n&&(i=!0),-1==a.inArray(m,f)&&(o=i?!0:!1,-1==b.nodeDropIn||b.nodeDropIn==n)){if(p=a("li[treedataindex="+n+"] div:first",b.tree),q=p.offset(),r={top:q.top,bottom:q.top+p.height(),left:b.tree.offset().left,right:b.tree.offset().left+b.tree.width()},g>r.left&&g<r.right&&h>r.top&&h<r.bottom){s=q.top,o&&(s+=p.height()),b.nodeDroptip.css({left:r.left,top:s,width:r.right-r.left}).show(),b.nodeDropIn=n,b.nodeDropDir=o?"bottom":"top",h>r.top+7&&h<r.bottom-7?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),b.nodeDroptip.hide(),b.nodeDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),b.nodeDroptip.show(),b.nodeDropInParent=!1);break}-1!=b.nodeDropIn&&(b.nodeDropIn=-1,b.nodeDropInParent=!1,b.nodeDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}},onStopDrag:function(){var f,g,h,e=this.draggingNodes;if(b.nodedragging=!1,-1!=b.nodeDropIn){for(f=0;f<e.length;f++)g=e[f].children,g&&(e=a.grep(e,function(b){var d=-1==a.inArray(b,g);return d}));for(f in e)h=e[f],b.nodeDropInParent?(b.remove(h),b.append(b.nodeDropIn,[h])):(b.remove(h),b.append(b.getParent(b.nodeDropIn),[h],b.nodeDropIn,"bottom"==b.nodeDropDir));b.nodeDropIn=-1}b.nodeDroptip.hide(),this.set("cursor","default")}}))},_setParentCheckboxStatus:function(b){var e,f,c=this;this.options,e=0==a(".l-checkbox-unchecked",b.parent()).length,f=0==a(".l-checkbox-checked",b.parent()).length,e?b.parent().prev().find(".l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-incomplete").addClass("l-checkbox-checked"):f?b.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-checked l-checkbox-incomplete").addClass("l-checkbox-unchecked"):b.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-checked").addClass("l-checkbox-incomplete"),b.parent().parent("li").length>0&&c._setParentCheckboxStatus(b.parent().parent("li"))}})}(jQuery),function(a){var b=a.ligerui;b.windowCount=0,a.ligerWindow=function(){return b.run.call(null,"ligerWindow",arguments,{isStatic:!0})},a.ligerWindow.show=function(b){return a.ligerWindow(b)},a.ligerDefaults.Window={showClose:!0,showMax:!0,showToggle:!0,showMin:!0,title:"window",load:!1,onLoaded:null,modal:!1},a.ligerMethos.Window={},b.controls.Window=function(a){b.controls.Window.base.constructor.call(this,null,a)},b.controls.Window.ligerExtend(b.core.Win,{__getType:function(){return"Window"},__idPrev:function(){return"Window"},_extendMethods:function(){return a.ligerMethos.Window},_render:function(){var e,f,g,h,i,c=this,d=this.options;c.window=a('<div class="l-window"><div class="l-window-header"><div class="l-window-header-buttons"><div class="l-window-toggle"></div><div class="l-window-max"></div><div class="l-window-close"></div><div class="l-clear"></div></div><div class="l-window-header-inner"></div></div><div class="l-window-content"></div></div>'),c.element=c.window[0],c.window.content=a(".l-window-content",c.window),c.window.header=a(".l-window-header",c.window),c.window.buttons=a(".l-window-header-buttons:first",c.window),d.url?d.load?(c.window.content.load(d.url,function(){c.trigger("loaded")}),c.window.content.addClass("l-window-content-scroll")):(e=a("<iframe frameborder='0' src='"+d.url+"'></iframe>"),f="ligeruiwindow"+b.windowCount++,d.name&&(f=d.name),e.attr("name",f).attr("id",f),d.framename=f,e.appendTo(c.window.content),c.iframe=e):d.content?(g=a("<div>"+d.content+"</div>"),g.appendTo(c.window.content)):d.target&&(c.window.content.append(d.target),d.target.show()),this.mask(),c.active(),a("body").append(c.window),c.set({width:d.width,height:d.height}),h=0,i=0,null!=d.left?h=d.left:d.left=h=.5*(a(window).width()-c.window.width()),null!=d.top?i=d.top:d.top=i=.5*(a(window).height()-c.window.height())+a(window).scrollTop()-10,0>h&&(d.left=h=0),0>i&&(d.top=i=0),c.set(d),d.framename&&a(">iframe",c.window.content).attr("name",d.framename),d.showToggle||a(".l-window-toggle",c.window).remove(),d.showMax||a(".l-window-max",c.window).remove(),d.showClose||a(".l-window-close",c.window).remove(),c._saveStatus(),a.fn.ligerDrag&&(c.draggable=c.window.drag=c.window.ligerDrag({handler:".l-window-header-inner",onStartDrag:function(){c.active()},onStopDrag:function(){c._saveStatus()},animate:!1})),a.fn.ligerResizable&&(c.resizeable=c.window.resizable=c.window.ligerResizable({onStartResize:function(){c.active(),a(".l-window-max",c.window).removeClass("l-window-regain")},onStopResize:function(a){var d=0,e=0;return isNaN(parseInt(c.window.css("top")))||(d=parseInt(c.window.css("top"))),isNaN(parseInt(c.window.css("left")))||(e=parseInt(c.window.css("left"))),a.diffTop&&c.window.css({top:d+a.diffTop}),a.diffLeft&&c.window.css({left:e+a.diffLeft}),a.newWidth&&c.window.width(a.newWidth),a.newHeight&&c.window.content.height(a.newHeight-28),c._saveStatus(),!1}}),c.window.append("<div class='l-btn-nw-drop'></div>")),a(".l-window-toggle",c.window).click(function(){a(this).hasClass("l-window-toggle-close")?(c.collapsed=!1,a(this).removeClass("l-window-toggle-close")):(c.collapsed=!0,a(this).addClass("l-window-toggle-close")),c.window.content.slideToggle()}).hover(function(){c.window.drag&&c.window.drag.set("disabled",!0)},function(){c.window.drag&&c.window.drag.set("disabled",!1)}),a(".l-window-close",c.window).click(function(){return 0==c.trigger("close")?!1:(c.window.hide(),b.win.removeTask(c),void 0)}).hover(function(){c.window.drag&&c.window.drag.set("disabled",!0)},function(){c.window.drag&&c.window.drag.set("disabled",!1)}),a(".l-window-max",c.window).click(function(){if(a(this).hasClass("l-window-regain")){if(0==c.trigger("regain"))return!1;c.window.width(c._width).css({left:c._left,top:c._top}),c.window.content.height(c._height-28),a(this).removeClass("l-window-regain")}else{if(0==c.trigger("max"))return!1;c.window.width(a(window).width()-2).css({left:0,top:0}),c.window.content.height(a(window).height()-28).show(),a(this).addClass("l-window-regain")}})},_saveStatus:function(){var b,c,a=this;a._width=a.window.width(),a._height=a.window.height(),b=0,c=0,isNaN(parseInt(a.window.css("top")))||(b=parseInt(a.window.css("top"))),isNaN(parseInt(a.window.css("left")))||(c=parseInt(a.window.css("left"))),a._top=b,a._left=c},min:function(){this.window.hide(),this.minimize=!0,this.actived=!1},_setShowMin:function(c){var d=this;this.options,c?d.winmin||(d.winmin=a('<div class="l-window-min"></div>').prependTo(d.window.buttons).click(function(){d.min()}),b.win.addTask(d)):d.winmin&&(d.winmin.remove(),d.winmin=null)},_setLeft:function(a){null!=a&&this.window.css({left:a})},_setTop:function(a){null!=a&&this.window.css({top:a})},_setWidth:function(a){a>0&&this.window.width(a)},_setHeight:function(a){a>28&&this.window.content.height(a-28)},_setTitle:function(b){b&&a(".l-window-header-inner",this.window.header).html(b)},_setUrl:function(a){var b=this,c=this.options;c.url=a,c.load?b.window.content.html("").load(c.url,function(){return 0==b.trigger("loaded")?!1:void 0}):b.jiframe&&b.jiframe.attr("src",c.url)},hide:function(){this.options,this.unmask(),this.window.hide()},show:function(){this.options,this.mask(),this.window.show()},remove:function(){this.options,this.unmask(),this.window.remove()},active:function(){var e,f,g,h,c=this;this.options,c.minimize&&(e=c._width,f=c._height,g=c._left,h=c._top,c.maximum&&(e=a(window).width(),f=a(window).height(),g=h=0,b.win.taskbar&&(f-=b.win.taskbar.outerHeight(),b.win.top&&(h+=b.win.taskbar.outerHeight()))),c.set({width:e,height:f,left:g,top:h})),c.actived=!0,c.minimize=!1,b.win.setFront(c),c.show(),b.win.setFront(this)},setUrl:function(a){return _setUrl(a)}})}(jQuery);