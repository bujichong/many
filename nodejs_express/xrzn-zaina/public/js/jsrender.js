!function(a,b,c){"use strict";function I(a,b){for(var c in b.props)y.test(c)&&(a[c]=b.props[c])}function J(a){return a}function K(a){return a}function L(a){wb._dbgMode=a,i=a?"Unavailable (nested view): use #getIndex()":"",ub("dbg",tb.dbg=sb.dbg=a?K:J)}function M(a){this.name=(e.link?"JsViews":"JsRender")+" Error",this.message=a||this.name}function N(a,b){var c;for(c in b)a[c]=b[c];return a}function O(a){return"function"==typeof a}function P(a,b,c){return(!vb.rTag||a)&&(j=a?a.charAt(0):j,k=a?a.charAt(1):k,l=b?b.charAt(0):l,m=b?b.charAt(1):m,n=c||n,a="\\"+j+"(\\"+n+")?\\"+k,b="\\"+l+"\\"+m,g="(?:(?:(\\w+(?=[\\/\\s\\"+l+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))"+"\\s*((?:[^\\"+l+"]|\\"+l+"(?!\\"+m+"))*?)",vb.rTag=g+")",g=new RegExp(a+g+"(\\/)?|(?:\\/(\\w+)))"+b,"g"),h=new RegExp("<.*>|([^\\\\]|^)[{}]|"+a+".*"+b)),[j,k,l,m,n]}function Q(a,b){b||(b=a,a=c);var d,e,f,g,h=this,i=!b||"root"===b;if(a){if(g=h.type===b?h:c,!g)if(d=h.views,h._.useKey){for(e in d)if(g=d[e].get(a,b))break}else for(e=0,f=d.length;!g&&f>e;e++)g=d[e].get(a,b)}else if(i)for(;h.parent.parent;)g=h=h.parent;else for(;h&&!g;)g=h.type===b?h:c,h=h.parent;return g}function R(){var a=this.get("item");return a?a.index:c}function S(){return this.index}function T(b){var d,e=this,f=e.linkCtx,g=(e.ctx||{})[b];return g===c&&f&&f.ctx&&(g=f.ctx[b]),g===c&&(g=tb[b]),g&&O(g)&&!g._wrp&&(d=function(){return g.apply(this&&this!==a?this:e,arguments)},d._wrp=!0,N(d,g)),d||g}function U(a,b,d,e){var f,g,h=+d===d&&b.tmpl.bnds[d-1],i=b.linkCtx;return e=e!==c&&{props:{},args:[e]},d=e||(h?h(b.data,b,H):d),g=d.args[0],(a||h)&&(f=i&&i.tag,f||(f={_:{inline:!i,bnd:h},tagName:":",cvt:a,flow:!0,tagCtx:d,_is:"tag"},i&&(i.tag=f,f.linkCtx=i,d.ctx=pb(d.ctx,i.view.ctx)),vb._lnk(f)),f._er=e&&g,I(f,d),d.view=b,f.ctx=d.ctx||{},delete d.ctx,b._.tag=f,g=V(f,f.convert||"true"!==a&&a)[0],g=h&&b._.onRender?b._.onRender(g,b,h):g,b._.tag=c),g!=c?g:""}function V(a,b){var c=a.tagCtx,d=c.view,e=c.args;return b=b&&(""+b===b?d.getRsc("converters",b)||hb("Unknown converter: '"+b+"'"):b),e=e.length||c.index?b?e.slice():e:[d.data],b&&(b.depends&&(a.depends=vb.getDeps(a.depends,a,b.depends,b)),e[0]=b.apply(a,e)),e}function W(a,b){for(var d,e,f=this;d===c&&f;)e=f.tmpl[a],d=e&&e[b],f=f.parent;return d||H[a][b]}function X(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y="",z=b.linkCtx||0,A=b.ctx,B=d||b.tmpl,C=+e===e&&B.bnds[e-1];for("tag"===a._is&&(h=a,a=h.tagName,e=h.tagCtxs),h=h||z.tag,g=g!==c&&(y+=g,[{props:{},args:[]}]),e=g||(C?C(b.data,b,H):e),m=e.length,l=0;m>l;l++)l||d&&h||(r=b.getRsc("tags",a)||hb("Unknown tag: {{"+a+"}}")),o=e[l],(!z.tag||h._er)&&(q=o.tmpl,q=o.content=q&&B.tmpls[q-1],N(o,{tmpl:(h?h:r).template||q,render:gb,index:l,view:b,ctx:pb(o.ctx,A)})),(d=o.props.tmpl)&&(d=""+d===d?b.getRsc("templates",d)||rb(d):d,o.tmpl=d),h||(r._ctr?(h=new r._ctr,s=!!h.init):vb._lnk(h={render:r.render}),h._={inline:!z},z&&(z.tag=h,h.linkCtx=z),(h._.bnd=C||z.fn)?h._.arrVws={}:h.dataBoundOnly&&hb("{^{"+a+"}} tag must be data-bound"),h.tagName=a,h.parent=k=A&&A.tag,h._is="tag",h._def=r,h.tagCtxs=e),o.tag=h,h.dataMap&&h.tagCtxs&&(o.map=h.tagCtxs[l].map),h.flow||(p=o.ctx=o.ctx||{},i=h.parents=p.parentTags=A&&pb(p.parentTags,A.parentTags)||{},k&&(i[k.tagName]=k),i[h.tagName]=p.tag=h);if(b._.tag=h,!(h._er=g)){for(I(h,e[0]),h.rendering={},l=0;m>l;l++)o=h.tagCtx=h.tagCtxs[l],w=o.props,v=V(h,h.convert),(t=w.dataMap||h.dataMap)&&(v.length||w.dataMap)&&(u=o.map,(!u||u.src!==v[0]||f)&&(u&&u.src&&u.unmap(),u=o.map=t.map(v[0],w)),v=[u.tgt]),h.ctx=o.ctx,!l&&s&&(x=h.template,h.init(o,z,h.ctx),s=c,h.template!==x&&(h._.tmpl=h.template),z&&(z.attr=h.attr=z.attr||h.attr)),n=c,h.render&&(n=h.render.apply(h,v)),v=v.length?v:[b],n=n!==c?n:o.render(v[0],!0)||(f?c:""),y=y?y+(n||""):n;delete h.rendering}return h.tagCtx=h.tagCtxs[0],h.ctx=h.tagCtx.ctx,h._.inline&&(j=h.attr)&&j!==D&&(y="text"===j?sb.html(y):""),C&&b._.onRender?b._.onRender(y,b,C):y}function Y(a,b,c,d,e,f,g,h){var j,k,l,m=this,n="array"===b,o={key:0,useKey:n?0:1,id:""+B++,onRender:h,bnds:{}};m.data=d,m.tmpl=e,m.content=g,m.views=n?[]:{},m.parent=c,m.type=b||"top",m._=o,m.linked=!!h,c?(j=c.views,k=c._,k.useKey?(j[o.key="_"+k.useKey++]=m,m.index=i,m.getIndex=R,l=k.tag,o.bnd=n&&(!l||!!l._.bnd&&l)):j.splice(o.key=m.index=f,0,m),m.ctx=a||c.ctx):m.ctx=a}function Z(a){var b,c,d,e,f,g,h;for(b in G)if(f=G[b],(g=f.compile)&&(c=a[b+"s"]))for(d in c)e=c[d]=g(d,c[d],a),e&&(h=vb.onStore[b])&&h(d,e,g)}function $(a,b,d){var e,f;return O(b)?b={depends:b.depends,render:b}:(b.baseTag&&(b.flow=!!b.flow,b=N(N({},b.baseTag),b)),(f=b.template)!==c&&(b.template=""+f===f?rb[f]||rb(f):f),b.init!==!1&&(e=b._ctr=function(){},(e.prototype=b).constructor=e)),d&&(b._parentTmpl=d),b}function _(d,e,f,g){function i(e){if(""+e===e||e.nodeType>0){try{k=e.nodeType>0?e:!h.test(e)&&b&&b(a.document).find(e)[0]}catch(i){}return k&&(e=rb[d=d||k.getAttribute(E)],e||(d=d||"_"+A++,k.setAttribute(E,d),e=rb[d]=_(d,k.innerHTML,f,g)),k=c),e}}var j,k;return e=e||"",j=i(e),g=g||(e.markup?e:{}),g.tmplName=d,f&&(g._parentTmpl=f),!j&&e.markup&&(j=i(e.markup))&&(!j.fn||j.debug===e.debug&&j.allowCode===e.allowCode||(j=j.markup)),j!==c?(d&&!f&&(F[d]=function(){return e.render.apply(e,arguments)}),j.fn||e.fn?j.fn&&(e=d&&d!==j.tmplName?pb(g,j):j):(e=bb(j,g),jb(j.replace(s,"\\$&"),e)),Z(g),e):void 0}function ab(a){function b(b,c){this.tgt=a.getTgt(b,c)}return O(a)&&(a={getTgt:a}),a.baseMap&&(a=N(N({},a.baseMap),a)),a.map=function(a,c){return new b(a,c)},a}function bb(a,b){var c,d=wb.wrapMap||{},f=N({markup:a,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:fb},b);return b.htmlTag||(c=v.exec(a),f.htmlTag=c?c[1].toLowerCase():""),c=d[f.htmlTag],c&&c!==d.div&&(f.markup=e.trim(f.markup)),f}function cb(a,b){function d(f,g,h){var i,j,k,l;if(f&&"object"==typeof f&&!f.nodeType&&!f.markup&&!f.getTgt){for(k in f)d(k,f[k],g);return H}return g===c&&(g=f,f=c),f&&""+f!==f&&(h=g,g=f,f=c),l=h?h[e]=h[e]||{}:d,j=b.compile,null===g?f&&delete l[f]:(g=j?g=j(f,g,h):g,f&&(l[f]=g)),j&&g&&(g._is=a),g&&(i=vb.onStore[a])&&i(f,g,j),g}var e=a+"s";H[e]=d,G[a]=b}function db(a,b,c){var d=this.jquery&&(this[0]||hb('Unknown template: "'+this.selector+'"')),e=d.getAttribute(E);return fb.call(e?rb[e]:rb(d),a,b,c)}function eb(a,b,c){if(wb._dbgMode)try{return a.fn(b,c,H)}catch(d){return hb(d,c)}return a.fn(b,c,H)}function fb(a,b,c,d,f,g){var h=this;return d||!h.fn._nvw||e.isArray(a)?gb.call(h,a,b,c,d,f,g):eb(h,a,{tmpl:h})}function gb(a,b,d,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=this,x="";if(!!b===b&&(d=b,b=c),g===!0&&(o=!0,g=0),w.tag?(p=w,w=w.tag,r=w._,t=w.tagName,u=r.tmpl||p.tmpl,v=w.attr&&w.attr!==D,b=pb(b,w.ctx),q=p.content,p.props.link===!1&&(b=b||{},b.link=!1),f=f||p.view,a=arguments.length?a:f):u=w,u&&(!f&&a&&"view"===a._is&&(f=a),f&&(q=q||f.content,h=h||f._.onRender,a===f&&(a=f.data),b=pb(b,f.ctx)),f&&"top"!==f.type||((b=b||{}).root=a),u.fn||(u=rb[u]||rb(u)),u)){if(h=(b&&b.link)!==!1&&!v&&h,s=h,h===!0&&(s=c,h=f._.onRender),b=u.helpers?pb(u.helpers,b):b,e.isArray(a)&&!d)for(l=o?f:g!==c&&f||new Y(b,"array",f,a,u,g,q,h),i=0,j=a.length;j>i;i++)k=a[i],m=new Y(b,"item",l,k,u,(g||0)+i,q,h),n=eb(u,k,m),x+=l._.onRender?l._.onRender(n,m):n;else(f||!u.fn._nvw)&&(l=o?f:new Y(b,t||"data",f,a,u,g,q,h),r&&!w.flow&&(l.tag=w)),x+=eb(u,a,l);return s?s(x,l):x}return""}function hb(a,b,c){var d=wb.onError(a,b,c);if(""+a===a)throw new vb.Err(d);return!b.linkCtx&&b.linked?sb.html(d):d}function ib(a){hb("Syntax error\n"+a)}function jb(a,b,c,d){function e(b){b-=p,b&&v.push(a.substr(p,b).replace(q,"\\n"))}function f(b){b&&ib('Unmatched or missing tag: "{{/'+b+'}}" in template:\n'+a)}function h(g,h,i,j,m,o,x,z,A,B,C,E){o&&(m=":",j=D),B=B||c;var F=(h||c)&&[[]],G="",H="",I="",J="",K="",L="",M="",N="",O=!B&&!m&&!x;i=i||(A=A||"#data",m),e(E),p=E+g.length,z?n&&v.push(["*","\n"+A.replace(r,"$1")+"\n"]):i?("else"===i&&(u.test(A)&&ib('for "{{else if expr}}" use "{{else expr}}"'),F=w[7],w[8]=a.substring(w[8],E),w=s.pop(),v=w[2],O=!0),A&&(nb(A.replace(q," "),F,b).replace(t,function(a,b,c,d,e,f,g,h){return g?(H+=f+",",J+="'"+h+"',"):c?(I+=d+f+",",L+=d+"'"+h+"',"):b?M+=f:("trigger"===e&&(N+=f),G+=d+f+",",K+=d+"'"+h+"',",l=l||y.test(e)),""}).slice(0,-1),F&&F[0]&&F.pop()),k=[i,j||!!d||l||"",O&&[],lb(J,K,L),lb(H,G,I),M,N,F||0],v.push(k),O&&(s.push(w),w=k,w[8]=p)):C&&(f(C!==w[0]&&"else"!==w[0]&&C),w[8]=a.substring(w[8],E),w=s.pop()),f(!w&&C),v=w[2]}var i,k,l,n=b&&b.allowCode,o=[],p=0,s=[],v=o,w=[,,o];return c&&(a=j+a+m),f(s[0]&&s[0][2].pop()[0]),a.replace(g,h),e(a.length),(p=o[o.length-1])&&f(""+p!==p&&+p[8]===p[8]&&p[0]),c?(i=ob(o,a,c),kb(i,o[0][7])):i=ob(o,b),i._nvw&&(i._nvw=!/[~#]/.test(a)),i}function kb(a,b){a.deps=[];for(var c in b)"_jsvto"!==c&&b[c].length&&(a.deps=a.deps.concat(b[c]));a.paths=b}function lb(a,b,c){return[a.slice(0,-1),b.slice(0,-1),c.slice(0,-1)]}function mb(a,b){return"\n	"+(b?b+":{":"")+"args:["+a[0]+"]"+(a[1]||!b?",\n	props:{"+a[1]+"}":"")+(a[2]?",\n	ctx:{"+a[2]+"}":"")}function nb(a,b,c){function d(d,p,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){function P(a,c,d,h,i,k,l,m){if(d&&(j&&("linkTo"===e&&(f=b._jsvto=b._jsvto||[],f.push(v)),(!e||g)&&j.push(v.slice(c.length))),"."!==d)){var n=(h?'view.hlp("'+h+'")':i?"view":"data")+(m?(k?"."+k:h?"":i?"":"."+d)+(l||""):(m=h?"":i?k||"":d,""));return n+=m?"."+m:"",c+("view.data"===n.slice(0,9)?n.slice(5):n)}return a}w=w||"",t=t||p||C,v=v||z,A=A||H||"";var L,M,N,O=K.length-1;return!x||i||h?(j&&G&&!i&&!h&&(!e||g||f)&&(L=r[s],O>J-L&&(L=K.slice(L,J+1),G=k+":"+L+" onerror=''"+l,N=n[G],N||(n[G]=!0,n[G]=N=jb(G,c||j,!0),N.paths.push({_jsvOb:N})),N!==!0&&(f||j).push({_jsvOb:N}))),i?(i=!D,i?d:'"'):h?(h=!E,h?d:'"'):(t?(s++,r[s]=J++,t):"")+(I?s?"":(m=K.slice(m,J),(e?(e=g=f=!1,"\b"):"\b,")+m+(m=J+d.length,j&&b.push(j=[]),"\b")):y?(s&&ib(a),j&&b.pop(),e=v,g=u,m=J+d.length,u&&(j=b[e]=[]),v+":"):v?v.split("^").join(".").replace(o,P)+(A?(q[++s]=!0,"."!==v.charAt(0)&&(r[s]=J),M?"":A):w):w?w:F?(q[s--]=!1,F+(A?(q[++s]=!0,A):"")):B?(q[s]||ib(a),","):p?"":(i=D,h=E,'"'))):(ib(a),void 0)}var e,f,g,h,i,j=b&&b[0],m=0,n=c?c.links:j&&(j.links=j.links||{}),q={},r={0:-1},s=0;return(a+(c?" ":"")).replace(/\)\^/g,").").replace(p,d)}function ob(a,b,d){var e,f,g,h,i,j,k,l,m,n,o,p,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,I,J,K,L=0,M="",N={},O=a.length;for(""+b===b?(x=d?'data-link="'+b.replace(q," ").slice(1,-1)+'"':b,b=0):(x=b.tmplName||"unnamed",b.allowCode&&(N.allowCode=!0),b.debug&&(N.debug=!0),p=b.bnds,w=b.tmpls),e=0;O>e;e++)if(f=a[e],""+f===f)M+='\n+"'+f+'"';else if(g=f[0],"*"===g)M+=";\n"+f[1]+"\nret=ret";else{if(h=f[1],A=f[2],i=mb(f[3],"params")+"},"+mb(s=f[4]),I=f[5],K=f[6],B=f[8],(F="else"===g)||(L=0,p&&(r=f[7])&&(L=p.push(r))),(G=":"===g)?h&&(g=h===D?">":h+g):(A&&(y=bb(B,N),y.tmplName=x+"/"+g,ob(A,y),w.push(y)),F||(z=g,E=M,M=""),C=a[e+1],C=C&&"else"===C[0]),J=I?";\ntry{\nret+=":"\n+",t="",u="",G&&(r||K||h&&h!==D)){if(H="return {"+i+"};",v='c("'+h+'",view,',H=new Function("data,view,j,u"," // "+x+" "+L+" "+g+"\n"+H),H._er=I,t=v+L+",",u=")",H._tag=g,d)return H;kb(H,r),o=!0}if(M+=G?(d?(I?"\ntry{\n":"")+"return ":J)+(o?(o=c,n=m=!0,v+(r?(p[L-1]=H,L):"{"+i+"}")+")"):">"===g?(k=!0,"h("+s[0]+")"):(l=!0,"((v="+s[0]+')!=null?v:"")')):(n=j=!0,"\n{view:view,tmpl:"+(A?w.length:"0")+","+i+"},"),z&&!C){if(M="["+M.slice(0,-1)+"]",v='t("'+z+'",view,this,',d||r){if(M=new Function("data,view,j,u"," // "+x+" "+L+" "+z+"\nreturn "+M+";"),M._er=I,M._tag=g,r&&kb(p[L-1]=M,r),d)return M;t=v+L+",undefined,",u=")"}M=E+J+v+(L||M)+")",r=0,z=0}I&&(n=!0,M+=";\n}catch(e){ret"+(d?"urn ":"+=")+t+"j._err(e,view,"+I+")"+u+";}\n"+(d?"":"ret=ret"))}M="// "+x+"\nvar v"+(j?",t=j._tag":"")+(m?",c=j._cnvt":"")+(k?",h=j.converters.html":"")+(d?";\n":',ret=""\n')+(N.debug?"debugger;":"")+M+(d?"\n":";\nreturn ret;");try{M=new Function("data,view,j,u",M)}catch(P){ib("Compiled template code:\n\n"+M+'\n: "'+P.message+'"')}return b&&(b.fn=M),n||(M._nvw=!0),M}function pb(a,b){return a&&a!==b?b?N(N({},b),a):a:b&&N({},b)}function qb(a){return C[a]||(C[a]="&#"+a.charCodeAt(0)+";")}function xb(a){var b,c,d=[];if("object"==typeof a)for(b in a)c=a[b],c&&c.toJSON&&!c.toJSON()||O(c)||d.push({key:b,prop:c});return d}function yb(a){return null!=a?x.test(a)&&(""+a).replace(z,qb)||a:""}var e,f,g,h,i,d,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,rb,sb,tb,ub,vb,wb;if(!(b&&b.render||a.jsviews)){d="v1.0.0-beta",j="{",k="{",l="}",m="}",n="^",o=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,p=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,q=/[ \t]*(\r\n|\n|\r)/g,r=/\\(['"])/g,s=/['"\\]/g,t=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,u=/^if\s/,v=/<(\w+)[>\s]/,w=/[\x00`><"'&]/g,x=/[\x00`><\"'&]/,y=/^on[A-Z]|^convert(Back)?$/,z=w,A=0,B=0,C={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},D="html",E="data-jsv-tmpl",F={},G={template:{compile:_},tag:{compile:$},helper:{},converter:{}},H={jsviews:d,settings:function(a){N(wb,a),L(wb._dbgMode),wb.jsv&&wb.jsv()},sub:{View:Y,Err:M,tmplFn:jb,cvt:V,parse:nb,extend:N,syntaxErr:ib,onStore:{},_lnk:J,_ths:I},map:ab,_cnvt:U,_tag:X,_err:hb},(M.prototype=new Error).constructor=M,R.depends=function(){return[this.get("item"),"index"]},S.depends=function(){return["index"]},Y.prototype={get:Q,getIndex:S,getRsc:W,hlp:T,_is:"view"};for(f in G)cb(f,G[f]);rb=H.templates,sb=H.converters,tb=H.helpers,ub=H.tags,vb=H.sub,wb=H.settings,b?(e=b,e.fn.render=db,e.observable&&(N(vb,e.views.sub),H.map=e.views.map)):(e=a.jsviews={},e.isArray=Array&&Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}),e.render=F,e.views=H,e.templates=rb=H.templates,wb({debugMode:L,delimiters:P,onError:function(a,b,d){return b&&(a=d===c?"{Error: "+a+"}":O(d)?d(a,b):d),a==c?"":a},_dbgMode:!0}),ub({"else":function(){},"if":{render:function(a){var b=this,c=b.rendering.done||!a&&(arguments.length||!b.tagCtx.index)?"":(b.rendering.done=!0,b.selected=b.tagCtx.index,b.tagCtx.render(b.tagCtx.view,!0));return c},onUpdate:function(a,b,c){var d,e,f;for(d=0;(e=this.tagCtxs[d])&&e.args.length;d++)if(e=e.args[0],f=!e!=!c[d].args[0],!this.convert&&e||f)return f;return!1},flow:!0},"for":{render:function(a){var b,d=this,f=d.tagCtx,g="",h=0;return d.rendering.done||((b=!arguments.length)&&(a=f.view.data),a!==c&&(g+=f.render(a,b),h+=e.isArray(a)?a.length:1),(d.rendering.done=h)&&(d.selected=f.index)),g},flow:!0},include:{flow:!0},"*":{render:J,flow:!0}}),ub("props",{baseTag:ub["for"],dataMap:ab(xb)}),sb({html:yb,attr:yb,url:function(a){return a!=c?encodeURI(""+a):null===a?a:""}}),P("[[","]]")}}(this,this.jQuery);